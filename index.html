<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ™ï¸ Ø´Ù‡Ø± Ø¢Ù…ÙˆØ²Ø´ÛŒ Ø¯Ú©ØªØ± Ø­Ø³Ø§Ø¨ÛŒ - Ù†Ø³Ø®Ù‡ Ù†Ù‡Ø§ÛŒÛŒ</title>
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Vazirmatn, sans-serif;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --primary: #6366f1;
            --secondary: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #1f2937;
            --light: #f8fafc;
            --neon: #00ff88;
            --cyber: #0066ff;
            --jail: #dc2626;
            --hospital: #06b6d4;
            --day-bg: linear-gradient(135deg, #87CEEB, #98FB98);
            --night-bg: linear-gradient(135deg, #2c3e50, #34495e);
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: var(--day-bg);
            color: #1f2937;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            transition: all 1s ease;
        }

        body.night-mode {
            background: var(--night-bg);
            color: white;
        }

        /* ØµÙØ­Ù‡ Ù„Ø§Ú¯ÛŒÙ† */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 3000;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }

        .login-form {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            width: 95%;
            max-width: 400px;
            border: 3px solid var(--primary);
        }

        .night-mode .login-form {
            background: rgba(31, 41, 55, 0.95);
            border-color: var(--neon);
        }

        .login-title {
            text-align: center;
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 1.6em;
        }

        .night-mode .login-title {
            color: var(--neon);
        }

        .school-name {
            text-align: center;
            color: #666;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .night-mode .school-name {
            color: #ccc;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 6px;
            color: #1f2937;
            font-weight: bold;
            font-size: 0.9em;
        }

        .night-mode .form-group label {
            color: var(--neon);
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 0.9em;
            transition: all 0.3s ease;
            background: white;
            color: #1f2937;
        }

        .night-mode .form-group input, .night-mode .form-group select {
            background: rgba(255,255,255,0.1);
            border-color: var(--neon);
            color: white;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 8px rgba(99, 102, 241, 0.3);
        }

        .user-type {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
        }

        .user-type-btn {
            flex: 1;
            padding: 10px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            font-weight: bold;
            color: #1f2937;
            font-size: 0.85em;
        }

        .night-mode .user-type-btn {
            background: rgba(255,255,255,0.1);
            border-color: #666;
            color: #ccc;
        }

        .user-type-btn.active {
            border-color: var(--primary);
            background: var(--primary);
            color: white;
        }

        .night-mode .user-type-btn.active {
            border-color: var(--neon);
            background: var(--neon);
            color: black;
        }

        .btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(45deg, var(--primary), var(--cyber));
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 8px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .btn-creator {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
        }

        .btn-admin {
            background: linear-gradient(45deg, #a55eea, #8854d0);
        }

        .btn-danger {
            background: linear-gradient(45deg, var(--danger), #dc2626);
        }

        .btn-warning {
            background: linear-gradient(45deg, var(--warning), #e67e22);
        }

        .btn-success {
            background: linear-gradient(45deg, var(--secondary), #059669);
        }

        .game-container {
            display: none;
            width: 100%;
            height: 100%;
            position: fixed;
            top: 0;
            left: 0;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 12px 15px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-bottom: 2px solid var(--primary);
            transition: all 0.3s ease;
        }

        .night-mode .header {
            background: rgba(31, 41, 55, 0.95);
            border-bottom-color: var(--neon);
        }

        .header h1 {
            color: var(--primary);
            font-size: 1.2em;
        }

        .night-mode .header h1 {
            color: var(--neon);
        }

        .user-info {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .user-avatar {
            width: 35px;
            height: 35px;
            background: linear-gradient(45deg, var(--primary), var(--cyber));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1em;
            color: white;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }

        .status-bars {
            display: flex;
            flex-direction: column;
            gap: 4px;
            min-width: 120px;
        }

        .status-bar {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.7em;
        }

        .bar-container {
            flex: 1;
            height: 6px;
            background: #e5e7eb;
            border-radius: 3px;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .health-bar { background: linear-gradient(90deg, #ef4444, #f59e0b, #10b981); }
        .hunger-bar { background: linear-gradient(90deg, #10b981, #f59e0b, #ef4444); }
        .energy-bar { background: linear-gradient(90deg, #ef4444, #f59e0b, #10b981); }
        .intelligence-bar { background: linear-gradient(90deg, #8b5cf6, #06b6d4, #10b981); }

        .time-display {
            background: rgba(255,255,255,0.9);
            padding: 6px 10px;
            border-radius: 15px;
            font-weight: bold;
            box-shadow: 0 1px 4px rgba(0,0,0,0.1);
            color: #1f2937;
            font-size: 0.8em;
        }

        .night-mode .time-display {
            background: rgba(255,255,255,0.1);
            color: var(--neon);
        }

        .phone-container {
            margin-top: 70px;
            height: calc(100% - 130px);
            display: flex;
            flex-direction: column;
            background: #1a1a1a;
            border: 2px solid #333;
            border-radius: 20px;
            margin: 75px 10px 10px 10px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.8);
        }

        .phone-status-bar {
            background: #111;
            padding: 8px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #333;
            font-size: 0.7em;
            color: white;
        }

        .phone-content {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            padding: 12px;
        }

        .home-screen {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            padding: 15px;
        }

        .app-icon {
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 8px;
        }

        .app-icon:hover {
            transform: scale(1.05);
        }

        .app-icon div {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 6px auto;
            font-size: 1.4em;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }

        .app-name {
            font-size: 0.7em;
            color: #ccc;
        }

        .city-map {
            display: none;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 15px;
        }

        .map-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .location {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .location:hover {
            transform: translateY(-3px);
            border-color: var(--neon);
            box-shadow: 0 3px 10px rgba(0, 255, 136, 0.3);
        }

        .location.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .location.disabled:hover {
            transform: none;
            border-color: transparent;
            box-shadow: none;
        }

        .location-icon {
            font-size: 2em;
            margin-bottom: 8px;
        }

        .location-name {
            font-weight: bold;
            margin-bottom: 4px;
            color: white;
            font-size: 0.9em;
        }

        .location-distance {
            font-size: 0.7em;
            color: #ccc;
        }

        .backpack {
            display: none;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 15px;
        }

        .backpack-section {
            margin-bottom: 20px;
        }

        .backpack-section h3 {
            color: var(--neon);
            margin-bottom: 12px;
            border-bottom: 1px solid var(--neon);
            padding-bottom: 6px;
            font-size: 0.9em;
        }

        .items-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }

        .item-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            border: 1px solid #333;
            transition: all 0.3s ease;
        }

        .item-card:hover {
            border-color: var(--neon);
            transform: scale(1.03);
        }

        .item-icon {
            font-size: 1.5em;
            margin-bottom: 6px;
        }

        .item-details {
            font-size: 0.6em;
            color: #ccc;
            margin-top: 4px;
        }

        .bank-app {
            display: none;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 15px;
        }

        .bank-section {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .bank-section h3 {
            color: var(--neon);
            margin-bottom: 12px;
            font-size: 0.9em;
        }

        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            border-bottom: 1px solid #333;
            color: white;
            font-size: 0.8em;
        }

        .job-app {
            display: none;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 15px;
        }

        .job-card {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .job-card:hover {
            border-color: var(--neon);
            transform: translateY(-2px);
        }

        .job-card.working {
            border-color: var(--secondary);
        }

        .job-card.cooldown {
            border-color: var(--danger);
            opacity: 0.7;
        }

        .job-card.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .market-app {
            display: none;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 15px;
        }

        .market-ad {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .market-ad:hover {
            border-color: var(--neon);
        }

        .chat-app {
            display: none;
            height: 100%;
            flex-direction: column;
        }

        .chat-header {
            background: var(--primary);
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #333;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 12px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .message {
            max-width: 85%;
            padding: 8px 12px;
            border-radius: 12px;
            font-size: 0.8em;
        }

        .message.sent {
            background: var(--primary);
            align-self: flex-end;
            border-bottom-right-radius: 4px;
        }

        .message.received {
            background: #374151;
            align-self: flex-start;
            border-bottom-left-radius: 4px;
        }

        .chat-input {
            display: flex;
            padding: 12px;
            border-top: 1px solid #333;
            gap: 8px;
        }

        .chat-input input {
            flex: 1;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid #333;
            border-radius: 20px;
            color: white;
            font-size: 0.8em;
        }

        .chat-input button {
            padding: 10px 15px;
            background: var(--neon);
            border: none;
            border-radius: 20px;
            color: black;
            font-weight: bold;
            cursor: pointer;
            font-size: 0.8em;
        }

        .education-app {
            display: none;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 15px;
        }

        .law-app {
            display: none;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 15px;
        }

        .law-section {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
        }

        .transport-app {
            display: none;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 15px;
        }

        .repair-shop {
            display: none;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 15px;
        }

        .vehicle-card {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
            color: white;
        }

        .vehicle-card:hover {
            border-color: var(--neon);
            transform: translateY(-2px);
        }

        .vehicle-card.owned {
            border-color: var(--secondary);
        }

        .vehicle-status {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 12px;
            border-left: 4px solid var(--neon);
            color: white;
        }

        .health-bar {
            width: 100%;
            height: 15px;
            background: #333;
            border-radius: 8px;
            overflow: hidden;
            margin: 8px 0;
        }

        .health-fill {
            height: 100%;
            background: linear-gradient(90deg, #ef4444, #f59e0b, #10b981);
            transition: width 0.3s ease;
        }

        .repair-option {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 12px;
            margin: 8px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            color: white;
        }

        .repair-option:hover {
            border-color: var(--neon);
            transform: translateY(-1px);
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(31, 41, 55, 0.95);
            display: flex;
            justify-content: space-around;
            padding: 8px 0;
            border-top: 2px solid var(--neon);
            backdrop-filter: blur(10px);
        }

        .nav-btn {
            text-align: center;
            cursor: pointer;
            padding: 6px 8px;
            border-radius: 8px;
            transition: all 0.3s ease;
            color: #ccc;
            min-width: 50px;
        }

        .nav-btn.active {
            color: var(--neon);
            background: rgba(0, 255, 136, 0.2);
        }

        .nav-btn i {
            font-size: 1.1em;
            margin-bottom: 3px;
        }

        .nav-btn span {
            font-size: 0.6em;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(31, 41, 55, 0.95);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid var(--neon);
            width: 90%;
            max-width: 400px;
            max-height: 80vh;
            overflow-y: auto;
            overflow-x: hidden;
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.3);
        }

        .close-modal {
            position: absolute;
            top: 8px;
            left: 8px;
            background: var(--danger);
            color: white;
            border: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 0.9em;
        }

        .travel-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 2500;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
        }

        .travel-timer {
            font-size: 2.5em;
            margin: 15px 0;
            color: var(--neon);
        }

        .progress-bar {
            width: 80%;
            height: 15px;
            background: #333;
            border-radius: 8px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--cyber));
            transition: width 1s linear;
        }

        .jail-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #450a0a, #7f1d1d);
            z-index: 3000;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
        }

        .jail-screen h1 {
            color: var(--danger);
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .jail-timer {
            font-size: 3em;
            color: var(--neon);
            margin: 20px 0;
        }

        .notification {
            position: fixed;
            top: 80px;
            right: 10px;
            background: var(--primary);
            color: white;
            padding: 12px 15px;
            border-radius: 8px;
            z-index: 10000;
            animation: slideIn 0.3s ease;
            max-width: 280px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            font-size: 0.8em;
        }

        .notification.error {
            background: var(--danger);
        }

        .notification.success {
            background: var(--secondary);
        }

        .notification.warning {
            background: var(--warning);
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.4s ease;
        }

        ::-webkit-scrollbar {
            width: 4px;
        }

        ::-webkit-scrollbar-track {
            background: #1a1a2e;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--neon);
            border-radius: 2px;
        }

        /* Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø§Ù¾â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ */
        .library-app, .pharmacy-app, .realestate-app, .onlineshop-app, .internet-app, .lawyer-app, .municipality-app, .stock-app, .cooking-app, .supermarket-app, .friends-app, .training-app, .trade-app, .amusement-park-app, .cinema-app, .stadium-app {
            display: none;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 15px;
        }

        .product-card {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .product-card:hover {
            border-color: var(--neon);
            transform: translateY(-2px);
        }

        .course-card {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .course-card.active {
            border-color: var(--secondary);
        }

        .course-card.completed {
            border-color: var(--primary);
            opacity: 0.7;
        }

        .property-card {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .property-card.owned {
            border-color: var(--secondary);
        }

        .bills-section {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .bill-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #333;
            color: white;
        }

        .bill-item.overdue {
            background: rgba(239, 68, 68, 0.2);
            border-radius: 6px;
            margin: 4px 0;
        }

        .internet-package {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .internet-package:hover {
            border-color: var(--neon);
        }

        .internet-package.active {
            border-color: var(--secondary);
        }

        .delivery-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 2600;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
        }

        .user-name-display {
            font-weight: bold;
            color: var(--primary);
            font-size: 0.9em;
            margin-bottom: 2px;
        }

        .night-mode .user-name-display {
            color: var(--neon);
        }

        .friend-card {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .friend-card:hover {
            border-color: var(--neon);
        }

        .training-course {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .training-course:hover {
            border-color: var(--neon);
        }

        .trade-item {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .trade-item:hover {
            border-color: var(--neon);
        }

        /* Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆ Ø¨Ø±Ø§ÛŒ ØªÙ…Ø§Ù… Ú¯ÙˆØ´ÛŒâ€ŒÙ‡Ø§ */
        @media (max-width: 480px) {
            .home-screen {
                grid-template-columns: repeat(3, 1fr);
                gap: 6px;
                padding: 10px;
            }
            
            .app-icon div {
                width: 45px;
                height: 45px;
                font-size: 1.2em;
            }
            
            .app-name {
                font-size: 0.65em;
            }
            
            .map-grid {
                grid-template-columns: 1fr;
            }
            
            .items-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .phone-container {
                margin: 70px 5px 5px 5px;
            }
            
            .header {
                padding: 10px 12px;
                height: 65px;
            }
            
            .status-bars {
                min-width: 100px;
            }
        }

        @media (max-width: 360px) {
            .home-screen {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .app-icon div {
                width: 40px;
                height: 40px;
            }
        }

        /* Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø§Ø³Ú©Ø±ÙˆÙ„ Ø§ÙÙ‚ÛŒ */
        * {
            max-width: 100%;
        }
    </style>
</head>
<body>
    <!-- ØµÙØ­Ù‡ Ù„Ø§Ú¯ÛŒÙ† -->
    <div class="login-container" id="loginPage">
        <div class="login-form fade-in">
            <h2 class="login-title">ğŸ™ï¸ Ø´Ù‡Ø± Ø¢Ù…ÙˆØ²Ø´ÛŒ</h2>
            <div class="school-name">Ù…Ø¯Ø±Ø³Ù‡ Ø¯Ú©ØªØ± Ø­Ø³Ø§Ø¨ÛŒ - Ù†Ø³Ø®Ù‡ Ù†Ù‡Ø§ÛŒÛŒ</div>
            
            <div class="user-type">
                <div class="user-type-btn active" onclick="setUserType('student', event)">
                    Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
                </div>
                <div class="user-type-btn" onclick="setUserType('admin', event)">
                    Ù…Ø¯ÛŒØ±
                </div>
                <div class="user-type-btn" onclick="setUserType('creator', event)">
                    Ø³Ø§Ø²Ù†Ø¯Ù‡
                </div>
            </div>

            <div class="form-group">
                <label for="className"><i class="fas fa-graduation-cap"></i> Ú©Ù„Ø§Ø³</label>
                <select id="className">
                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù„Ø§Ø³</option>
                    <option value="701">Ú©Ù„Ø§Ø³ Û·Û°Û±</option>
                    <option value="702">Ú©Ù„Ø§Ø³ Û·Û°Û²</option>
                    <option value="703">Ú©Ù„Ø§Ø³ Û·Û°Û³</option>
                    <option value="704">Ú©Ù„Ø§Ø³ Û·Û°Û´</option>
                    <option value="705">Ú©Ù„Ø§Ø³ Û·Û°Ûµ</option>
                    <option value="706">Ú©Ù„Ø§Ø³ Û·Û°Û¶</option>
                </select>
            </div>

            <div class="form-group">
                <label for="firstName"><i class="fas fa-user"></i> Ù†Ø§Ù…</label>
                <input type="text" id="firstName" placeholder="Ù†Ø§Ù… Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
            </div>

            <div class="form-group">
                <label for="lastName"><i class="fas fa-users"></i> Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</label>
                <input type="text" id="lastName" placeholder="Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
            </div>

            <div class="form-group">
                <label for="password"><i class="fas fa-lock"></i> Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
                <input type="password" id="password" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
            </div>

            <button class="btn" id="studentLogin" onclick="login()">
                <i class="fas fa-play"></i> Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ
            </button>
            <button class="btn btn-admin" id="adminLogin" style="display: none;" onclick="adminLogin()">
                <i class="fas fa-cogs"></i> ÙˆØ±ÙˆØ¯ Ù…Ø¯ÛŒØ±ÛŒØª
            </button>
            <button class="btn btn-creator" id="creatorLogin" style="display: none;" onclick="creatorLogin()">
                <i class="fas fa-tools"></i> ÙˆØ±ÙˆØ¯ Ø³Ø§Ø²Ù†Ø¯Ù‡
            </button>
        </div>
    </div>

    <!-- Ø±Ø§Ø¨Ø· Ø§ØµÙ„ÛŒ Ø¨Ø§Ø²ÛŒ -->
    <div class="game-container" id="gamePage">
        <!-- Ù‡Ø¯Ø± -->
        <div class="header">
            <h1>ğŸ™ï¸ Ø´Ù‡Ø± Ø¯Ú©ØªØ± Ø­Ø³Ø§Ø¨ÛŒ</h1>
            <div class="user-info">
                <div class="time-display">
                    <i class="fas fa-clock"></i> 
                    <span id="gameTime">08:00</span>
                </div>
                <div class="status-bars">
                    <div class="status-bar">
                        <i class="fas fa-heart" style="color: #ef4444;"></i>
                        <div class="bar-container">
                            <div class="bar-fill health-bar" id="healthBar" style="width: 100%"></div>
                        </div>
                    </div>
                    <div class="status-bar">
                        <i class="fas fa-utensils" style="color: #f59e0b;"></i>
                        <div class="bar-container">
                            <div class="bar-fill hunger-bar" id="hungerBar" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="status-bar">
                        <i class="fas fa-brain" style="color: #8b5cf6;"></i>
                        <div class="bar-container">
                            <div class="bar-fill intelligence-bar" id="intelligenceBar" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="status-bar">
                        <i class="fas fa-bolt" style="color: #10b981;"></i>
                        <div class="bar-container">
                            <div class="bar-fill energy-bar" id="energyBar" style="width: 100%"></div>
                        </div>
                    </div>
                </div>
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div style="font-size: 0.8em;">
                    <div class="user-name-display" id="userName">Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±</div>
                    <div id="userCoins">Ø³Ú©Ù‡: 2,000 ğŸª™</div>
                </div>
            </div>
        </div>

        <!-- Ú¯ÙˆØ´ÛŒ Ø¯Ø§Ø®Ù„ Ø¨Ø§Ø²ÛŒ -->
        <div class="phone-container">
            <div class="phone-status-bar">
                <span id="phoneTime">08:00</span>
                <span id="internetStatus">
                    <i class="fas fa-wifi" style="color: var(--neon);"></i>
                    <i class="fas fa-battery-three-quarters" style="margin-left: 6px;"></i>
                </span>
            </div>

            <div class="phone-content" id="phoneContent">
                <!-- ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ Ú¯ÙˆØ´ÛŒ -->
                <div class="home-screen" id="homeScreen">
                    <div class="app-icon" onclick="openApp('map')">
                        <div style="background: linear-gradient(45deg, #10b981, #059669);">
                            <i class="fas fa-map"></i>
                        </div>
                        <div class="app-name">Ù†Ù‚Ø´Ù‡</div>
                    </div>
                    <div class="app-icon" onclick="openApp('backpack')">
                        <div style="background: linear-gradient(45deg, #f59e0b, #e67e22);">
                            <i class="fas fa-backpack"></i>
                        </div>
                        <div class="app-name">Ú©ÙˆÙ„Ù‡ Ù¾Ø´ØªÛŒ</div>
                    </div>
                    <div class="app-icon" onclick="openApp('bank')">
                        <div style="background: linear-gradient(45deg, #f59e0b, #d97706);">
                            <i class="fas fa-university"></i>
                        </div>
                        <div class="app-name">Ø¨Ø§Ù†Ú©</div>
                    </div>
                    <div class="app-icon" onclick="openApp('jobs')">
                        <div style="background: linear-gradient(45deg, #8b5cf6, #7c3aed);">
                            <i class="fas fa-briefcase"></i>
                        </div>
                        <div class="app-name">Ø´ØºÙ„â€ŒÙ‡Ø§</div>
                    </div>
                    <div class="app-icon" onclick="openApp('market')">
                        <div style="background: linear-gradient(45deg, #ef4444, #dc2626);">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="app-name">Ø¨Ø§Ø²Ø§Ø±</div>
                    </div>
                    <div class="app-icon" onclick="openApp('education')">
                        <div style="background: linear-gradient(45deg, #06b6d4, #0891b2);">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <div class="app-name">Ø¢Ù…ÙˆØ²Ø´</div>
                    </div>
                    <div class="app-icon" onclick="openApp('transport')">
                        <div style="background: linear-gradient(45deg, #6b7280, #4b5563);">
                            <i class="fas fa-car"></i>
                        </div>
                        <div class="app-name">Ø­Ù…Ù„ Ù†Ù‚Ù„</div>
                    </div>
                    <div class="app-icon" onclick="openApp('repair')">
                        <div style="background: linear-gradient(45deg, #dc2626, #b91c1c);">
                            <i class="fas fa-tools"></i>
                        </div>
                        <div class="app-name">ØªØ¹Ù…ÛŒØ±Ú¯Ø§Ù‡</div>
                    </div>
                    <div class="app-icon" onclick="openApp('chat')">
                        <div style="background: linear-gradient(45deg, #8b5cf6, #7c3aed);">
                            <i class="fas fa-comments"></i>
                        </div>
                        <div class="app-name">Ú†Øª</div>
                    </div>
                    <div class="app-icon" onclick="openApp('laws')">
                        <div style="background: linear-gradient(45deg, #f59e0b, #e67e22);">
                            <i class="fas fa-gavel"></i>
                        </div>
                        <div class="app-name">Ù‚ÙˆØ§Ù†ÛŒÙ†</div>
                    </div>
                    <!-- Ø§Ù¾â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ -->
                    <div class="app-icon" onclick="openApp('library')">
                        <div style="background: linear-gradient(45deg, #10b981, #059669);">
                            <i class="fas fa-book"></i>
                        </div>
                        <div class="app-name">Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡</div>
                    </div>
                    <div class="app-icon" onclick="openApp('pharmacy')">
                        <div style="background: linear-gradient(45deg, #ef4444, #dc2626);">
                            <i class="fas fa-pills"></i>
                        </div>
                        <div class="app-name">Ø¯Ø§Ø±ÙˆØ®Ø§Ù†Ù‡</div>
                    </div>
                    <div class="app-icon" onclick="openApp('realestate')">
                        <div style="background: linear-gradient(45deg, #f59e0b, #d97706);">
                            <i class="fas fa-home"></i>
                        </div>
                        <div class="app-name">Ø§Ù…Ù„Ø§Ú©</div>
                    </div>
                    <div class="app-icon" onclick="openApp('onlineshop')">
                        <div style="background: linear-gradient(45deg, #8b5cf6, #7c3aed);">
                            <i class="fas fa-shopping-bag"></i>
                        </div>
                        <div class="app-name">ÙØ±ÙˆØ´Ú¯Ø§Ù‡</div>
                    </div>
                    <div class="app-icon" onclick="openApp('internet')">
                        <div style="background: linear-gradient(45deg, #06b6d4, #0891b2);">
                            <i class="fas fa-wifi"></i>
                        </div>
                        <div class="app-name">Ø§ÛŒÙ†ØªØ±Ù†Øª</div>
                    </div>
                    <div class="app-icon" onclick="openApp('lawyer')">
                        <div style="background: linear-gradient(45deg, #6b7280, #4b5563);">
                            <i class="fas fa-balance-scale"></i>
                        </div>
                        <div class="app-name">ÙˆÚ©ÛŒÙ„</div>
                    </div>
                    <div class="app-icon" onclick="openApp('municipality')">
                        <div style="background: linear-gradient(45deg, #dc2626, #b91c1c);">
                            <i class="fas fa-landmark"></i>
                        </div>
                        <div class="app-name">Ø´Ù‡Ø±Ø¯Ø§Ø±ÛŒ</div>
                    </div>
                    <div class="app-icon" onclick="openApp('stock')">
                        <div style="background: linear-gradient(45deg, #10b981, #059669);">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="app-name">Ø¨ÙˆØ±Ø³</div>
                    </div>
                    <div class="app-icon" onclick="openApp('cooking')">
                        <div style="background: linear-gradient(45deg, #f59e0b, #e67e22);">
                            <i class="fas fa-utensils"></i>
                        </div>
                        <div class="app-name">Ø¢Ø´Ù¾Ø²ÛŒ</div>
                    </div>
                    <div class="app-icon" onclick="openApp('supermarket')">
                        <div style="background: linear-gradient(45deg, #8b5cf6, #7c3aed);">
                            <i class="fas fa-store"></i>
                        </div>
                        <div class="app-name">Ø³ÙˆÙ¾Ø±Ù…Ø§Ø±Ú©Øª</div>
                    </div>
                    <div class="app-icon" onclick="openApp('friends')">
                        <div style="background: linear-gradient(45deg, #ec4899, #db2777);">
                            <i class="fas fa-user-friends"></i>
                        </div>
                        <div class="app-name">Ø¯ÙˆØ³ØªØ§Ù†</div>
                    </div>
                    <div class="app-icon" onclick="openApp('training')">
                        <div style="background: linear-gradient(45deg, #f59e0b, #e67e22);">
                            <i class="fas fa-certificate"></i>
                        </div>
                        <div class="app-name">Ø¢Ù…ÙˆØ²Ø´Ú¯Ø§Ù‡</div>
                    </div>
                    <div class="app-icon" onclick="openApp('trade')">
                        <div style="background: linear-gradient(45deg, #10b981, #059669);">
                            <i class="fas fa-exchange-alt"></i>
                        </div>
                        <div class="app-name">ØªØ±ÛŒØ¯</div>
                    </div>
                </div>

                <!-- Ù†Ù‚Ø´Ù‡ Ø´Ù‡Ø± -->
                <div class="city-map" id="mapApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">ğŸ—ºï¸ Ù†Ù‚Ø´Ù‡ Ø´Ù‡Ø±</h2>
                    <div class="map-grid" id="cityMap">
                        <!-- Ù…Ú©Ø§Ù†â€ŒÙ‡Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ø¯Ø§ÛŒÙ†Ø§Ù…ÛŒÚ© -->
                    </div>
                </div>

                <!-- Ú©ÙˆÙ„Ù‡ Ù¾Ø´ØªÛŒ -->
                <div class="backpack" id="backpackApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">ğŸ’ Ú©ÙˆÙ„Ù‡ Ù¾Ø´ØªÛŒ Ù…Ù†</h2>
                    <div class="backpack-section">
                        <h3>ğŸ’¼ Ø´ØºÙ„â€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„</h3>
                        <div class="items-grid" id="activeJobs">
                            <!-- Ø´ØºÙ„â€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„ -->
                        </div>
                    </div>
                    <div class="backpack-section">
                        <h3>ğŸ  Ø§Ø³Ù†Ø§Ø¯ Ù…Ù„Ú©â€ŒÙ‡Ø§</h3>
                        <div class="items-grid" id="propertyDeeds">
                            <!-- Ø§Ø³Ù†Ø§Ø¯ Ù…Ù„Ú© -->
                        </div>
                    </div>
                    <div class="backpack-section">
                        <h3>ğŸš— ÙˆØ³Ø§ÛŒÙ„ Ù†Ù‚Ù„ÛŒÙ‡</h3>
                        <div class="items-grid" id="vehiclesList">
                            <!-- ÙˆØ³Ø§ÛŒÙ„ Ù†Ù‚Ù„ÛŒÙ‡ -->
                        </div>
                    </div>
                    <div class="backpack-section">
                        <h3>ğŸ“„ Ù…Ø¯Ø§Ø±Ú© Ùˆ Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡â€ŒÙ‡Ø§</h3>
                        <div class="items-grid" id="certificatesList">
                            <!-- Ù…Ø¯Ø§Ø±Ú© -->
                        </div>
                    </div>
                    <div class="backpack-section">
                        <h3>ğŸ“š Ú©ØªØ§Ø¨â€ŒÙ‡Ø§</h3>
                        <div class="items-grid" id="booksList">
                            <!-- Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ -->
                        </div>
                    </div>
                    <div class="backpack-section">
                        <h3>ğŸ’Š Ø¯Ø§Ø±ÙˆÙ‡Ø§</h3>
                        <div class="items-grid" id="medicinesList">
                            <!-- Ø¯Ø§Ø±ÙˆÙ‡Ø§ -->
                        </div>
                    </div>
                    <div class="backpack-section">
                        <h3>ğŸ›’ Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ</h3>
                        <div class="items-grid" id="foodItemsList">
                            <!-- Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ -->
                        </div>
                    </div>
                </div>

                <!-- Ø¨Ø§Ù†Ú© -->
                <div class="bank-app" id="bankApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">ğŸ¦ Ø¨Ø§Ù†Ú© Ø´Ù‡Ø±</h2>
                    <div class="bank-section">
                        <h3>ğŸ’° Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø­Ø³Ø§Ø¨</h3>
                        <div style="font-size: 1.8em; text-align: center; color: var(--neon); margin: 15px 0;">
                            <span id="bankBalance">2,000</span> ğŸª™
                        </div>
                    </div>
                    <div class="bank-section">
                        <h3>ğŸ“Š ÙˆØ§Ù…â€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„</h3>
                        <div id="activeLoans">
                            <!-- ÙˆØ§Ù…â€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„ -->
                        </div>
                    </div>
                    <div class="bank-section">
                        <h3>ğŸ“Š ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§</h3>
                        <div id="transactionsList">
                            <!-- ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ -->
                        </div>
                    </div>
                    <div class="bank-section">
                        <h3>ğŸ’¸ Ø®Ø¯Ù…Ø§Øª Ø¨Ø§Ù†Ú©ÛŒ</h3>
                        <div style="display: flex; gap: 8px;">
                            <button class="btn" onclick="showLoanModal()" style="flex: 1;">
                                Ø¯Ø±ÛŒØ§ÙØª ÙˆØ§Ù…
                            </button>
                            <button class="btn" onclick="payLoan()" style="flex: 1;">
                                Ù¾Ø±Ø¯Ø§Ø®Øª ÙˆØ§Ù…
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Ø´ØºÙ„â€ŒÙ‡Ø§ -->
                <div class="job-app" id="jobApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">ğŸ’¼ Ø³ÛŒØ³ØªÙ… Ø´ØºÙ„â€ŒÙ‡Ø§</h2>
                    <div id="jobsContainer">
                        <!-- Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø´ØºÙ„ÛŒ -->
                    </div>
                </div>

                <!-- Ø¨Ø§Ø²Ø§Ø± -->
                <div class="market-app" id="marketApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">ğŸ›’ Ø¨Ø§Ø²Ø§Ø± Ø´Ù‡Ø±</h2>
                    <div class="bank-section">
                        <h3>ğŸ“¢ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„</h3>
                        <div id="marketAds">
                            <!-- Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§ -->
                        </div>
                    </div>
                    <div class="bank-section">
                        <h3>â• Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ Ø¬Ø¯ÛŒØ¯</h3>
                        <button class="btn" onclick="showNewAdModal()">
                            Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ Ø¬Ø¯ÛŒØ¯
                        </button>
                    </div>
                </div>

                <!-- Ú†Øª -->
                <div class="chat-app" id="chatApp">
                    <div class="chat-header">
                        <h3 style="font-size: 0.9em;">ğŸ’¬ Ú†Øª Ú©Ù„Ø§Ø³ <span id="chatClassName"></span></h3>
                    </div>
                    <div class="chat-messages" id="chatMessages">
                        <!-- Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ -->
                    </div>
                    <div class="chat-input">
                        <input type="text" id="messageInput" placeholder="Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..." onkeypress="handleChatKeypress(event)">
                        <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>

                <!-- Ø¢Ù…ÙˆØ²Ø´ -->
                <div class="education-app" id="educationApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">ğŸ“ Ø³ÛŒØ³ØªÙ… ØªØ­ØµÛŒÙ„ÛŒ</h2>
                    <div class="bank-section">
                        <h3>ğŸ“š Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ ØªØ­ØµÛŒÙ„ÛŒ</h3>
                        <div id="educationCourses">
                            <!-- Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ ØªØ­ØµÛŒÙ„ÛŒ -->
                        </div>
                    </div>
                    <div class="bank-section">
                        <h3>ğŸ“œ Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡â€ŒÙ‡Ø§</h3>
                        <div id="licenseOptions">
                            <!-- Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡ -->
                        </div>
                    </div>
                </div>

                <!-- Ù‚ÙˆØ§Ù†ÛŒÙ† -->
                <div class="law-app" id="lawApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">âš–ï¸ Ù‚Ø§Ù†ÙˆÙ† Ø§Ø³Ø§Ø³ÛŒ Ø¨Ø§Ø²ÛŒ</h2>
                    <div class="law-section">
                        <h3>ğŸ“Š ÙØµÙ„ Ø§ÙˆÙ„: Ø§Ù‚ØªØµØ§Ø¯</h3>
                        <p style="font-size: 0.8em;">Â§1.1: Ù‡Ø± Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ 2,000 Ø³Ú©Ù‡ Ø´Ø±ÙˆØ¹ Ù…ÛŒâ€ŒÚ©Ù†Ø¯</p>
                        <p style="font-size: 0.8em;">Â§1.2: Ø­Ù‚ÙˆÙ‚ Ù¾Ø§ÛŒÙ‡: 500 Ø³Ú©Ù‡ Ø±ÙˆØ²Ø§Ù†Ù‡</p>
                        <p style="font-size: 0.8em;">Â§1.3: Ø¹Ø¯Ù… Ù¾Ø±Ø¯Ø§Ø®Øª ÙˆØ§Ù…: Ø²Ù†Ø¯Ø§Ù† 24 Ø³Ø§Ø¹ØªÙ‡</p>
                    </div>
                    <div class="law-section">
                        <h3>ğŸš— ÙØµÙ„ Ø¯ÙˆÙ…: Ø­Ù…Ù„ Ùˆ Ù†Ù‚Ù„</h3>
                        <p style="font-size: 0.8em;">Â§2.1: Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡ Ø±Ø§Ù†Ù†Ø¯Ú¯ÛŒ Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ø§Ø³Øª</p>
                        <p style="font-size: 0.8em;">Â§2.2: Ø±Ø§Ù†Ù†Ø¯Ú¯ÛŒ Ø¨Ø¯ÙˆÙ† Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡: Ø¬Ø±ÛŒÙ…Ù‡ 2,000 Ø³Ú©Ù‡</p>
                    </div>
                    <div class="law-section">
                        <h3>ğŸ’¼ ÙØµÙ„ Ø³ÙˆÙ…: Ø´ØºÙ„</h3>
                        <p style="font-size: 0.8em;">Â§3.1: Ù‡Ø± Ø´ØºÙ„ Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ÛŒ Ø®Ø§Øµ Ø®ÙˆØ¯ Ø±Ø§ Ø¯Ø§Ø±Ø¯</p>
                        <p style="font-size: 0.8em;">Â§3.2: Ø§Ø±ØªÙ‚Ø§Ø¡ Ø´ØºÙ„ÛŒ Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªØ¬Ø±Ø¨Ù‡ Ø¯Ø§Ø±Ø¯</p>
                    </div>
                </div>

                <!-- Ø³ÛŒØ³ØªÙ… Ø­Ù…Ù„ Ù†Ù‚Ù„ -->
                <div class="transport-app" id="transportApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">ğŸš— Ø³ÛŒØ³ØªÙ… Ø­Ù…Ù„ Ù†Ù‚Ù„</h2>
                    <div id="vehiclesContainer">
                        <!-- ÙˆØ³Ø§ÛŒÙ„ Ù†Ù‚Ù„ÛŒÙ‡ -->
                    </div>
                </div>

                <!-- ØªØ¹Ù…ÛŒØ±Ú¯Ø§Ù‡ -->
                <div class="repair-shop" id="repairShop">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">ğŸ”§ ØªØ¹Ù…ÛŒØ±Ú¯Ø§Ù‡ Ø´Ù‡Ø±</h2>
                    <div id="repairContainer">
                        <!-- ÙˆØ¶Ø¹ÛŒØª ÙˆØ³Ø§ÛŒÙ„ Ù†Ù‚Ù„ÛŒÙ‡ -->
                    </div>
                </div>

                <!-- Ø§Ù¾â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ -->

                <!-- Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ -->
                <div class="library-app" id="libraryApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">ğŸ“š Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Ø´Ù‡Ø±</h2>
                    <div class="bank-section">
                        <h3>ğŸ“– Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ</h3>
                        <div id="libraryBooks">
                            <!-- Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ -->
                        </div>
                    </div>
                </div>

                <!-- Ø¯Ø§Ø±ÙˆØ®Ø§Ù†Ù‡ -->
                <div class="pharmacy-app" id="pharmacyApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">ğŸ’Š Ø¯Ø§Ø±ÙˆØ®Ø§Ù†Ù‡ Ø´Ù‡Ø±</h2>
                    <div class="bank-section">
                        <h3>ğŸ§ª Ø¯Ø§Ø±ÙˆÙ‡Ø§ Ùˆ Ù…Ú©Ù…Ù„â€ŒÙ‡Ø§</h3>
                        <div id="pharmacyItems">
                            <!-- Ø¯Ø§Ø±ÙˆÙ‡Ø§ -->
                        </div>
                    </div>
                </div>

                <!-- Ø§Ù…Ù„Ø§Ú© -->
                <div class="realestate-app" id="realestateApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">ğŸ˜ï¸ Ø¯ÙØªØ± Ø§Ù…Ù„Ø§Ú©</h2>
                    <div class="bank-section">
                        <h3>ğŸ  Ù…Ù„Ú©â€ŒÙ‡Ø§ÛŒ Ø¨Ø±Ø§ÛŒ ÙØ±ÙˆØ´</h3>
                        <div id="propertiesForSale">
                            <!-- Ù…Ù„Ú©â€ŒÙ‡Ø§ -->
                        </div>
                    </div>
                    <div class="bank-section">
                        <h3>ğŸ¡ Ù…Ù„Ú©â€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§</h3>
                        <div id="userProperties">
                            <!-- Ù…Ù„Ú©â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø± -->
                        </div>
                    </div>
                </div>

                <!-- ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¢Ù†Ù„Ø§ÛŒÙ† -->
                <div class="onlineshop-app" id="onlineshopApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">ğŸ›’ ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¢Ù†Ù„Ø§ÛŒÙ†</h2>
                    <div class="bank-section">
                        <h3>ğŸ“¦ Ù…Ø­ØµÙˆÙ„Ø§Øª ÙˆÛŒÚ˜Ù‡</h3>
                        <div id="onlineProducts">
                            <!-- Ù…Ø­ØµÙˆÙ„Ø§Øª -->
                        </div>
                    </div>
                </div>

                <!-- Ø§ÛŒÙ†ØªØ±Ù†Øª -->
                <div class="internet-app" id="internetApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">ğŸ“¡ Ø§Ù¾Ø±Ø§ØªÙˆØ± Ø§ÛŒÙ†ØªØ±Ù†Øª</h2>
                    <div class="bank-section">
                        <h3>ğŸŒ Ø¨Ø³ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙ†ØªØ±Ù†Øª</h3>
                        <div id="internetPackages">
                            <!-- Ø¨Ø³ØªÙ‡â€ŒÙ‡Ø§ -->
                        </div>
                    </div>
                    <div class="bank-section">
                        <h3>ğŸ“Š ÙˆØ¶Ø¹ÛŒØª Ø§ÛŒÙ†ØªØ±Ù†Øª Ø´Ù…Ø§</h3>
                        <div id="internetStatusInfo">
                            <!-- ÙˆØ¶Ø¹ÛŒØª -->
                        </div>
                    </div>
                </div>

                <!-- ÙˆÚ©ÛŒÙ„ -->
                <div class="lawyer-app" id="lawyerApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">âš–ï¸ Ø¯ÙØªØ± ÙˆÚ©Ø§Ù„Øª</h2>
                    <div class="bank-section">
                        <h3>ğŸ‘¨â€ğŸ’¼ Ø®Ø¯Ù…Ø§Øª Ø­Ù‚ÙˆÙ‚ÛŒ</h3>
                        <div id="lawyerServices">
                            <!-- Ø®Ø¯Ù…Ø§Øª -->
                        </div>
                    </div>
                </div>

                <!-- Ø´Ù‡Ø±Ø¯Ø§Ø±ÛŒ -->
                <div class="municipality-app" id="municipalityApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">ğŸ›ï¸ Ø´Ù‡Ø±Ø¯Ø§Ø±ÛŒ</h2>
                    <div class="bank-section">
                        <h3>ğŸ“‹ Ù‚Ø¨ÙˆØ¶ Ø´Ù…Ø§</h3>
                        <div id="userBills">
                            <!-- Ù‚Ø¨ÙˆØ¶ -->
                        </div>
                    </div>
                </div>

                <!-- Ø¨ÙˆØ±Ø³ -->
                <div class="stock-app" id="stockApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">ğŸ“ˆ Ø¨ÙˆØ±Ø³ Ø´Ù‡Ø±</h2>
                    <div class="bank-section">
                        <h3>ğŸ’¹ Ø³Ù‡Ø§Ù…â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯</h3>
                        <div id="stocksList">
                            <!-- Ø³Ù‡Ø§Ù…â€ŒÙ‡Ø§ -->
                        </div>
                    </div>
                </div>

                <!-- Ø¢Ø´Ù¾Ø²ÛŒ -->
                <div class="cooking-app" id="cookingApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">ğŸ‘¨â€ğŸ³ Ø¢Ø´Ù¾Ø²Ø®Ø§Ù†Ù‡</h2>
                    <div class="bank-section">
                        <h3>ğŸ³ ØºØ°Ø§Ù‡Ø§ÛŒ Ù‚Ø§Ø¨Ù„ Ù¾Ø®Øª</h3>
                        <div id="cookingRecipes">
                            <!-- Ø¯Ø³ØªÙˆØ±Ù‡Ø§ -->
                        </div>
                    </div>
                </div>

                <!-- Ø³ÙˆÙ¾Ø±Ù…Ø§Ø±Ú©Øª -->
                <div class="supermarket-app" id="supermarketApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">ğŸ›’ Ø³ÙˆÙ¾Ø±Ù…Ø§Ø±Ú©Øª</h2>
                    <div class="bank-section">
                        <h3>ğŸ¥¦ Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ</h3>
                        <div id="supermarketItems">
                            <!-- Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ -->
                        </div>
                    </div>
                </div>

                <!-- Ø¯ÙˆØ³ØªØ§Ù† -->
                <div class="friends-app" id="friendsApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">ğŸ‘¥ Ø³ÛŒØ³ØªÙ… Ø¯ÙˆØ³ØªØ§Ù†</h2>
                    <div class="bank-section">
                        <h3>ğŸ¤ Ø¯ÙˆØ³ØªØ§Ù† Ø´Ù…Ø§</h3>
                        <div id="friendsList">
                            <!-- Ù„ÛŒØ³Øª Ø¯ÙˆØ³ØªØ§Ù† -->
                        </div>
                    </div>
                    <div class="bank-section">
                        <h3>ğŸ” Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø¯ÙˆØ³ØªØ§Ù† Ø¬Ø¯ÛŒØ¯</h3>
                        <button class="btn" onclick="findNewFriends()">
                            Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø¯ÙˆØ³ØªØ§Ù† Ø¬Ø¯ÛŒØ¯
                        </button>
                    </div>
                </div>

                <!-- Ø¢Ù…ÙˆØ²Ø´Ú¯Ø§Ù‡ -->
                <div class="training-app" id="trainingApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">ğŸ“ Ø¢Ù…ÙˆØ²Ø´Ú¯Ø§Ù‡ ØªØ®ØµØµÛŒ</h2>
                    <div class="bank-section">
                        <h3>ğŸ“œ Ø¯ÙˆØ±Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ®ØµØµÛŒ</h3>
                        <div id="trainingCourses">
                            <!-- Ø¯ÙˆØ±Ù‡â€ŒÙ‡Ø§ -->
                        </div>
                    </div>
                </div>

                <!-- ØªØ±ÛŒØ¯ -->
                <div class="trade-app" id="tradeApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">ğŸ’¹ Ø³ÛŒØ³ØªÙ… ØªØ±ÛŒØ¯</h2>
                    <div class="bank-section">
                        <h3>ğŸ“Š Ø¨Ø§Ø²Ø§Ø± ØªØ±ÛŒØ¯</h3>
                        <div id="tradeMarket">
                            <!-- Ø¨Ø§Ø²Ø§Ø± ØªØ±ÛŒØ¯ -->
                        </div>
                    </div>
                    <div class="bank-section">
                        <h3>ğŸ’¼ Ø¯Ø§Ø±Ø§ÛŒÛŒâ€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§</h3>
                        <div id="userAssets">
                            <!-- Ø¯Ø§Ø±Ø§ÛŒÛŒâ€ŒÙ‡Ø§ -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ØµÙØ­Ù‡ Ø³ÙØ± -->
        <div class="travel-screen" id="travelScreen">
            <div id="travelIcon" style="font-size: 3em; margin-bottom: 15px;">ğŸš—</div>
            <div id="travelDestination" style="font-size: 1.3em; margin-bottom: 8px;">Ù…Ù‚ØµØ¯: ...</div>
            <div class="travel-timer" id="travelTimer">00:00</div>
            <div class="progress-bar">
                <div class="progress-fill" id="travelProgress" style="width: 0%"></div>
            </div>
            <div id="travelMethod" style="margin-top: 8px; color: #ccc; font-size: 0.9em;">Ø±ÙˆØ´: ...</div>
            <button class="btn btn-danger" onclick="cancelTravel()" style="margin-top: 15px; padding: 10px;">
                <i class="fas fa-times"></i> Ù„ØºÙˆ Ø³ÙØ±
            </button>
        </div>

        <!-- ØµÙØ­Ù‡ Ø²Ù†Ø¯Ø§Ù† -->
        <div class="jail-screen" id="jailScreen">
            <h1>â›“ï¸ Ø²Ù†Ø¯Ø§Ù† Ø´Ù‡Ø±</h1>
            <div style="font-size: 1em; margin-bottom: 15px;">
                <p id="jailReason">Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ø¹Ø¯Ù… Ù¾Ø±Ø¯Ø§Ø®Øª ÙˆØ§Ù… Ø¨Ù‡ Ø²Ù†Ø¯Ø§Ù† Ø§ÙØªØ§Ø¯Ù‡â€ŒØ§ÛŒØ¯!</p>
                <p>Ø¨Ø§ÛŒØ¯ Ù…Ù†ØªØ¸Ø± Ø¨Ù…Ø§Ù†ÛŒØ¯ ØªØ§ Ù…Ø¯Øª Ø²Ù…Ø§Ù† Ø²Ù†Ø¯Ø§Ù† ØªÙ…Ø§Ù… Ø´ÙˆØ¯</p>
            </div>
            <div class="jail-timer" id="jailTimer">24:00:00</div>
            <div style="color: #ccc; margin-top: 15px; font-size: 0.9em;">
                <p>â° Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡:</p>
            </div>
            <div id="jailWorkOptions" style="margin-top: 20px;">
                <button class="btn" onclick="startJailWork()" style="margin: 5px;">
                    Ú©Ø§Ø± Ø¯Ø± Ø²Ù†Ø¯Ø§Ù† (100 Ø³Ú©Ù‡)
                </button>
                <button class="btn btn-warning" onclick="hireLawyerFromJail()" style="margin: 5px;">
                    Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆÚ©ÛŒÙ„ (5,000 Ø³Ú©Ù‡)
                </button>
            </div>
        </div>

        <!-- ØµÙØ­Ù‡ ØªØ­ÙˆÛŒÙ„ -->
        <div class="delivery-screen" id="deliveryScreen">
            <div style="font-size: 3em; margin-bottom: 15px;">ğŸ“¦</div>
            <div style="font-size: 1.3em; margin-bottom: 8px;" id="deliveryItem">Ø¯Ø± Ø­Ø§Ù„ ØªØ­ÙˆÛŒÙ„: ...</div>
            <div class="travel-timer" id="deliveryTimer">02:00:00</div>
            <div class="progress-bar">
                <div class="progress-fill" id="deliveryProgress" style="width: 0%"></div>
            </div>
            <div style="margin-top: 8px; color: #ccc; font-size: 0.9em;">Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡ ØªØ§ ØªØ­ÙˆÛŒÙ„</div>
        </div>

        <!-- Ù†ÙˆØ§Ø± Ù¾Ø§ÛŒÛŒÙ† -->
        <div class="bottom-nav">
            <div class="nav-btn active" onclick="showScreen('home')">
                <i class="fas fa-home"></i>
                <span>Ø®Ø§Ù†Ù‡</span>
            </div>
            <div class="nav-btn" onclick="openApp('map')">
                <i class="fas fa-map"></i>
                <span>Ø´Ù‡Ø±</span>
            </div>
            <div class="nav-btn" onclick="openApp('jobs')">
                <i class="fas fa-briefcase"></i>
                <span>Ø´ØºÙ„</span>
            </div>
            <div class="nav-btn" onclick="openApp('bank')">
                <i class="fas fa-university"></i>
                <span>Ø¨Ø§Ù†Ú©</span>
            </div>
            <div class="nav-btn" onclick="openApp('backpack')">
                <i class="fas fa-backpack"></i>
                <span>Ú©ÙˆÙ„Ù‡â€ŒÙ¾Ø´ØªÛŒ</span>
            </div>
        </div>
    </div>

    <script>
        // ==================== Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ù…Ù„ Ø¨Ø§Ø²ÛŒ ====================
        const gameData = {
            currentUser: null,
            gameTime: 8 * 60, // 08:00 Ø¨Ù‡ Ø¯Ù‚ÛŒÙ‚Ù‡
            isNight: false,
            currentTravel: null,
            isInJail: false,
            jailTimeLeft: 0,
            jailReason: "",
            currentDelivery: null,
            internetPackage: null,
            internetExpiry: null,
            internetDataLeft: 0,
            gameSpeed: 60, // 1 Ø¯Ù‚ÛŒÙ‚Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ = 1 Ø³Ø§Ø¹Øª Ø¨Ø§Ø²ÛŒ
            
            // Ù…Ú©Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø´Ù‡Ø±
            locations: [
                { 
                    id: 'school', 
                    name: 'Ù…Ø¯Ø±Ø³Ù‡ Ø¯Ú©ØªØ± Ø­Ø³Ø§Ø¨ÛŒ', 
                    icon: 'ğŸ«', 
                    distance: 0, 
                    type: 'education',
                    actions: ['ØªØ­ØµÛŒÙ„', 'Ú©Ø§Ø± Ø¯Ø± Ù…Ø¯Ø±Ø³Ù‡']
                },
                { 
                    id: 'restaurant', 
                    name: 'Ø±Ø³ØªÙˆØ±Ø§Ù†', 
                    icon: 'ğŸ•', 
                    distance: 5, 
                    type: 'food',
                    actions: ['ØºØ°Ø§ Ø®ÙˆØ±Ø¯Ù†', 'Ú©Ø§Ø± Ø¯Ø± Ø±Ø³ØªÙˆØ±Ø§Ù†'],
                    cost: 500
                },
                { 
                    id: 'cafe', 
                    name: 'Ú©Ø§ÙÙ‡', 
                    icon: 'â˜•', 
                    distance: 4, 
                    type: 'food',
                    actions: ['Ù†ÙˆØ´ÛŒØ¯Ù†ÛŒ', 'Ú©Ø§Ø± Ø¯Ø± Ú©Ø§ÙÙ‡'],
                    cost: 300
                },
                { 
                    id: 'supermarket', 
                    name: 'Ø³ÙˆÙ¾Ø±Ù…Ø§Ø±Ú©Øª', 
                    icon: 'ğŸ›’', 
                    distance: 8, 
                    type: 'market',
                    actions: ['Ø®Ø±ÛŒØ¯ Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ', 'Ú©Ø§Ø± Ø¯Ø± Ø³ÙˆÙ¾Ø±Ù…Ø§Ø±Ú©Øª']
                },
                { 
                    id: 'carShop', 
                    name: 'Ù†Ù…Ø§ÛŒØ´Ú¯Ø§Ù‡ Ù…Ø§Ø´ÛŒÙ†', 
                    icon: 'ğŸš—', 
                    distance: 12, 
                    type: 'transport',
                    actions: ['Ø®Ø±ÛŒØ¯ ÙˆØ³ÛŒÙ„Ù‡ Ù†Ù‚Ù„ÛŒÙ‡']
                },
                { 
                    id: 'bank', 
                    name: 'Ø¨Ø§Ù†Ú©', 
                    icon: 'ğŸ¦', 
                    distance: 6, 
                    type: 'service',
                    actions: ['Ø®Ø¯Ù…Ø§Øª Ø¨Ø§Ù†Ú©ÛŒ', 'Ú©Ø§Ø± Ø¯Ø± Ø¨Ø§Ù†Ú©']
                },
                { 
                    id: 'gasStation', 
                    name: 'Ù¾Ù…Ù¾ Ø¨Ù†Ø²ÛŒÙ†', 
                    icon: 'â›½', 
                    distance: 10, 
                    type: 'service',
                    actions: ['Ø³ÙˆØ®Øª Ú¯ÛŒØ±ÛŒ', 'Ú©Ø§Ø± Ø¯Ø± Ù¾Ù…Ù¾ Ø¨Ù†Ø²ÛŒÙ†'],
                    cost: 1000
                },
                { 
                    id: 'drivingSchool', 
                    name: 'Ø¢Ù…ÙˆØ²Ø´ Ø±Ø§Ù†Ù†Ø¯Ú¯ÛŒ', 
                    icon: 'ğŸš¦', 
                    distance: 7, 
                    type: 'education',
                    actions: ['Ø¢Ù…ÙˆØ²Ø´ Ø±Ø§Ù†Ù†Ø¯Ú¯ÛŒ']
                },
                { 
                    id: 'repairShop', 
                    name: 'ØªØ¹Ù…ÛŒØ±Ú¯Ø§Ù‡', 
                    icon: 'ğŸ”§', 
                    distance: 9, 
                    type: 'service',
                    actions: ['ØªØ¹Ù…ÛŒØ± ÙˆØ³ÛŒÙ„Ù‡ Ù†Ù‚Ù„ÛŒÙ‡', 'Ú©Ø§Ø± Ø¯Ø± ØªØ¹Ù…ÛŒØ±Ú¯Ø§Ù‡']
                },
                { 
                    id: 'apartments', 
                    name: 'Ù…Ø¬ØªÙ…Ø¹ Ù…Ø³Ú©ÙˆÙ†ÛŒ', 
                    icon: 'ğŸ¢', 
                    distance: 3, 
                    type: 'property',
                    actions: ['Ø®Ø±ÛŒØ¯ Ù…Ù„Ú©']
                },
                { 
                    id: 'mall', 
                    name: 'Ù…Ø±Ú©Ø² Ø®Ø±ÛŒØ¯', 
                    icon: 'ğŸ¬', 
                    distance: 9, 
                    type: 'market',
                    actions: ['Ø®Ø±ÛŒØ¯ Ø§Ø¬Ù†Ø§Ø³', 'Ú©Ø§Ø± Ø¯Ø± Ù…Ø±Ú©Ø² Ø®Ø±ÛŒØ¯']
                },
                { 
                    id: 'hospital', 
                    name: 'Ø¨ÛŒÙ…Ø§Ø±Ø³ØªØ§Ù†', 
                    icon: 'ğŸ¥', 
                    distance: 8, 
                    type: 'service',
                    actions: ['Ø¯Ø±Ù…Ø§Ù†', 'Ú©Ø§Ø± Ø¯Ø± Ø¨ÛŒÙ…Ø§Ø±Ø³ØªØ§Ù†'],
                    cost: 2000
                },
                { 
                    id: 'police', 
                    name: 'Ú©Ù„Ø§Ù†ØªØ±ÛŒ', 
                    icon: 'ğŸš“', 
                    distance: 7, 
                    type: 'service',
                    actions: ['Ø¢Ø²Ø§Ø¯ÛŒ Ø§Ø² Ø²Ù†Ø¯Ø§Ù†']
                },
                { 
                    id: 'library', 
                    name: 'Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡', 
                    icon: 'ğŸ“š', 
                    distance: 6, 
                    type: 'education',
                    actions: ['Ø®Ø±ÛŒØ¯ Ú©ØªØ§Ø¨']
                },
                { 
                    id: 'pharmacy', 
                    name: 'Ø¯Ø§Ø±ÙˆØ®Ø§Ù†Ù‡', 
                    icon: 'ğŸ’Š', 
                    distance: 5, 
                    type: 'service',
                    actions: ['Ø®Ø±ÛŒØ¯ Ø¯Ø§Ø±Ùˆ']
                },
                { 
                    id: 'realestate', 
                    name: 'Ø¯ÙØªØ± Ø§Ù…Ù„Ø§Ú©', 
                    icon: 'ğŸ˜ï¸', 
                    distance: 4, 
                    type: 'property',
                    actions: ['Ø®Ø±ÛŒØ¯ Ùˆ ÙØ±ÙˆØ´ Ù…Ù„Ú©']
                },
                { 
                    id: 'onlineshop', 
                    name: 'ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¢Ù†Ù„Ø§ÛŒÙ†', 
                    icon: 'ğŸ›’', 
                    distance: 0, 
                    type: 'market',
                    actions: ['Ø®Ø±ÛŒØ¯ Ø¢Ù†Ù„Ø§ÛŒÙ†']
                },
                { 
                    id: 'internet', 
                    name: 'Ø§Ù¾Ø±Ø§ØªÙˆØ± Ø§ÛŒÙ†ØªØ±Ù†Øª', 
                    icon: 'ğŸ“¡', 
                    distance: 3, 
                    type: 'service',
                    actions: ['Ø®Ø±ÛŒØ¯ Ø¨Ø³ØªÙ‡ Ø§ÛŒÙ†ØªØ±Ù†Øª']
                },
                { 
                    id: 'lawyer', 
                    name: 'Ø¯ÙØªØ± ÙˆÚ©Ø§Ù„Øª', 
                    icon: 'âš–ï¸', 
                    distance: 5, 
                    type: 'service',
                    actions: ['Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆÚ©ÛŒÙ„']
                },
                { 
                    id: 'municipality', 
                    name: 'Ø´Ù‡Ø±Ø¯Ø§Ø±ÛŒ', 
                    icon: 'ğŸ›ï¸', 
                    distance: 4, 
                    type: 'service',
                    actions: ['Ù¾Ø±Ø¯Ø§Ø®Øª Ù‚Ø¨ÙˆØ¶']
                },
                { 
                    id: 'stock', 
                    name: 'Ø¨ÙˆØ±Ø³', 
                    icon: 'ğŸ“ˆ', 
                    distance: 8, 
                    type: 'finance',
                    actions: ['Ø®Ø±ÛŒØ¯ Ùˆ ÙØ±ÙˆØ´ Ø³Ù‡Ø§Ù…']
                },
                { 
                    id: 'amusementPark', 
                    name: 'Ù¾Ø§Ø±Ú© ØªÙØ±ÛŒØ­ÛŒ', 
                    icon: 'ğŸ¡', 
                    distance: 15, 
                    type: 'entertainment',
                    actions: ['ØªÙØ±ÛŒØ­', 'Ú©Ø§Ø± Ø¯Ø± Ù¾Ø§Ø±Ú©']
                },
                { 
                    id: 'cinema', 
                    name: 'Ø³ÛŒÙ†Ù…Ø§', 
                    icon: 'ğŸ¬', 
                    distance: 8, 
                    type: 'entertainment',
                    actions: ['ØªÙ…Ø§Ø´Ø§ÛŒ ÙÛŒÙ„Ù…', 'Ú©Ø§Ø± Ø¯Ø± Ø³ÛŒÙ†Ù…Ø§']
                },
                { 
                    id: 'stadium', 
                    name: 'Ø§Ø³ØªØ§Ø¯ÛŒÙˆÙ…', 
                    icon: 'âš½', 
                    distance: 12, 
                    type: 'sports',
                    actions: ['ÙˆØ±Ø²Ø´', 'Ú©Ø§Ø± Ø¯Ø± Ø§Ø³ØªØ§Ø¯ÛŒÙˆÙ…']
                },
                { 
                    id: 'trainingCenter', 
                    name: 'Ø¢Ù…ÙˆØ²Ø´Ú¯Ø§Ù‡ ØªØ®ØµØµÛŒ', 
                    icon: 'ğŸ“', 
                    distance: 6, 
                    type: 'education',
                    actions: ['Ø¢Ù…ÙˆØ²Ø´ ØªØ®ØµØµÛŒ']
                }
            ],

            // Ø´ØºÙ„â€ŒÙ‡Ø§
            jobs: [
                // Ø´ØºÙ„â€ŒÙ‡Ø§ÛŒ Ù¾Ø§Ø±Ù‡â€ŒÙˆÙ‚Øª (Ø¨Ø¯ÙˆÙ† Ù…Ø¯Ø±Ú©)
                {
                    id: 1,
                    name: 'Ù¾ÛŒÚ© Ù…ÙˆØªÙˆØ±ÛŒ',
                    location: 'city',
                    icon: 'ğŸï¸',
                    type: 'delivery',
                    salary: 300,
                    requirement: [],
                    energyCost: 15,
                    timeRequired: 10,
                    cooldown: 15,
                    workType: 'part-time'
                },
                {
                    id: 2,
                    name: 'ÙØ±ÙˆØ´Ù†Ø¯Ù‡ Ø¯ÙˆØ±Ù‡â€ŒÚ¯Ø±Ø¯',
                    location: 'city',
                    icon: 'ğŸ›’',
                    type: 'retail',
                    salary: 250,
                    requirement: [],
                    energyCost: 12,
                    timeRequired: 8,
                    cooldown: 12,
                    workType: 'part-time'
                },
                {
                    id: 3,
                    name: 'Ú©Ø§Ø±Ú¯Ø± Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ',
                    location: 'construction',
                    icon: 'ğŸ‘·',
                    type: 'labor',
                    salary: 400,
                    requirement: [],
                    energyCost: 25,
                    timeRequired: 15,
                    cooldown: 20,
                    workType: 'part-time'
                },
                {
                    id: 4,
                    name: 'Ù†Ø¸Ø§ÙØªÚ†ÛŒ',
                    location: 'city',
                    icon: 'ğŸ§¹',
                    type: 'service',
                    salary: 200,
                    requirement: [],
                    energyCost: 20,
                    timeRequired: 12,
                    cooldown: 15,
                    workType: 'part-time'
                },

                // Ø´ØºÙ„â€ŒÙ‡Ø§ÛŒ ØªÙ…Ø§Ù…â€ŒÙˆÙ‚Øª (Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù…Ø¯Ø±Ú©)
                {
                    id: 5,
                    name: 'Ù…Ø¹Ù„Ù…',
                    location: 'school',
                    icon: 'ğŸ‘¨â€ğŸ«',
                    type: 'education',
                    salary: 1500,
                    requirement: ['Ù…Ø¯Ø±Ú© ØªØ­ØµÛŒÙ„ÛŒ'],
                    energyCost: 20,
                    timeRequired: 30,
                    cooldown: 45,
                    workType: 'full-time'
                },
                {
                    id: 6,
                    name: 'Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³',
                    location: 'techCompany',
                    icon: 'ğŸ’»',
                    type: 'technical',
                    salary: 2000,
                    requirement: ['Ù…Ø¯Ø±Ú© Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³ÛŒ'],
                    energyCost: 18,
                    timeRequired: 25,
                    cooldown: 35,
                    workType: 'full-time'
                },
                {
                    id: 7,
                    name: 'Ø­Ø³Ø§Ø¨Ø¯Ø§Ø±',
                    location: 'bank',
                    icon: 'ğŸ§®',
                    type: 'finance',
                    salary: 1800,
                    requirement: ['Ù…Ø¯Ø±Ú© Ø­Ø³Ø§Ø¨Ø¯Ø§Ø±ÛŒ'],
                    energyCost: 15,
                    timeRequired: 28,
                    cooldown: 40,
                    workType: 'full-time'
                },
                {
                    id: 8,
                    name: 'Ù…Ø¯ÛŒØ±',
                    location: 'office',
                    icon: 'ğŸ•´ï¸',
                    type: 'management',
                    salary: 2500,
                    requirement: ['MBA'],
                    energyCost: 22,
                    timeRequired: 35,
                    cooldown: 50,
                    workType: 'full-time'
                },
                {
                    id: 9,
                    name: 'Ù¾Ø²Ø´Ú©',
                    location: 'hospital',
                    icon: 'ğŸ‘¨â€âš•ï¸',
                    type: 'medical',
                    salary: 3000,
                    requirement: ['Ù…Ø¯Ø±Ú© Ù¾Ø²Ø´Ú©ÛŒ'],
                    energyCost: 25,
                    timeRequired: 40,
                    cooldown: 60,
                    workType: 'full-time'
                },

                // Ø´ØºÙ„â€ŒÙ‡Ø§ÛŒ Ø²Ù†Ø¯Ø§Ù†
                {
                    id: 10,
                    name: 'Ú©Ø§Ø±Ú¯Ø± Ø²Ù†Ø¯Ø§Ù†',
                    location: 'jail',
                    icon: 'â›“ï¸',
                    type: 'labor',
                    salary: 100,
                    requirement: [],
                    energyCost: 10,
                    timeRequired: 30,
                    cooldown: 30,
                    workType: 'jail'
                }
            ],

            // ÙˆØ³Ø§ÛŒÙ„ Ù†Ù‚Ù„ÛŒÙ‡
            vehicles: [
                { 
                    id: 1, 
                    name: 'Ø¯ÙˆÚ†Ø±Ø®Ù‡', 
                    price: 1000, 
                    type: 'bicycle', 
                    speed: 40, 
                    fuel: 0,
                    health: 100,
                    maxHealth: 100,
                    fuelConsumption: 0,
                    icon: 'ğŸš²'
                },
                { 
                    id: 2, 
                    name: 'Ù…ÙˆØªÙˆØ±', 
                    price: 8000, 
                    type: 'motorcycle', 
                    speed: 20, 
                    fuel: 10,
                    health: 100,
                    maxHealth: 100,
                    fuelConsumption: 3,
                    icon: 'ğŸï¸'
                },
                { 
                    id: 3, 
                    name: 'Ù…Ø§Ø´ÛŒÙ†', 
                    price: 80000, 
                    type: 'car', 
                    speed: 5, 
                    fuel: 50,
                    health: 100,
                    maxHealth: 100,
                    fuelConsumption: 5,
                    icon: 'ğŸš—'
                },
                { 
                    id: 4, 
                    name: 'Ø³ÙˆÙ¾Ø± Ø§Ø³ØªØ§Ø±', 
                    price: 500000, 
                    type: 'supercar', 
                    speed: 2, 
                    fuel: 100,
                    health: 100,
                    maxHealth: 100,
                    fuelConsumption: 10,
                    icon: 'ğŸš€'
                }
            ],

            // Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ¹Ù…ÛŒØ±
            repairOptions: [
                { name: 'ØªØ¹Ù…ÛŒØ± Ø¬Ø²Ø¦ÛŒ', cost: 500, healthRestore: 30, time: 5 },
                { name: 'ØªØ¹Ù…ÛŒØ± Ú©Ø§Ù…Ù„', cost: 1200, healthRestore: 70, time: 10 },
                { name: 'Ø¨Ø§Ø²Ø³Ø§Ø²ÛŒ Ú©Ø§Ù…Ù„', cost: 2500, healthRestore: 100, time: 20 }
            ],

            // ÙˆØ§Ù…â€ŒÙ‡Ø§
            loanOptions: [
                { amount: 5000, interest: 15, duration: 7 },
                { amount: 10000, interest: 20, duration: 14 },
                { amount: 20000, interest: 25, duration: 30 }
            ],

            // Ø¨Ø§Ø²Ø§Ø± - Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§
            marketAds: [],

            // Ø¯ÙˆØ±Ù‡â€ŒÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ
            courses: [
                { id: 1, name: 'Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡ Ù…ÙˆØªÙˆØ±', price: 3000, type: 'license', requirement: [] },
                { id: 2, name: 'Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡ Ù…Ø§Ø´ÛŒÙ†', price: 8000, type: 'license', requirement: ['Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡ Ù…ÙˆØªÙˆØ±'] },
                { id: 3, name: 'Ù…Ø¯Ø±Ú© ØªØ­ØµÛŒÙ„ÛŒ', price: 15000, type: 'education', requirement: [] },
                { id: 4, name: 'Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡ Ø¨Ù‡Ø¯Ø§Ø´Øª', price: 2500, type: 'certificate', requirement: [] },
                { id: 5, name: 'Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡ ÙÙ†ÛŒ', price: 5000, type: 'certificate', requirement: [] },
                { id: 6, name: 'Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡ Ù¾Ø±Ø³ØªØ§Ø±ÛŒ', price: 7000, type: 'certificate', requirement: [] },
                { id: 7, name: 'Ù…Ø¯Ø±Ú© Ù¾Ø²Ø´Ú©ÛŒ', price: 25000, type: 'education', requirement: ['Ù…Ø¯Ø±Ú© ØªØ­ØµÛŒÙ„ÛŒ'] }
            ],

            // Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ ØªØ­ØµÛŒÙ„ÛŒ
            educationClasses: [
                { id: 1, name: 'Ú©Ù„Ø§Ø³ Ø§ÙˆÙ„', price: 0, timeRequired: 10, requirement: [], intelligenceRequired: 0, studyTimeReduction: 0 },
                { id: 2, name: 'Ú©Ù„Ø§Ø³ Ø¯ÙˆÙ…', price: 2000, timeRequired: 15, requirement: ['Ú©Ù„Ø§Ø³ Ø§ÙˆÙ„'], intelligenceRequired: 20, studyTimeReduction: 0 },
                { id: 3, name: 'Ú©Ù„Ø§Ø³ Ø³ÙˆÙ…', price: 5000, timeRequired: 20, requirement: ['Ú©Ù„Ø§Ø³ Ø¯ÙˆÙ…'], intelligenceRequired: 40, studyTimeReduction: 0 },
                { id: 4, name: 'Ú©Ù„Ø§Ø³ Ú†Ù‡Ø§Ø±Ù…', price: 10000, timeRequired: 30, requirement: ['Ú©Ù„Ø§Ø³ Ø³ÙˆÙ…'], intelligenceRequired: 60, studyTimeReduction: 0 }
            ],

            // Ú©ØªØ§Ø¨â€ŒÙ‡Ø§
            books: [
                { id: 1, name: 'Ú©ØªØ§Ø¨ Ø±ÛŒØ§Ø¶ÛŒ Ù¾Ø§ÛŒÙ‡', price: 500, intelligenceBoost: 5, studyTimeReduction: 5, type: 'math' },
                { id: 2, name: 'Ú©ØªØ§Ø¨ Ø¹Ù„ÙˆÙ… Ù¾ÛŒØ´Ø±ÙØªÙ‡', price: 800, intelligenceBoost: 8, studyTimeReduction: 8, type: 'science' },
                { id: 3, name: 'Ú©ØªØ§Ø¨ Ø§Ø¯Ø¨ÛŒØ§Øª', price: 400, intelligenceBoost: 3, studyTimeReduction: 3, type: 'literature' },
                { id: 4, name: 'Ú©ØªØ§Ø¨ ÙÛŒØ²ÛŒÚ©', price: 1000, intelligenceBoost: 10, studyTimeReduction: 10, type: 'physics' },
                { id: 5, name: 'Ú©ØªØ§Ø¨ Ø´ÛŒÙ…ÛŒ', price: 900, intelligenceBoost: 9, studyTimeReduction: 9, type: 'chemistry' },
                { id: 6, name: 'Ú©ØªØ§Ø¨ ØªØ§Ø±ÛŒØ®', price: 300, intelligenceBoost: 2, studyTimeReduction: 2, type: 'history' }
            ],

            // Ø¯Ø§Ø±ÙˆÙ‡Ø§
            medicines: [
                { id: 1, name: 'Ù‚Ø±Øµ Ù‡ÙˆØ´ Ù…Ø¹Ù…ÙˆÙ„ÛŒ', price: 800, intelligenceBoost: 10, duration: 60, type: 'intelligence' },
                { id: 2, name: 'Ù‚Ø±Øµ Ù‡ÙˆØ´ Ù¾ÛŒØ´Ø±ÙØªÙ‡', price: 1500, intelligenceBoost: 20, duration: 120, type: 'intelligence' },
                { id: 3, name: 'Ø¯Ø§Ø±ÙˆÛŒ Ø§Ù†Ø±Ú˜ÛŒ', price: 600, energyBoost: 30, duration: 30, type: 'energy' },
                { id: 4, name: 'Ø¯Ø§Ø±ÙˆÛŒ Ø³Ù„Ø§Ù…Øª', price: 1000, healthBoost: 50, duration: 0, type: 'health' }
            ],

            // Ù…Ù„Ú©â€ŒÙ‡Ø§
            properties: [
                { id: 1, name: 'Ø¢Ù¾Ø§Ø±ØªÙ…Ø§Ù† Ú©ÙˆÚ†Ú©', price: 50000, type: 'apartment', bills: 500, space: 2 },
                { id: 2, name: 'Ø¢Ù¾Ø§Ø±ØªÙ…Ø§Ù† Ù…ØªÙˆØ³Ø·', price: 100000, type: 'apartment', bills: 800, space: 4 },
                { id: 3, name: 'Ø¢Ù¾Ø§Ø±ØªÙ…Ø§Ù† Ø¨Ø²Ø±Ú¯', price: 200000, type: 'apartment', bills: 1200, space: 6 },
                { id: 4, name: 'ÙˆÛŒÙ„Ø§', price: 500000, type: 'villa', bills: 2000, space: 10 },
                { id: 5, name: 'Ø³Ø§Ø®ØªÙ…Ø§Ù† ØªØ¬Ø§Ø±ÛŒ', price: 1000000, type: 'commercial', bills: 5000, space: 20 },
                { id: 6, name: 'Ø²Ù…ÛŒÙ†', price: 30000, type: 'land', bills: 200, space: 1 }
            ],

            // Ù…Ø­ØµÙˆÙ„Ø§Øª ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¢Ù†Ù„Ø§ÛŒÙ†
            onlineProducts: [
                { id: 1, name: 'Ù„Ù¾â€ŒØªØ§Ù¾ Ú¯ÛŒÙ…ÛŒÙ†Ú¯', price: 50000, category: 'electronics', deliveryTime: 4 },
                { id: 2, name: 'Ú¯ÙˆØ´ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯', price: 30000, category: 'electronics', deliveryTime: 3 },
                { id: 3, name: 'Ú©Ù†Ø³ÙˆÙ„ Ø¨Ø§Ø²ÛŒ', price: 40000, category: 'electronics', deliveryTime: 5 },
                { id: 4, name: 'ØªÙ„ÙˆÛŒØ²ÛŒÙˆÙ† Ù‡ÙˆØ´Ù…Ù†Ø¯', price: 60000, category: 'electronics', deliveryTime: 6 },
                { id: 5, name: 'Ø¯ÙˆÚ†Ø±Ø®Ù‡ ÙˆØ±Ø²Ø´ÛŒ', price: 15000, category: 'sports', deliveryTime: 4 },
                { id: 6, name: 'Ù…Ø¨Ù„ Ø±Ø§Ø­ØªÛŒ', price: 25000, category: 'furniture', deliveryTime: 8 }
            ],

            // Ø¨Ø³ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙ†ØªØ±Ù†Øª
            internetPackages: [
                { id: 1, name: 'Ø¨Ø³ØªÙ‡ Ø§Ù‚ØªØµØ§Ø¯ÛŒ', price: 1000, data: 5, speed: 1, duration: 7 },
                { id: 2, name: 'Ø¨Ø³ØªÙ‡ Ù…Ø¹Ù…ÙˆÙ„ÛŒ', price: 2000, data: 15, speed: 3, duration: 7 },
                { id: 3, name: 'Ø¨Ø³ØªÙ‡ Ù¾Ø±Ø³Ø±Ø¹Øª', price: 4000, data: 30, speed: 5, duration: 7 },
                { id: 4, name: 'Ø¨Ø³ØªÙ‡ Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯', price: 8000, data: 999, speed: 10, duration: 7 }
            ],

            // Ø®Ø¯Ù…Ø§Øª ÙˆÚ©Ø§Ù„Øª
            lawyerServices: [
                { id: 1, name: 'Ù…Ø´Ø§ÙˆØ±Ù‡ Ø­Ù‚ÙˆÙ‚ÛŒ', price: 1000, type: 'consultation' },
                { id: 2, name: 'Ú©Ø§Ù‡Ø´ Ø²Ù…Ø§Ù† Ø²Ù†Ø¯Ø§Ù†', price: 5000, type: 'jail_reduction', reduction: 0.5 }
            ],

            // Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ Ø³ÙˆÙ¾Ø±Ù…Ø§Ø±Ú©Øª
            supermarketItems: [
                { id: 1, name: 'Ù†Ø§Ù†', price: 100, type: 'bread', hungerReduction: 10 },
                { id: 2, name: 'Ø´ÛŒØ±', price: 200, type: 'dairy', hungerReduction: 15 },
                { id: 3, name: 'ØªØ®Ù… Ù…Ø±Øº', price: 300, type: 'protein', hungerReduction: 20 },
                { id: 4, name: 'Ù…Ø±Øº', price: 800, type: 'meat', hungerReduction: 40 },
                { id: 5, name: 'Ø¨Ø±Ù†Ø¬', price: 500, type: 'grain', hungerReduction: 25 },
                { id: 6, name: 'Ø±ÙˆØºÙ†', price: 400, type: 'cooking', hungerReduction: 5 }
            ],

            // Ø¯Ø³ØªÙˆØ±Ù‡Ø§ÛŒ Ø¢Ø´Ù¾Ø²ÛŒ
            cookingRecipes: [
                { id: 1, name: 'Ø³Ø§Ù†Ø¯ÙˆÛŒÚ†', ingredients: ['Ù†Ø§Ù†', 'ØªØ®Ù… Ù…Ø±Øº'], hungerReduction: 30, energyBoost: 10, timeRequired: 5 },
                { id: 2, name: 'Ø§Ù…Ù„Øª', ingredients: ['ØªØ®Ù… Ù…Ø±Øº', 'Ø±ÙˆØºÙ†'], hungerReduction: 40, energyBoost: 15, timeRequired: 10 },
                { id: 3, name: 'Ù…Ø±Øº Ù¾Ø®ØªÙ‡', ingredients: ['Ù…Ø±Øº', 'Ø±ÙˆØºÙ†'], hungerReduction: 60, energyBoost: 20, timeRequired: 20 },
                { id: 4, name: 'Ø¨Ø±Ù†Ø¬ Ù¾Ø®ØªÙ‡', ingredients: ['Ø¨Ø±Ù†Ø¬'], hungerReduction: 35, energyBoost: 12, timeRequired: 15 }
            ],

            // Ø³Ù‡Ø§Ù… Ø¨ÙˆØ±Ø³
            stocks: [
                { id: 1, name: 'Ø´Ø±Ú©Øª ÙÙ†Ø§ÙˆØ±ÛŒ', price: 1000, volatility: 0.1 },
                { id: 2, name: 'Ø´Ø±Ú©Øª Ø®ÙˆØ¯Ø±ÙˆØ³Ø§Ø²ÛŒ', price: 800, volatility: 0.15 },
                { id: 3, name: 'Ø´Ø±Ú©Øª Ù†ÙØª', price: 1200, volatility: 0.2 },
                { id: 4, name: 'Ø´Ø±Ú©Øª Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ', price: 600, volatility: 0.25 }
            ],

            // Ø¯ÙˆØ±Ù‡â€ŒÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´Ú¯Ø§Ù‡ ØªØ®ØµØµÛŒ
            trainingCourses: [
                { id: 1, name: 'Ø¯ÙˆØ±Ù‡ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³ÛŒ', price: 8000, timeRequired: 20, requirement: ['Ù…Ø¯Ø±Ú© ØªØ­ØµÛŒÙ„ÛŒ'], certificate: 'Ù…Ø¯Ø±Ú© Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³ÛŒ' },
                { id: 2, name: 'Ø¯ÙˆØ±Ù‡ Ø­Ø³Ø§Ø¨Ø¯Ø§Ø±ÛŒ', price: 6000, timeRequired: 18, requirement: ['Ù…Ø¯Ø±Ú© ØªØ­ØµÛŒÙ„ÛŒ'], certificate: 'Ù…Ø¯Ø±Ú© Ø­Ø³Ø§Ø¨Ø¯Ø§Ø±ÛŒ' },
                { id: 3, name: 'Ø¯ÙˆØ±Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª (MBA)', price: 15000, timeRequired: 30, requirement: ['Ù…Ø¯Ø±Ú© ØªØ­ØµÛŒÙ„ÛŒ'], certificate: 'MBA' },
                { id: 4, name: 'Ø¯ÙˆØ±Ù‡ Ù¾Ø²Ø´Ú©ÛŒ', price: 25000, timeRequired: 40, requirement: ['Ù…Ø¯Ø±Ú© ØªØ­ØµÛŒÙ„ÛŒ'], certificate: 'Ù…Ø¯Ø±Ú© Ù¾Ø²Ø´Ú©ÛŒ' }
            ],

            // Ø¨Ø§Ø²Ø§Ø± ØªØ±ÛŒØ¯
            tradeItems: [
                { id: 1, name: 'Ø·Ù„Ø§', price: 50000, volatility: 0.05 },
                { id: 2, name: 'Ù†ÙØª', price: 30000, volatility: 0.08 },
                { id: 3, name: 'Ø§Ø±Ø² Ø¯ÛŒØ¬ÛŒØªØ§Ù„', price: 20000, volatility: 0.15 },
                { id: 4, name: 'Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ', price: 15000, volatility: 0.03 }
            ],

            // Ø¯ÙˆØ³ØªØ§Ù†
            friends: [
                { id: 1, name: 'Ø¹Ù„ÛŒ Ù…Ø­Ù…Ø¯ÛŒ', level: 15, online: true },
                { id: 2, name: 'Ø³Ø§Ø±Ø§ Ø§Ø­Ù…Ø¯ÛŒ', level: 22, online: false },
                { id: 3, name: 'Ù…Ø­Ù…Ø¯ Ø±Ø¶Ø§ÛŒÛŒ', level: 18, online: true },
                { id: 4, name: 'ÙØ§Ø·Ù…Ù‡ Ú©Ø±ÛŒÙ…ÛŒ', level: 25, online: true }
            ],

            // Ú†Øª Ú©Ù„Ø§Ø³ÛŒ
            classChats: {
                '701': [
                    { user: 'Ø³ÛŒØ³ØªÙ…', message: 'Ø¨Ù‡ Ú†Øª Ú©Ù„Ø§Ø³ Û·Û°Û± Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯!', time: '08:00' }
                ],
                '702': [
                    { user: 'Ø³ÛŒØ³ØªÙ…', message: 'Ø¨Ù‡ Ú†Øª Ú©Ù„Ø§Ø³ Û·Û°Û² Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯!', time: '08:00' }
                ],
                '703': [
                    { user: 'Ø³ÛŒØ³ØªÙ…', message: 'Ø¨Ù‡ Ú†Øª Ú©Ù„Ø§Ø³ Û·Û°Û³ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯!', time: '08:00' }
                ],
                '704': [
                    { user: 'Ø³ÛŒØ³ØªÙ…', message: 'Ø¨Ù‡ Ú†Øª Ú©Ù„Ø§Ø³ Û·Û°Û´ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯!', time: '08:00' }
                ],
                '705': [
                    { user: 'Ø³ÛŒØ³ØªÙ…', message: 'Ø¨Ù‡ Ú†Øª Ú©Ù„Ø§Ø³ Û·Û°Ûµ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯!', time: '08:00' }
                ],
                '706': [
                    { user: 'Ø³ÛŒØ³ØªÙ…', message: 'Ø¨Ù‡ Ú†Øª Ú©Ù„Ø§Ø³ Û·Û°Û¶ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯!', time: '08:00' }
                ]
            }
        };

        // ==================== Ø³ÛŒØ³ØªÙ… Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† ====================
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ø²Ù…Ø§Ù† ====================
        function updateGameTime() {
            gameData.gameTime += 1;
            
            if (gameData.gameTime >= 24 * 60) {
                gameData.gameTime = 0;
                handleNewDay();
            }
            
            const hours = Math.floor(gameData.gameTime / 60);
            const minutes = gameData.gameTime % 60;
            const timeString = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
            
            document.getElementById('gameTime').textContent = timeString;
            document.getElementById('phoneTime').textContent = timeString;
            
            const wasNight = gameData.isNight;
            gameData.isNight = (hours >= 18 || hours < 6);
            
            if (wasNight !== gameData.isNight) {
                document.body.classList.toggle('night-mode', gameData.isNight);
            }

            // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø§ÛŒÙ†ØªØ±Ù†Øª
            updateInternetStatus();
        }

        function handleNewDay() {
            if (!gameData.currentUser) return;
            
            // Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ§Ù…â€ŒÙ‡Ø§
            gameData.currentUser.loans = gameData.currentUser.loans || [];
            gameData.currentUser.loans.forEach(loan => {
                loan.daysLeft--;
                if (loan.daysLeft <= 0) {
                    sendToJail('Ø¹Ø¯Ù… Ù¾Ø±Ø¯Ø§Ø®Øª ÙˆØ§Ù…');
                }
            });
            
            // Ø­Ù‚ÙˆÙ‚ Ø±ÙˆØ²Ø§Ù†Ù‡
            gameData.currentUser.coins += 500;
            gameData.currentUser.bankBalance += 500;
            gameData.currentUser.transactions.push({
                description: 'Ø­Ù‚ÙˆÙ‚ Ø±ÙˆØ²Ø§Ù†Ù‡',
                amount: 500,
                time: '09:00'
            });

            // ØªÙˆÙ„ÛŒØ¯ Ù‚Ø¨Ø¶â€ŒÙ‡Ø§
            generateBills();
            
            showNotification('ğŸ’° Ø­Ù‚ÙˆÙ‚ Ø±ÙˆØ²Ø§Ù†Ù‡ 500 Ø³Ú©Ù‡ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯!', 'success');
        }

        function generateBills() {
            if (!gameData.currentUser || !gameData.currentUser.properties) return;
            
            gameData.currentUser.bills = gameData.currentUser.bills || [];
            
            // Ù‚Ø¨Ø¶ Ø¨Ø±Ù‚ØŒ Ø¢Ø¨ØŒ Ú¯Ø§Ø² Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ù…Ù„Ú©
            gameData.currentUser.properties.forEach(property => {
                gameData.currentUser.bills.push({
                    id: Date.now() + Math.random(),
                    type: 'Ø¨Ø±Ù‚',
                    amount: Math.floor(property.bills * 0.4),
                    dueDate: 3,
                    property: property.name
                });
                
                gameData.currentUser.bills.push({
                    id: Date.now() + Math.random(),
                    type: 'Ø¢Ø¨',
                    amount: Math.floor(property.bills * 0.3),
                    dueDate: 3,
                    property: property.name
                });
                
                gameData.currentUser.bills.push({
                    id: Date.now() + Math.random(),
                    type: 'Ú¯Ø§Ø²',
                    amount: Math.floor(property.bills * 0.3),
                    dueDate: 3,
                    property: property.name
                });
            });

            // Ù‚Ø¨Ø¶ Ø§ÛŒÙ†ØªØ±Ù†Øª Ø§Ú¯Ø± Ø¨Ø³ØªÙ‡ ÙØ¹Ø§Ù„ Ø¯Ø§Ø±ÛŒÙ…
            if (gameData.internetPackage) {
                gameData.currentUser.bills.push({
                    id: Date.now() + Math.random(),
                    type: 'Ø§ÛŒÙ†ØªØ±Ù†Øª',
                    amount: Math.floor(gameData.internetPackage.price * 0.5),
                    dueDate: 7,
                    property: 'Ø³Ø±ÙˆÛŒØ³ Ø§ÛŒÙ†ØªØ±Ù†Øª'
                });
            }
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ø§ÛŒÙ†ØªØ±Ù†Øª ====================
        function updateInternetStatus() {
            const internetStatus = document.getElementById('internetStatus');
            
            if (!gameData.internetPackage || gameData.internetDataLeft <= 0) {
                internetStatus.innerHTML = '<i class="fas fa-wifi-slash" style="color: var(--danger);"></i>';
                return;
            }
            
            // Ú©Ø§Ù‡Ø´ Ø¯Ø§Ø¯Ù‡ Ø§ÛŒÙ†ØªØ±Ù†Øª Ø¨Ø± Ø§Ø³Ø§Ø³ Ø§Ø³ØªÙØ§Ø¯Ù‡
            if (Math.random() < 0.1) { // 10% chance per minute to consume data
                gameData.internetDataLeft = Math.max(0, gameData.internetDataLeft - 0.1);
            }
            
            const speedBars = Math.ceil(gameData.internetPackage.speed / 2);
            let barsHtml = '';
            for (let i = 0; i < 4; i++) {
                barsHtml += `<i class="fas fa-wifi${i < speedBars ? '' : '-slash'}" style="color: ${i < speedBars ? 'var(--neon)' : '#666'}; margin-left: 2px;"></i>`;
            }
            
            internetStatus.innerHTML = barsHtml;
        }

        function checkInternetAccess() {
            if (!gameData.internetPackage || gameData.internetDataLeft <= 0) {
                showNotification('ğŸ“¡ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§ÛŒÙ† Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø§ÛŒÙ†ØªØ±Ù†Øª Ø¯Ø§Ø±ÛŒØ¯!', 'error');
                return false;
            }
            return true;
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ø²Ù†Ø¯Ø§Ù† ====================
        function sendToJail(reason) {
            gameData.isInJail = true;
            gameData.jailTimeLeft = 60 * 60; // 1 Ø³Ø§Ø¹Øª Ø¨Ù‡ Ø«Ø§Ù†ÛŒÙ‡
            gameData.jailReason = reason;
            
            document.getElementById('jailScreen').style.display = 'flex';
            document.getElementById('jailReason').textContent = `Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ ${reason} Ø¨Ù‡ Ø²Ù†Ø¯Ø§Ù† Ø§ÙØªØ§Ø¯Ù‡â€ŒØ§ÛŒØ¯!`;
            showNotification(`â›“ï¸ Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ ${reason} Ø¨Ù‡ Ø²Ù†Ø¯Ø§Ù† Ø§ÙØªØ§Ø¯ÛŒØ¯!`, 'error');
            
            const jailInterval = setInterval(() => {
                gameData.jailTimeLeft--;
                
                const hours = Math.floor(gameData.jailTimeLeft / 3600);
                const minutes = Math.floor((gameData.jailTimeLeft % 3600) / 60);
                const seconds = gameData.jailTimeLeft % 60;
                
                document.getElementById('jailTimer').textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (gameData.jailTimeLeft <= 0) {
                    clearInterval(jailInterval);
                    releaseFromJail();
                }
            }, 1000);
        }

        function releaseFromJail() {
            gameData.isInJail = false;
            document.getElementById('jailScreen').style.display = 'none';
            showNotification('ğŸ‰ Ø§Ø² Ø²Ù†Ø¯Ø§Ù† Ø¢Ø²Ø§Ø¯ Ø´Ø¯ÛŒØ¯!', 'success');
        }

        function startJailWork() {
            if (!gameData.isInJail) return;
            
            const jailJob = gameData.jobs.find(job => job.id === 10);
            if (gameData.currentUser.energy >= jailJob.energyCost) {
                gameData.currentUser.energy -= jailJob.energyCost;
                gameData.currentUser.coins += jailJob.salary;
                
                gameData.currentUser.transactions.push({
                    description: `Ú©Ø§Ø± Ø¯Ø± Ø²Ù†Ø¯Ø§Ù†`,
                    amount: jailJob.salary,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                showNotification(`â›“ï¸ Ù…Ø¨Ù„Øº ${jailJob.salary} Ø³Ú©Ù‡ Ø§Ø² Ú©Ø§Ø± Ø¯Ø± Ø²Ù†Ø¯Ø§Ù† Ø¯Ø±ÛŒØ§ÙØª Ú©Ø±Ø¯ÛŒØ¯`, 'success');
                updateUserInfo();
            } else {
                showNotification('Ø§Ù†Ø±Ú˜ÛŒ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø± Ø¯Ø± Ø²Ù†Ø¯Ø§Ù† Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
            }
        }

        function hireLawyerFromJail() {
            if (!gameData.isInJail) return;
            
            if (gameData.currentUser.coins >= 5000) {
                gameData.currentUser.coins -= 5000;
                gameData.jailTimeLeft = Math.floor(gameData.jailTimeLeft * 0.5); // Ú©Ø§Ù‡Ø´ 50% Ø²Ù…Ø§Ù†
                
                gameData.currentUser.transactions.push({
                    description: `Ù‡Ø²ÛŒÙ†Ù‡ ÙˆÚ©ÛŒÙ„ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù‡Ø´ Ø²Ù…Ø§Ù† Ø²Ù†Ø¯Ø§Ù†`,
                    amount: -5000,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                showNotification('âš–ï¸ ÙˆÚ©ÛŒÙ„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø´Ø¯! Ø²Ù…Ø§Ù† Ø²Ù†Ø¯Ø§Ù† Ø´Ù…Ø§ 50% Ú©Ø§Ù‡Ø´ ÛŒØ§ÙØª', 'success');
                updateUserInfo();
            } else {
                showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆÚ©ÛŒÙ„ Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
            }
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ù„Ø§Ú¯ÛŒÙ† ====================
        function setUserType(type, event) {
            document.querySelectorAll('.user-type-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            const studentBtn = document.getElementById('studentLogin');
            const adminBtn = document.getElementById('adminLogin');
            const creatorBtn = document.getElementById('creatorLogin');
            
            studentBtn.style.display = 'none';
            adminBtn.style.display = 'none';
            creatorBtn.style.display = 'none';
            
            if (type === 'student') {
                studentBtn.style.display = 'block';
            } else if (type === 'admin') {
                adminBtn.style.display = 'block';
            } else if (type === 'creator') {
                creatorBtn.style.display = 'block';
            }
        }

        function login() {
            const className = document.getElementById('className').value;
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const password = document.getElementById('password').value;

            if (!className || !firstName || !lastName || !password) {
                showNotification('Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯', 'error');
                return;
            }

            gameData.currentUser = {
                id: Date.now(),
                type: 'student',
                className: className,
                firstName: firstName,
                lastName: lastName,
                coins: 2000,
                energy: 100,
                hunger: 0,
                health: 100,
                intelligence: 0,
                properties: [],
                vehicles: [],
                certificates: [],
                books: [],
                medicines: [],
                foodItems: [],
                backpack: [],
                bankBalance: 2000,
                transactions: [],
                loans: [],
                activeJobs: [],
                jobCooldowns: {},
                activeCourses: [],
                bills: [],
                stocks: [],
                friends: [],
                tradeAssets: [],
                skills: {
                    education: 0,
                    technical: 0,
                    medical: 0,
                    service: 0
                }
            };

            saveGameData();
            showGamePage();
            startGameLoop();
            showNotification(`ğŸ‰ Ø¨Ù‡ Ø´Ù‡Ø± Ø¯Ú©ØªØ± Ø­Ø³Ø§Ø¨ÛŒ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ ${firstName}!`, 'success');
        }

        function adminLogin() {
            const password = document.getElementById('password').value;
            const className = document.getElementById('className').value;
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            
            if (password === 'hesabiland') {
                gameData.currentUser = {
                    id: 'admin',
                    type: 'admin',
                    firstName: firstName || 'Ù…Ø¯ÛŒØ±',
                    lastName: lastName || 'Ù…Ø¯Ø±Ø³Ù‡',
                    className: className || '701',
                    coins: 0,
                    energy: 100,
                    hunger: 0,
                    health: 100,
                    intelligence: 100
                };
                
                showGamePage();
                showNotification('ğŸ‘‘ Ø¨Ù‡ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯', 'success');
            } else {
                showNotification('Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª', 'error');
            }
        }

        function creatorLogin() {
            const password = document.getElementById('password').value;
            
            if (password === 'hesabiland') {
                gameData.currentUser = {
                    id: 'creator',
                    type: 'creator', 
                    firstName: 'Ø¢Ø±Ø§Ø¯',
                    lastName: 'Ù…Ù‚Ø¯Ù…',
                    className: '701',
                    coins: 0,
                    energy: 100,
                    hunger: 0,
                    health: 100,
                    intelligence: 100
                };
                
                showGamePage();
                showNotification('ğŸ› ï¸ Ø¨Ù‡ Ù¾Ù†Ù„ Ø³Ø§Ø²Ù†Ø¯Ù‡ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯', 'success');
            } else {
                showNotification('Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø³Ø§Ø²Ù†Ø¯Ù‡ Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª', 'error');
            }
        }

        // ==================== Ù†Ù…Ø§ÛŒØ´ Ø¨Ø§Ø²ÛŒ ====================
        function showGamePage() {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('gamePage').style.display = 'block';
            updateUserInfo();
            loadCityMap();
            startTimeLoop();
        }

        function updateUserInfo() {
            if (!gameData.currentUser) return;
            
            document.getElementById('userName').textContent = 
                `${gameData.currentUser.firstName} ${gameData.currentUser.lastName}`;
            document.getElementById('userCoins').textContent = 
                `Ø³Ú©Ù‡: ${gameData.currentUser.coins.toLocaleString()} ğŸª™`;
            
            // Ø¢Ù¾Ø¯ÛŒØª ÙˆØ¶Ø¹ÛŒØªâ€ŒÙ‡Ø§
            document.getElementById('healthBar').style.width = `${gameData.currentUser.health}%`;
            document.getElementById('hungerBar').style.width = `${gameData.currentUser.hunger}%`;
            document.getElementById('energyBar').style.width = `${gameData.currentUser.energy}%`;
            document.getElementById('intelligenceBar').style.width = `${gameData.currentUser.intelligence}%`;
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ø§Ù¾â€ŒÙ‡Ø§ ====================
        function openApp(appName) {
            if (gameData.isInJail && !['map', 'internet'].includes(appName)) {
                showNotification('â›“ï¸ Ø¯Ø± Ø­Ø§Ù„ Ø­Ø§Ø¶Ø± Ø¯Ø± Ø²Ù†Ø¯Ø§Ù† Ù‡Ø³ØªÛŒØ¯!', 'error');
                return;
            }

            // Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø§ÛŒÙ†ØªØ±Ù†Øª Ø¨Ø±Ø§ÛŒ Ø§Ù¾â€ŒÙ‡Ø§
            if (appName !== 'internet' && appName !== '' && !checkInternetAccess()) {
                return;
            }

            const apps = [
                'homeScreen', 'mapApp', 'backpackApp', 'bankApp', 'jobApp', 'marketApp', 
                'chatApp', 'educationApp', 'lawApp', 'transportApp', 'repairShop',
                'libraryApp', 'pharmacyApp', 'realestateApp', 'onlineshopApp', 
                'internetApp', 'lawyerApp', 'municipalityApp', 'stockApp', 
                'cookingApp', 'supermarketApp', 'friendsApp', 'trainingApp', 'tradeApp'
            ];
            
            apps.forEach(app => {
                document.getElementById(app).style.display = 'none';
            });
            
            switch(appName) {
                case 'map':
                    document.getElementById('mapApp').style.display = 'block';
                    break;
                case 'backpack':
                    document.getElementById('backpackApp').style.display = 'block';
                    loadBackpack();
                    break;
                case 'bank':
                    document.getElementById('bankApp').style.display = 'block';
                    loadBank();
                    break;
                case 'jobs':
                    document.getElementById('jobApp').style.display = 'block';
                    loadJobs();
                    break;
                case 'market':
                    document.getElementById('marketApp').style.display = 'block';
                    loadMarket();
                    break;
                case 'chat':
                    document.getElementById('chatApp').style.display = 'flex';
                    loadChat();
                    break;
                case 'education':
                    document.getElementById('educationApp').style.display = 'block';
                    loadEducation();
                    break;
                case 'laws':
                    document.getElementById('lawApp').style.display = 'block';
                    break;
                case 'transport':
                    document.getElementById('transportApp').style.display = 'block';
                    loadTransport();
                    break;
                case 'repair':
                    document.getElementById('repairShop').style.display = 'block';
                    loadRepairShop();
                    break;
                case 'library':
                    document.getElementById('libraryApp').style.display = 'block';
                    loadLibrary();
                    break;
                case 'pharmacy':
                    document.getElementById('pharmacyApp').style.display = 'block';
                    loadPharmacy();
                    break;
                case 'realestate':
                    document.getElementById('realestateApp').style.display = 'block';
                    loadRealEstate();
                    break;
                case 'onlineshop':
                    document.getElementById('onlineshopApp').style.display = 'block';
                    loadOnlineShop();
                    break;
                case 'internet':
                    document.getElementById('internetApp').style.display = 'block';
                    loadInternet();
                    break;
                case 'lawyer':
                    document.getElementById('lawyerApp').style.display = 'block';
                    loadLawyer();
                    break;
                case 'municipality':
                    document.getElementById('municipalityApp').style.display = 'block';
                    loadMunicipality();
                    break;
                case 'stock':
                    document.getElementById('stockApp').style.display = 'block';
                    loadStock();
                    break;
                case 'cooking':
                    document.getElementById('cookingApp').style.display = 'block';
                    loadCooking();
                    break;
                case 'supermarket':
                    document.getElementById('supermarketApp').style.display = 'block';
                    loadSupermarket();
                    break;
                case 'friends':
                    document.getElementById('friendsApp').style.display = 'block';
                    loadFriends();
                    break;
                case 'training':
                    document.getElementById('trainingApp').style.display = 'block';
                    loadTraining();
                    break;
                case 'trade':
                    document.getElementById('tradeApp').style.display = 'block';
                    loadTrade();
                    break;
                default:
                    document.getElementById('homeScreen').style.display = 'grid';
            }
        }

        function showScreen(screen) {
            openApp(screen === 'home' ? '' : screen);
            
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ù†Ù‚Ø´Ù‡ Ùˆ Ø³ÙØ± ====================
        function loadCityMap() {
            const cityMap = document.getElementById('cityMap');
            cityMap.innerHTML = '';
            
            gameData.locations.forEach(location => {
                const locationElement = document.createElement('div');
                locationElement.className = 'location';
                locationElement.innerHTML = `
                    <div class="location-icon">${location.icon}</div>
                    <div class="location-name">${location.name}</div>
                    <div class="location-distance">${location.distance} Ø¯Ù‚ÛŒÙ‚Ù‡ Ù¾ÛŒØ§Ø¯Ù‡</div>
                `;
                
                locationElement.addEventListener('click', () => travelToLocation(location));
                cityMap.appendChild(locationElement);
            });
        }

        function travelToLocation(location) {
            if (gameData.currentTravel) {
                showNotification('Ø¯Ø± Ø­Ø§Ù„ Ø­Ø§Ø¶Ø± Ø¯Ø± Ø­Ø§Ù„ Ø³ÙØ± Ù‡Ø³ØªÛŒØ¯!', 'error');
                return;
            }

            if (gameData.currentUser.energy < 10) {
                showNotification('Ø§Ù†Ø±Ú˜ÛŒ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø³ÙØ± Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
                return;
            }

            let travelTime = location.distance * 60;
            let method = 'Ù¾ÛŒØ§Ø¯Ù‡';
            let vehicle = null;

            // Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø³Ø±ÛŒØ¹ØªØ±ÛŒÙ† ÙˆØ³ÛŒÙ„Ù‡ Ù†Ù‚Ù„ÛŒÙ‡ Ù‚Ø§Ø¨Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡
            if (gameData.currentUser.vehicles.length > 0) {
                const availableVehicles = gameData.currentUser.vehicles.filter(v => 
                    v.health > 20 && (v.type === 'bicycle' || v.fuel > 0)
                );
                
                if (availableVehicles.length > 0) {
                    vehicle = availableVehicles.reduce((fastest, current) => 
                        current.speed < fastest.speed ? current : fastest
                    );
                    travelTime = location.distance * vehicle.speed;
                    method = vehicle.name;
                }
            }

            startTravel(location, travelTime, method, vehicle);
        }

        function startTravel(location, travelTime, method, vehicle) {
            gameData.currentTravel = {
                location: location,
                timeLeft: travelTime,
                totalTime: travelTime,
                method: method,
                vehicle: vehicle
            };

            // Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ù‡ Ø³ÙØ±
            document.getElementById('travelScreen').style.display = 'flex';
            document.getElementById('travelIcon').textContent = vehicle ? vehicle.icon : 'ğŸš¶';
            document.getElementById('travelDestination').textContent = `Ù…Ù‚ØµØ¯: ${location.name}`;
            document.getElementById('travelMethod').textContent = `Ø±ÙˆØ´: ${method}`;

            // Ù…ØµØ±Ù Ø§Ù†Ø±Ú˜ÛŒ
            gameData.currentUser.energy -= 5;
            updateUserInfo();

            const travelInterval = setInterval(() => {
                if (!gameData.currentTravel) {
                    clearInterval(travelInterval);
                    return;
                }

                gameData.currentTravel.timeLeft--;
                const progress = ((gameData.currentTravel.totalTime - gameData.currentTravel.timeLeft) / gameData.currentTravel.totalTime) * 100;
                
                const minutes = Math.floor(gameData.currentTravel.timeLeft / 60);
                const seconds = gameData.currentTravel.timeLeft % 60;
                
                document.getElementById('travelTimer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                document.getElementById('travelProgress').style.width = `${progress}%`;
                
                if (gameData.currentTravel.timeLeft <= 0) {
                    clearInterval(travelInterval);
                    finishTravel();
                }
            }, 1000);
        }

        function finishTravel() {
            if (!gameData.currentTravel) return;

            const location = gameData.currentTravel.location;
            
            // Ù…ØµØ±Ù Ø³ÙˆØ®Øª
            if (gameData.currentTravel.vehicle && gameData.currentTravel.vehicle.type !== 'bicycle') {
                gameData.currentTravel.vehicle.fuel -= 1;
                
                // Ú©Ø§Ù‡Ø´ Ø³Ù„Ø§Ù…Øª Ø¨Ø§ Ø§Ø­ØªÙ…Ø§Ù„
                if (Math.random() < 0.2) {
                    gameData.currentTravel.vehicle.health -= 2;
                }
            }

            // Ø§ÙØ²Ø§ÛŒØ´ Ú¯Ø±Ø³Ù†Ú¯ÛŒ
            gameData.currentUser.hunger += 10;
            if (gameData.currentUser.hunger > 100) gameData.currentUser.hunger = 100;

            document.getElementById('travelScreen').style.display = 'none';
            
            // Ù†Ù…Ø§ÛŒØ´ Ø§Ù‚Ø¯Ø§Ù…Ø§Øª Ù…Ù…Ú©Ù† Ø¯Ø± Ù…Ú©Ø§Ù† Ù…Ù‚ØµØ¯
            showLocationActions(location);
            
            gameData.currentTravel = null;
            saveGameData();
            updateUserInfo();
        }

        function showLocationActions(location) {
            let actionsHTML = `
                <h3 style="color: var(--neon); text-align: center; margin-bottom: 12px; font-size: 1.1em;">
                    ${location.icon} ${location.name}
                </h3>
                <div style="color: white; margin-bottom: 15px; font-size: 0.9em;">
                    Ø¨Ù‡ ${location.name} Ø±Ø³ÛŒØ¯ÛŒØ¯. Ú†Ù‡ Ú©Ø§Ø±ÛŒ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒØ¯ØŸ
                </div>
            `;

            location.actions.forEach(action => {
                actionsHTML += `
                    <button class="btn" onclick="performAction('${location.id}', '${action}')" 
                            style="margin: 4px 0; width: 100%; padding: 10px; font-size: 0.9em;">
                        ${action}
                    </button>
                `;
            });

            actionsHTML += `
                <button class="btn btn-danger" onclick="closeModal()" style="margin-top: 8px; padding: 10px;">
                    Ø¨Ø³ØªÙ†
                </button>
            `;

            showModal(actionsHTML);
        }

        function performAction(locationId, action) {
            const location = gameData.locations.find(l => l.id === locationId);
            
            switch(action) {
                case 'ØºØ°Ø§ Ø®ÙˆØ±Ø¯Ù†':
                    if (location.cost && gameData.currentUser.coins >= location.cost) {
                        gameData.currentUser.coins -= location.cost;
                        gameData.currentUser.hunger = Math.max(0, gameData.currentUser.hunger - 30);
                        gameData.currentUser.energy = Math.min(100, gameData.currentUser.energy + 10);
                        showNotification('ğŸ• ØºØ°Ø§ Ø®ÙˆØ±Ø¯ÛŒØ¯ Ùˆ Ú¯Ø±Ø³Ù†Ú¯ÛŒ Ú©Ø§Ù‡Ø´ ÛŒØ§ÙØª', 'success');
                    } else {
                        showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ ØºØ°Ø§ Ø®ÙˆØ±Ø¯Ù† Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
                    }
                    break;
                    
                case 'Ù†ÙˆØ´ÛŒØ¯Ù†ÛŒ':
                    if (location.cost && gameData.currentUser.coins >= location.cost) {
                        gameData.currentUser.coins -= location.cost;
                        gameData.currentUser.energy = Math.min(100, gameData.currentUser.energy + 15);
                        showNotification('â˜• Ù†ÙˆØ´ÛŒØ¯Ù†ÛŒ Ø®ÙˆØ±Ø¯ÛŒØ¯ Ùˆ Ø§Ù†Ø±Ú˜ÛŒ Ø§ÙØ²Ø§ÛŒØ´ ÛŒØ§ÙØª', 'success');
                    } else {
                        showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ù†ÙˆØ´ÛŒØ¯Ù†ÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
                    }
                    break;
                    
                case 'Ø¯Ø±Ù…Ø§Ù†':
                    if (location.cost && gameData.currentUser.coins >= location.cost) {
                        gameData.currentUser.coins -= location.cost;
                        gameData.currentUser.health = 100;
                        showNotification('ğŸ¥ Ø¯Ø±Ù…Ø§Ù† Ø´Ø¯ÛŒØ¯ Ùˆ Ø³Ù„Ø§Ù…Øª Ø´Ù…Ø§ Ú©Ø§Ù…Ù„ Ø´Ø¯', 'success');
                    } else {
                        showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø¯Ø±Ù…Ø§Ù† Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
                    }
                    break;
                    
                case 'Ø³ÙˆØ®Øª Ú¯ÛŒØ±ÛŒ':
                    if (location.cost && gameData.currentUser.coins >= location.cost) {
                        const vehicle = gameData.currentUser.vehicles.find(v => v.type !== 'bicycle');
                        if (vehicle) {
                            gameData.currentUser.coins -= location.cost;
                            vehicle.fuel = vehicle.type === 'supercar' ? 100 : 50;
                            showNotification('â›½ Ø¨Ø§Ú© ÙˆØ³ÛŒÙ„Ù‡ Ù†Ù‚Ù„ÛŒÙ‡ Ù¾Ø± Ø´Ø¯', 'success');
                        } else {
                            showNotification('ÙˆØ³ÛŒÙ„Ù‡ Ù†Ù‚Ù„ÛŒÙ‡ Ø¨Ù†Ø²ÛŒÙ†ÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
                        }
                    } else {
                        showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø³ÙˆØ®Øª Ú¯ÛŒØ±ÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
                    }
                    break;
                    
                case 'Ø®Ø±ÛŒØ¯ ÙˆØ³ÛŒÙ„Ù‡ Ù†Ù‚Ù„ÛŒÙ‡':
                    closeModal();
                    openApp('transport');
                    break;
                    
                case 'ØªØ¹Ù…ÛŒØ± ÙˆØ³ÛŒÙ„Ù‡ Ù†Ù‚Ù„ÛŒÙ‡':
                    closeModal();
                    openApp('repair');
                    break;
                    
                case 'Ø®Ø¯Ù…Ø§Øª Ø¨Ø§Ù†Ú©ÛŒ':
                    closeModal();
                    openApp('bank');
                    break;
                    
                case 'Ø¢Ù…ÙˆØ²Ø´ Ø±Ø§Ù†Ù†Ø¯Ú¯ÛŒ':
                    closeModal();
                    openApp('education');
                    break;

                case 'Ø®Ø±ÛŒØ¯ Ú©ØªØ§Ø¨':
                    closeModal();
                    openApp('library');
                    break;

                case 'Ø®Ø±ÛŒØ¯ Ø¯Ø§Ø±Ùˆ':
                    closeModal();
                    openApp('pharmacy');
                    break;

                case 'Ø®Ø±ÛŒØ¯ Ùˆ ÙØ±ÙˆØ´ Ù…Ù„Ú©':
                    closeModal();
                    openApp('realestate');
                    break;

                case 'Ø®Ø±ÛŒØ¯ Ø¢Ù†Ù„Ø§ÛŒÙ†':
                    closeModal();
                    openApp('onlineshop');
                    break;

                case 'Ø®Ø±ÛŒØ¯ Ø¨Ø³ØªÙ‡ Ø§ÛŒÙ†ØªØ±Ù†Øª':
                    closeModal();
                    openApp('internet');
                    break;

                case 'Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆÚ©ÛŒÙ„':
                    closeModal();
                    openApp('lawyer');
                    break;

                case 'Ù¾Ø±Ø¯Ø§Ø®Øª Ù‚Ø¨ÙˆØ¶':
                    closeModal();
                    openApp('municipality');
                    break;

                case 'Ø®Ø±ÛŒØ¯ Ùˆ ÙØ±ÙˆØ´ Ø³Ù‡Ø§Ù…':
                    closeModal();
                    openApp('stock');
                    break;

                case 'Ø®Ø±ÛŒØ¯ Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ':
                    closeModal();
                    openApp('supermarket');
                    break;

                case 'Ø¢Ù…ÙˆØ²Ø´ ØªØ®ØµØµÛŒ':
                    closeModal();
                    openApp('training');
                    break;

                case 'ØªÙØ±ÛŒØ­':
                    if (gameData.currentUser.coins >= 200) {
                        gameData.currentUser.coins -= 200;
                        gameData.currentUser.energy = Math.min(100, gameData.currentUser.energy + 20);
                        gameData.currentUser.health = Math.min(100, gameData.currentUser.health + 10);
                        showNotification('ğŸ¡ ØªÙØ±ÛŒØ­ Ú©Ø±Ø¯ÛŒØ¯ Ùˆ Ø§Ù†Ø±Ú˜ÛŒ Ùˆ Ø³Ù„Ø§Ù…Øª Ø§ÙØ²Ø§ÛŒØ´ ÛŒØ§ÙØª', 'success');
                    } else {
                        showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ ØªÙØ±ÛŒØ­ Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
                    }
                    break;

                case 'ØªÙ…Ø§Ø´Ø§ÛŒ ÙÛŒÙ„Ù…':
                    if (gameData.currentUser.coins >= 300) {
                        gameData.currentUser.coins -= 300;
                        gameData.currentUser.energy = Math.min(100, gameData.currentUser.energy + 15);
                        showNotification('ğŸ¬ ÙÛŒÙ„Ù… ØªÙ…Ø§Ø´Ø§ Ú©Ø±Ø¯ÛŒØ¯ Ùˆ Ø§Ù†Ø±Ú˜ÛŒ Ø§ÙØ²Ø§ÛŒØ´ ÛŒØ§ÙØª', 'success');
                    } else {
                        showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ ØªÙ…Ø§Ø´Ø§ÛŒ ÙÛŒÙ„Ù… Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
                    }
                    break;

                case 'ÙˆØ±Ø²Ø´':
                    if (gameData.currentUser.coins >= 150) {
                        gameData.currentUser.coins -= 150;
                        gameData.currentUser.health = Math.min(100, gameData.currentUser.health + 15);
                        gameData.currentUser.energy = Math.max(0, gameData.currentUser.energy - 10);
                        showNotification('âš½ ÙˆØ±Ø²Ø´ Ú©Ø±Ø¯ÛŒØ¯ Ùˆ Ø³Ù„Ø§Ù…Øª Ø§ÙØ²Ø§ÛŒØ´ ÛŒØ§ÙØª', 'success');
                    } else {
                        showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ ÙˆØ±Ø²Ø´ Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
                    }
                    break;
                    
                case 'Ú©Ø§Ø± Ø¯Ø± Ù…Ø¯Ø±Ø³Ù‡':
                case 'Ú©Ø§Ø± Ø¯Ø± Ø±Ø³ØªÙˆØ±Ø§Ù†':
                case 'Ú©Ø§Ø± Ø¯Ø± Ú©Ø§ÙÙ‡':
                case 'Ú©Ø§Ø± Ø¯Ø± Ø³ÙˆÙ¾Ø±Ù…Ø§Ø±Ú©Øª':
                case 'Ú©Ø§Ø± Ø¯Ø± Ø¨Ø§Ù†Ú©':
                case 'Ú©Ø§Ø± Ø¯Ø± Ù¾Ù…Ù¾ Ø¨Ù†Ø²ÛŒÙ†':
                case 'Ú©Ø§Ø± Ø¯Ø± ØªØ¹Ù…ÛŒØ±Ú¯Ø§Ù‡':
                case 'Ú©Ø§Ø± Ø¯Ø± Ù…Ø±Ú©Ø² Ø®Ø±ÛŒØ¯':
                case 'Ú©Ø§Ø± Ø¯Ø± Ø¨ÛŒÙ…Ø§Ø±Ø³ØªØ§Ù†':
                case 'Ú©Ø§Ø± Ø¯Ø± Ù¾Ø§Ø±Ú©':
                case 'Ú©Ø§Ø± Ø¯Ø± Ø³ÛŒÙ†Ù…Ø§':
                case 'Ú©Ø§Ø± Ø¯Ø± Ø§Ø³ØªØ§Ø¯ÛŒÙˆÙ…':
                    closeModal();
                    openApp('jobs');
                    break;
                    
                default:
                    showNotification('Ø§ÛŒÙ† Ø¹Ù…Ù„ Ù‡Ù†ÙˆØ² Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª', 'warning');
            }
            
            closeModal();
            saveGameData();
            updateUserInfo();
        }

        function cancelTravel() {
            if (!gameData.currentTravel) return;
            
            document.getElementById('travelScreen').style.display = 'none';
            gameData.currentTravel = null;
            showNotification('Ø³ÙØ± Ù„ØºÙˆ Ø´Ø¯!', 'warning');
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ø´ØºÙ„â€ŒÙ‡Ø§ ====================
        function loadJobs() {
            const jobsContainer = document.getElementById('jobsContainer');
            jobsContainer.innerHTML = '';
            
            gameData.jobs.forEach(job => {
                const hasRequirements = job.requirement.every(req => 
                    gameData.currentUser.certificates.some(cert => cert.name === req)
                );
                
                const isWorking = gameData.currentUser.activeJobs.some(j => j.id === job.id);
                const cooldown = gameData.currentUser.jobCooldowns[job.id] || 0;
                const canWork = hasRequirements && !isWorking && cooldown <= 0 && gameData.currentUser.energy >= job.energyCost;
                
                const jobCard = document.createElement('div');
                jobCard.className = `job-card ${isWorking ? 'working' : ''} ${cooldown > 0 ? 'cooldown' : ''} ${!hasRequirements ? 'disabled' : ''}`;
                jobCard.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: start;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="font-size: 1.8em;">${job.icon}</div>
                            <div>
                                <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${job.name}</h3>
                                <div style="color: #ccc; font-size: 0.8em;">
                                    Ø¯Ø³ØªÙ…Ø²Ø¯: ${job.salary} Ø³Ú©Ù‡
                                </div>
                                <div style="color: #ccc; font-size: 0.75em;">
                                    Ø§Ù†Ø±Ú˜ÛŒ: ${job.energyCost}% â€¢ Ø²Ù…Ø§Ù†: ${job.timeRequired} Ø¯Ù‚ÛŒÙ‚Ù‡
                                </div>
                                <div style="color: #ccc; font-size: 0.7em;">
                                    Ù†ÙˆØ¹: ${job.workType === 'part-time' ? 'Ù¾Ø§Ø±Ù‡â€ŒÙˆÙ‚Øª' : job.workType === 'full-time' ? 'ØªÙ…Ø§Ù…â€ŒÙˆÙ‚Øª' : 'Ø²Ù†Ø¯Ø§Ù†'}
                                </div>
                                ${job.requirement.length > 0 ? 
                                    `<div style="color: var(--warning); font-size: 0.7em;">
                                        Ù†ÛŒØ§Ø²Ù…Ù†Ø¯: ${job.requirement.join(', ')}
                                    </div>` : ''
                                }
                                ${cooldown > 0 ? 
                                    `<div style="color: var(--danger); font-size: 0.7em;">
                                        Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡: ${cooldown} Ø¯Ù‚ÛŒÙ‚Ù‡
                                    </div>` : ''
                                }
                                ${isWorking ? 
                                    `<div style="color: var(--neon); font-size: 0.7em;">
                                        Ø¯Ø± Ø­Ø§Ù„ Ú©Ø§Ø±...
                                    </div>` : ''
                                }
                            </div>
                        </div>
                        <div>
                            ${canWork ? 
                                `<button class="btn" onclick="startJob(${job.id})" style="padding: 6px 12px; font-size: 0.8em;">
                                    Ø´Ø±ÙˆØ¹ Ú©Ø§Ø±
                                </button>` :
                                `<button class="btn" disabled style="padding: 6px 12px; font-size: 0.8em; opacity: 0.5;">
                                    ${!hasRequirements ? 'Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ÛŒ' : isWorking ? 'Ø¯Ø± Ø­Ø§Ù„ Ú©Ø§Ø±' : cooldown > 0 ? 'Ø§Ø³ØªØ±Ø§Ø­Øª' : 'Ø§Ù†Ø±Ú˜ÛŒ Ú©Ù…'}
                                </button>`
                            }
                        </div>
                    </div>
                `;
                jobsContainer.appendChild(jobCard);
            });
        }

        function startJob(jobId) {
            const job = gameData.jobs.find(j => j.id === jobId);
            if (!job) return;

            if (gameData.currentUser.energy < job.energyCost) {
                showNotification('Ø§Ù†Ø±Ú˜ÛŒ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø± Ú©Ø±Ø¯Ù† Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
                return;
            }

            gameData.currentUser.activeJobs.push({...job, startTime: Date.now()});
            gameData.currentUser.energy -= job.energyCost;

            showNotification(`ğŸ’¼ Ú©Ø§Ø± Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† ${job.name} Ø´Ø±ÙˆØ¹ Ø´Ø¯`, 'success');

            setTimeout(() => {
                finishJob(jobId);
            }, job.timeRequired * 1000);

            saveGameData();
            updateUserInfo();
            loadJobs();
        }

        function finishJob(jobId) {
            const jobIndex = gameData.currentUser.activeJobs.findIndex(j => j.id === jobId);
            if (jobIndex === -1) return;

            const job = gameData.currentUser.activeJobs[jobIndex];
            gameData.currentUser.activeJobs.splice(jobIndex, 1);
            
            // Ø¯Ø±ÛŒØ§ÙØª Ø­Ù‚ÙˆÙ‚
            gameData.currentUser.coins += job.salary;
            gameData.currentUser.bankBalance += job.salary;
            
            // Ø§ÙØ²Ø§ÛŒØ´ Ù…Ù‡Ø§Ø±Øª
            if (gameData.currentUser.skills[job.type]) {
                gameData.currentUser.skills[job.type] += 1;
            }
            
            // Ú©ÙˆÙ„Ø¯Ø§ÙˆÙ†
            gameData.currentUser.jobCooldowns[job.id] = job.cooldown;
            
            // Ú©Ø§Ù‡Ø´ Ú©ÙˆÙ„Ø¯Ø§ÙˆÙ† Ø¨Ù‡ Ù…Ø±ÙˆØ± Ø²Ù…Ø§Ù†
            const cooldownInterval = setInterval(() => {
                if (gameData.currentUser.jobCooldowns[job.id] > 0) {
                    gameData.currentUser.jobCooldowns[job.id]--;
                } else {
                    clearInterval(cooldownInterval);
                }
            }, 60000);

            gameData.currentUser.transactions.push({
                description: `Ø­Ù‚ÙˆÙ‚ ${job.name}`,
                amount: job.salary,
                time: new Date().toLocaleTimeString('fa-IR')
            });

            showNotification(`ğŸ’° Ù…Ø¨Ù„Øº ${job.salary} Ø³Ú©Ù‡ Ø¨Ø§Ø¨Øª Ú©Ø§Ø± Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† ${job.name} Ø¯Ø±ÛŒØ§ÙØª Ú©Ø±Ø¯ÛŒØ¯`, 'success');
            saveGameData();
            updateUserInfo();
            loadJobs();
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ø¨Ø§Ù†Ú© Ùˆ ÙˆØ§Ù… ====================
        function loadBank() {
            document.getElementById('bankBalance').textContent = 
                gameData.currentUser.bankBalance.toLocaleString();
            
            // Ù†Ù…Ø§ÛŒØ´ ÙˆØ§Ù…â€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„
            const activeLoans = document.getElementById('activeLoans');
            if (gameData.currentUser.loans.length === 0) {
                activeLoans.innerHTML = '<div style="text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">ÙˆØ§Ù… ÙØ¹Ø§Ù„ÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯</div>';
            } else {
                activeLoans.innerHTML = gameData.currentUser.loans.map(loan => `
                    <div class="transaction-item">
                        <div>
                            <div style="font-size: 0.9em;">ÙˆØ§Ù… ${loan.amount.toLocaleString()} Ø³Ú©Ù‡</div>
                            <div style="font-size: 0.7em; color: #ccc;">
                                Ø±ÙˆØ²Ù‡Ø§ÛŒ Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡: ${loan.daysLeft}
                            </div>
                        </div>
                        <div style="color: var(--warning); font-size: 0.9em;">
                            ${loan.totalAmount.toLocaleString()} ğŸª™
                        </div>
                    </div>
                `).join('');
            }
            
            // Ù†Ù…Ø§ÛŒØ´ ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§
            const transactionsList = document.getElementById('transactionsList');
            transactionsList.innerHTML = gameData.currentUser.transactions.length === 0 ?
                '<div style="text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">ØªØ±Ø§Ú©Ù†Ø´ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</div>' :
                gameData.currentUser.transactions.slice(-10).reverse().map(transaction => `
                    <div class="transaction-item">
                        <div style="font-size: 0.8em;">${transaction.description}</div>
                        <div style="color: ${transaction.amount >= 0 ? 'var(--neon)' : 'var(--danger)'}; font-size: 0.9em;">
                            ${transaction.amount >= 0 ? '+' : ''}${transaction.amount} ğŸª™
                        </div>
                    </div>
                `).join('');
        }

        function showLoanModal() {
            let modalContent = `
                <h3 style="color: var(--neon); text-align: center; margin-bottom: 12px; font-size: 1.1em;">ğŸ’° Ø¯Ø±ÛŒØ§ÙØª ÙˆØ§Ù…</h3>
                <div style="color: #ccc; margin-bottom: 15px; font-size: 0.9em;">
                    Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ Ú†Ù‡ Ù…Ù‚Ø¯Ø§Ø± ÙˆØ§Ù… Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯:
                </div>
            `;
            
            gameData.loanOptions.forEach(loan => {
                const totalAmount = loan.amount + (loan.amount * loan.interest / 100);
                modalContent += `
                    <div class="repair-option" onclick="takeLoan(${loan.amount}, ${loan.interest}, ${loan.duration})">
                        <div style="display: flex; justify-content: space-between;">
                            <div>
                                <strong style="color: white; font-size: 0.9em;">${loan.amount.toLocaleString()} Ø³Ú©Ù‡</strong>
                                <div style="font-size: 0.75em; color: #ccc;">
                                    Ø³ÙˆØ¯: ${loan.interest}% â€¢ Ù…Ø¯Øª: ${loan.duration} Ø±ÙˆØ²
                                </div>
                            </div>
                            <div style="color: var(--warning); font-weight: bold; font-size: 0.9em;">
                                ${totalAmount.toLocaleString()} ğŸª™
                            </div>
                        </div>
                    </div>
                `;
            });
            
            modalContent += `
                <button class="btn btn-danger" onclick="closeModal()" style="margin-top: 12px; width: 100%; padding: 10px;">
                    Ø§Ù†ØµØ±Ø§Ù
                </button>
            `;
            
            showModal(modalContent);
        }

        function takeLoan(amount, interest, duration) {
            const totalAmount = amount + (amount * interest / 100);
            
            const newLoan = {
                id: Date.now(),
                amount: amount,
                interest: interest,
                totalAmount: totalAmount,
                daysLeft: duration,
                takenAt: new Date().toLocaleDateString('fa-IR')
            };
            
            gameData.currentUser.loans.push(newLoan);
            gameData.currentUser.coins += amount;
            gameData.currentUser.bankBalance += amount;
            
            gameData.currentUser.transactions.push({
                description: `Ø¯Ø±ÛŒØ§ÙØª ÙˆØ§Ù… ${amount.toLocaleString()} Ø³Ú©Ù‡`,
                amount: amount,
                time: new Date().toLocaleTimeString('fa-IR')
            });
            
            showNotification(`ğŸ’° ÙˆØ§Ù… ${amount.toLocaleString()} Ø³Ú©Ù‡ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯`, 'success');
            closeModal();
            saveGameData();
            updateUserInfo();
            loadBank();
        }

        function payLoan() {
            if (gameData.currentUser.loans.length === 0) {
                showNotification('ÙˆØ§Ù… ÙØ¹Ø§Ù„ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª Ù†Ø¯Ø§Ø±ÛŒØ¯', 'warning');
                return;
            }
            
            const loan = gameData.currentUser.loans[0];
            if (gameData.currentUser.coins >= loan.totalAmount) {
                gameData.currentUser.coins -= loan.totalAmount;
                gameData.currentUser.loans.shift();
                
                gameData.currentUser.transactions.push({
                    description: `Ù¾Ø±Ø¯Ø§Ø®Øª ÙˆØ§Ù… ${loan.amount.toLocaleString()} Ø³Ú©Ù‡`,
                    amount: -loan.totalAmount,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                showNotification(`âœ… ÙˆØ§Ù… ${loan.amount.toLocaleString()} Ø³Ú©Ù‡ Ù¾Ø±Ø¯Ø§Ø®Øª Ø´Ø¯`, 'success');
            } else {
                showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª ÙˆØ§Ù… Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
            }
            
            saveGameData();
            updateUserInfo();
            loadBank();
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ú†Øª ====================
        function loadChat() {
            const className = gameData.currentUser.className;
            document.getElementById('chatClassName').textContent = className;
            
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML = '';
            
            if (!gameData.classChats[className]) {
                gameData.classChats[className] = [];
            }
            
            gameData.classChats[className].forEach(msg => {
                const messageElement = document.createElement('div');
                messageElement.className = msg.user === 'Ø³ÛŒØ³ØªÙ…' ? 'message received' : 
                    msg.user.includes(gameData.currentUser.firstName) ? 'message sent' : 'message received';
                messageElement.innerHTML = `
                    <div style="font-weight: bold; margin-bottom: 4px; font-size: 0.75em;">${msg.user}</div>
                    <div style="font-size: 0.8em;">${msg.message}</div>
                    <div style="font-size: 0.65em; color: #ccc; margin-top: 4px;">${msg.time}</div>
                `;
                chatMessages.appendChild(messageElement);
            });
            
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function handleChatKeypress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const message = messageInput.value.trim();
            
            if (message) {
                const className = gameData.currentUser.className;
                const newMessage = {
                    user: `${gameData.currentUser.firstName} ${gameData.currentUser.lastName}`,
                    message: message,
                    time: new Date().toLocaleTimeString('fa-IR')
                };
                
                gameData.classChats[className].push(newMessage);
                saveGameData();
                loadChat();
                messageInput.value = '';
            }
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ú©ÙˆÙ„Ù‡ Ù¾Ø´ØªÛŒ ====================
        function loadBackpack() {
            // Ø´ØºÙ„â€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„
            const activeJobs = document.getElementById('activeJobs');
            activeJobs.innerHTML = gameData.currentUser.activeJobs.length === 0 ? 
                '<div style="grid-column: 1/-1; text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">Ø´ØºÙ„ ÙØ¹Ø§Ù„ÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯</div>' :
                gameData.currentUser.activeJobs.map(job => `
                    <div class="item-card">
                        <div class="item-icon">${job.icon}</div>
                        <div style="color: white; font-size: 0.8em;">${job.name}</div>
                        <div class="item-details">${job.salary} Ø³Ú©Ù‡</div>
                    </div>
                `).join('');
            
            // Ù…Ù„Ú©â€ŒÙ‡Ø§
            const propertyDeeds = document.getElementById('propertyDeeds');
            propertyDeeds.innerHTML = gameData.currentUser.properties.length === 0 ? 
                '<div style="grid-column: 1/-1; text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">Ù…Ù„Ú©ÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯</div>' :
                gameData.currentUser.properties.map(property => `
                    <div class="item-card">
                        <div class="item-icon">ğŸ </div>
                        <div style="color: white; font-size: 0.8em;">${property.name}</div>
                        <div class="item-details">${property.type}</div>
                    </div>
                `).join('');
            
            // ÙˆØ³Ø§ÛŒÙ„ Ù†Ù‚Ù„ÛŒÙ‡
            const vehiclesList = document.getElementById('vehiclesList');
            vehiclesList.innerHTML = gameData.currentUser.vehicles.length === 0 ?
                '<div style="grid-column: 1/-1; text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">ÙˆØ³ÛŒÙ„Ù‡ Ù†Ù‚Ù„ÛŒÙ‡ Ù†Ø¯Ø§Ø±ÛŒØ¯</div>' :
                gameData.currentUser.vehicles.map(vehicle => `
                    <div class="item-card">
                        <div class="item-icon">${getVehicleIcon(vehicle.type)}</div>
                        <div style="color: white; font-size: 0.8em;">${vehicle.name}</div>
                        <div class="item-details">Ø³ÙˆØ®Øª: ${vehicle.fuel}L</div>
                    </div>
                `).join('');
            
            // Ù…Ø¯Ø§Ø±Ú©
            const certificatesList = document.getElementById('certificatesList');
            certificatesList.innerHTML = gameData.currentUser.certificates.length === 0 ?
                '<div style="grid-column: 1/-1; text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡ Ù†Ø¯Ø§Ø±ÛŒØ¯</div>' :
                gameData.currentUser.certificates.map(cert => `
                    <div class="item-card">
                        <div class="item-icon">ğŸ“„</div>
                        <div style="color: white; font-size: 0.8em;">${cert.name}</div>
                        <div class="item-details">${cert.type}</div>
                    </div>
                `).join('');

            // Ú©ØªØ§Ø¨â€ŒÙ‡Ø§
            const booksList = document.getElementById('booksList');
            booksList.innerHTML = gameData.currentUser.books.length === 0 ?
                '<div style="grid-column: 1/-1; text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">Ú©ØªØ§Ø¨ÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯</div>' :
                gameData.currentUser.books.map(book => `
                    <div class="item-card">
                        <div class="item-icon">ğŸ“š</div>
                        <div style="color: white; font-size: 0.8em;">${book.name}</div>
                        <div class="item-details">Ù‡ÙˆØ´ +${book.intelligenceBoost}</div>
                    </div>
                `).join('');

            // Ø¯Ø§Ø±ÙˆÙ‡Ø§
            const medicinesList = document.getElementById('medicinesList');
            medicinesList.innerHTML = gameData.currentUser.medicines.length === 0 ?
                '<div style="grid-column: 1/-1; text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">Ø¯Ø§Ø±ÙˆÛŒÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯</div>' :
                gameData.currentUser.medicines.map(medicine => `
                    <div class="item-card">
                        <div class="item-icon">ğŸ’Š</div>
                        <div style="color: white; font-size: 0.8em;">${medicine.name}</div>
                        <div class="item-details">${medicine.type === 'intelligence' ? 'Ù‡ÙˆØ´' : 'Ø§Ù†Ø±Ú˜ÛŒ'} +${medicine.intelligenceBoost || medicine.energyBoost}</div>
                    </div>
                `).join('');

            // Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ
            const foodItemsList = document.getElementById('foodItemsList');
            foodItemsList.innerHTML = gameData.currentUser.foodItems.length === 0 ?
                '<div style="grid-column: 1/-1; text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯</div>' :
                gameData.currentUser.foodItems.map(food => `
                    <div class="item-card">
                        <div class="item-icon">ğŸ</div>
                        <div style="color: white; font-size: 0.8em;">${food.name}</div>
                        <div class="item-details">Ú¯Ø±Ø³Ù†Ú¯ÛŒ -${food.hungerReduction}</div>
                    </div>
                `).join('');
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ø­Ù…Ù„ Ù†Ù‚Ù„ ====================
        function loadTransport() {
            const vehiclesContainer = document.getElementById('vehiclesContainer');
            vehiclesContainer.innerHTML = '';
            
            gameData.vehicles.forEach(vehicle => {
                const isOwned = gameData.currentUser.vehicles.some(v => v.id === vehicle.id);
                const ownedCount = gameData.currentUser.vehicles.filter(v => v.id === vehicle.id).length;
                
                const vehicleCard = document.createElement('div');
                vehicleCard.className = `vehicle-card ${isOwned ? 'owned' : ''}`;
                vehicleCard.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="font-size: 1.8em;">${vehicle.icon}</div>
                            <div>
                                <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${vehicle.name}</h3>
                                <div style="color: #ccc; font-size: 0.8em;">
                                    Ø³Ø±Ø¹Øª: ${vehicle.speed} Ø«Ø§Ù†ÛŒÙ‡/ÙˆØ§Ø­Ø¯
                                    ${vehicle.type !== 'bicycle' ? `â€¢ Ù…ØµØ±Ù Ø³ÙˆØ®Øª: ${vehicle.fuelConsumption}L` : ''}
                                </div>
                                ${isOwned ? 
                                    `<div style="color: var(--neon); font-size: 0.7em; margin-top: 4px;">
                                        âœ… Ù…Ø§Ù„ Ø´Ù…Ø§ (${ownedCount} Ø¹Ø¯Ø¯)
                                    </div>` : ''
                                }
                            </div>
                        </div>
                        <div>
                            ${isOwned ? 
                                `<button class="btn" onclick="buyVehicle(${vehicle.id})" style="padding: 6px 12px; font-size: 0.8em;">
                                    Ø®Ø±ÛŒØ¯ Ù…Ø¬Ø¯Ø¯
                                 </button>` :
                                `<div style="color: var(--warning); font-weight: bold; margin-bottom: 8px; font-size: 0.9em;">
                                    ${vehicle.price.toLocaleString()} ğŸª™
                                 </div>
                                 <button class="btn" onclick="buyVehicle(${vehicle.id})" style="padding: 6px 12px; font-size: 0.8em;">
                                    Ø®Ø±ÛŒØ¯
                                 </button>`
                            }
                        </div>
                    </div>
                `;
                vehiclesContainer.appendChild(vehicleCard);
            });
        }

        function buyVehicle(vehicleId) {
            const vehicle = gameData.vehicles.find(v => v.id === vehicleId);
            if (!vehicle) return;
            
            if (gameData.currentUser.coins >= vehicle.price) {
                gameData.currentUser.coins -= vehicle.price;
                gameData.currentUser.vehicles.push({...vehicle});
                
                gameData.currentUser.transactions.push({
                    description: `Ø®Ø±ÛŒØ¯ ${vehicle.name}`,
                    amount: -vehicle.price,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                saveGameData();
                updateUserInfo();
                loadTransport();
                showNotification(`âœ… Ø®Ø±ÛŒØ¯ ${vehicle.name} Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯!`, 'success');
            } else {
                showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø®Ø±ÛŒØ¯ Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
            }
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ø¢Ù…ÙˆØ²Ø´ ====================
        function loadEducation() {
            const educationCourses = document.getElementById('educationCourses');
            const licenseOptions = document.getElementById('licenseOptions');
            
            // Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ ØªØ­ØµÛŒÙ„ÛŒ
            educationCourses.innerHTML = gameData.educationClasses.map(course => {
                const hasRequirements = course.requirement.every(req => 
                    gameData.currentUser.certificates.some(cert => cert.name === req)
                );
                const isActive = gameData.currentUser.activeCourses.some(c => c.id === course.id);
                const isCompleted = gameData.currentUser.certificates.some(cert => cert.name === course.name);
                const canEnroll = hasRequirements && !isActive && !isCompleted && 
                                 gameData.currentUser.intelligence >= course.intelligenceRequired;
                
                return `
                    <div class="course-card ${isActive ? 'active' : ''} ${isCompleted ? 'completed' : ''}">
                        <div style="display: flex; justify-content: space-between; align-items: start;">
                            <div>
                                <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${course.name}</h3>
                                <div style="color: #ccc; font-size: 0.8em;">
                                    Ø²Ù…Ø§Ù† Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²: ${course.timeRequired} Ø¯Ù‚ÛŒÙ‚Ù‡
                                </div>
                                <div style="color: #ccc; font-size: 0.75em;">
                                    Ù‡ÙˆØ´ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²: ${course.intelligenceRequired}%
                                    ${course.requirement.length > 0 ? `â€¢ Ù¾ÛŒØ´ Ù†ÛŒØ§Ø²: ${course.requirement.join(', ')}` : ''}
                                </div>
                                ${isActive ? 
                                    `<div style="color: var(--neon); font-size: 0.7em; margin-top: 4px;">
                                        Ø¯Ø± Ø­Ø§Ù„ ØªØ­ØµÛŒÙ„...
                                    </div>` : ''
                                }
                                ${isCompleted ? 
                                    `<div style="color: var(--secondary); font-size: 0.7em; margin-top: 4px;">
                                        âœ… ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡
                                    </div>` : ''
                                }
                            </div>
                            <div>
                                ${!isCompleted ? 
                                    `<button class="btn" onclick="startCourse(${course.id})" 
                                             ${!canEnroll ? 'disabled style="opacity: 0.5;"' : ''}
                                             style="padding: 6px 12px; font-size: 0.8em;">
                                        ${course.price > 0 ? `${course.price} ğŸª™` : 'Ø±Ø§ÛŒÚ¯Ø§Ù†'}
                                    </button>` :
                                    `<button class="btn" disabled style="padding: 6px 12px; font-size: 0.8em; opacity: 0.5;">
                                        ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡
                                    </button>`
                                }
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            // Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡â€ŒÙ‡Ø§
            licenseOptions.innerHTML = gameData.courses.filter(c => c.type === 'license').map(course => `
                <div class="repair-option" onclick="takeCourse(${course.id})">
                    <div style="display: flex; justify-content: space-between;">
                        <div>
                            <strong style="color: white; font-size: 0.9em;">${course.name}</strong>
                            <div style="font-size: 0.75em; color: #ccc;">
                                ${course.requirement.length > 0 ? 'Ù¾ÛŒØ´ Ù†ÛŒØ§Ø²: ' + course.requirement.join(', ') : 'Ø¨Ø¯ÙˆÙ† Ù¾ÛŒØ´ Ù†ÛŒØ§Ø²'}
                            </div>
                        </div>
                        <div style="color: var(--warning); font-weight: bold; font-size: 0.9em;">
                            ${course.price} ğŸª™
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function startCourse(courseId) {
            const course = gameData.educationClasses.find(c => c.id === courseId);
            if (!course) return;

            // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø²Ù…Ø§Ù† ÙˆØ§Ù‚Ø¹ÛŒ Ø¨Ø§ Ø¯Ø± Ù†Ø¸Ø± Ú¯Ø±ÙØªÙ† Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ Ùˆ Ù‚Ø±Øµâ€ŒÙ‡Ø§
            let actualTime = course.timeRequired;
            
            // Ú©Ø§Ù‡Ø´ Ø²Ù…Ø§Ù† Ø¨Ø± Ø§Ø³Ø§Ø³ Ú©ØªØ§Ø¨â€ŒÙ‡Ø§
            gameData.currentUser.books.forEach(book => {
                actualTime -= (actualTime * book.studyTimeReduction / 100);
            });
            
            // Ú©Ø§Ù‡Ø´ Ø²Ù…Ø§Ù† Ø¨Ø± Ø§Ø³Ø§Ø³ Ù‚Ø±Øµ Ù‡ÙˆØ´
            const activeIntelligenceMedicine = gameData.currentUser.medicines.find(m => 
                m.type === 'intelligence' && m.active
            );
            if (activeIntelligenceMedicine) {
                actualTime -= (actualTime * 0.1); // 10% Ú©Ø§Ù‡Ø´ Ø¨Ø§ Ù‚Ø±Øµ Ù‡ÙˆØ´
            }
            
            actualTime = Math.max(5, Math.floor(actualTime)); // Ø­Ø¯Ø§Ù‚Ù„ 5 Ø¯Ù‚ÛŒÙ‚Ù‡

            gameData.currentUser.activeCourses.push({
                ...course,
                startTime: Date.now(),
                actualTime: actualTime
            });

            showNotification(`ğŸ“ ${course.name} Ø´Ø±ÙˆØ¹ Ø´Ø¯ (${actualTime} Ø¯Ù‚ÛŒÙ‚Ù‡)`, 'success');

            setTimeout(() => {
                finishCourse(courseId);
            }, actualTime * 1000);

            saveGameData();
            loadEducation();
        }

        function finishCourse(courseId) {
            const courseIndex = gameData.currentUser.activeCourses.findIndex(c => c.id === courseId);
            if (courseIndex === -1) return;

            const course = gameData.currentUser.activeCourses[courseIndex];
            gameData.currentUser.activeCourses.splice(courseIndex, 1);
            
            // Ø¯Ø±ÛŒØ§ÙØª Ù…Ø¯Ø±Ú©
            gameData.currentUser.certificates.push({
                id: Date.now(),
                name: course.name,
                type: 'education',
                issueDate: new Date().toLocaleDateString('fa-IR')
            });
            
            // Ø§ÙØ²Ø§ÛŒØ´ Ù‡ÙˆØ´
            gameData.currentUser.intelligence = Math.min(100, gameData.currentUser.intelligence + 10);

            showNotification(`ğŸ“ ${course.name} Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³ÛŒØ¯! Ù‡ÙˆØ´ Ø´Ù…Ø§ Ø§ÙØ²Ø§ÛŒØ´ ÛŒØ§ÙØª`, 'success');
            saveGameData();
            updateUserInfo();
            loadEducation();
        }

        function takeCourse(courseId) {
            const course = gameData.courses.find(c => c.id === courseId);
            if (!course) return;
            
            // Ø¨Ø±Ø±Ø³ÛŒ Ù¾ÛŒØ´ Ù†ÛŒØ§Ø²Ù‡Ø§
            if (course.requirement.length > 0) {
                const hasRequirements = course.requirement.every(req => 
                    gameData.currentUser.certificates.some(cert => cert.name === req)
                );
                
                if (!hasRequirements) {
                    showNotification(`Ø¨Ø±Ø§ÛŒ Ú¯Ø°Ø±Ø§Ù†Ø¯Ù† Ø§ÛŒÙ† Ø¯ÙˆØ±Ù‡ Ù†ÛŒØ§Ø² Ø¨Ù‡ ${course.requirement.join(' Ùˆ ')} Ø¯Ø§Ø±ÛŒØ¯!`, 'error');
                    return;
                }
            }
            
            if (gameData.currentUser.coins >= course.price) {
                gameData.currentUser.coins -= course.price;
                gameData.currentUser.certificates.push({
                    id: Date.now(),
                    name: course.name,
                    type: course.type,
                    issueDate: new Date().toLocaleDateString('fa-IR')
                });
                
                gameData.currentUser.transactions.push({
                    description: `Ø«Ø¨Øª Ù†Ø§Ù… Ø¯Ø± ${course.name}`,
                    amount: -course.price,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                saveGameData();
                updateUserInfo();
                loadEducation();
                showNotification(`ğŸ“ Ø«Ø¨Øª Ù†Ø§Ù… Ø¯Ø± ${course.name} Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯!`, 'success');
            } else {
                showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø«Ø¨Øª Ù†Ø§Ù… Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
            }
        }

        // ==================== Ø³ÛŒØ³ØªÙ… ØªØ¹Ù…ÛŒØ±Ú¯Ø§Ù‡ ====================
        function loadRepairShop() {
            const repairContainer = document.getElementById('repairContainer');
            repairContainer.innerHTML = '';
            
            if (gameData.currentUser.vehicles.length === 0) {
                repairContainer.innerHTML = `
                    <div style="text-align: center; padding: 30px; color: #ccc;">
                        <div style="font-size: 2.5em;">ğŸ”§</div>
                        <p style="font-size: 0.9em;">ÙˆØ³ÛŒÙ„Ù‡ Ù†Ù‚Ù„ÛŒÙ‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ ØªØ¹Ù…ÛŒØ± Ù†Ø¯Ø§Ø±ÛŒØ¯!</p>
                    </div>
                `;
                return;
            }
            
            gameData.currentUser.vehicles.forEach(vehicle => {
                const healthPercent = (vehicle.health / vehicle.maxHealth) * 100;
                const healthColor = 
                    healthPercent >= 70 ? '#10b981' :
                    healthPercent >= 40 ? '#f59e0b' : '#ef4444';
                
                const vehicleStatus = document.createElement('div');
                vehicleStatus.className = 'vehicle-status';
                vehicleStatus.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <div>
                            <div style="font-size: 1.8em;">${vehicle.icon}</div>
                            <h3 style="color: white; font-size: 0.9em;">${vehicle.name}</h3>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.1em; color: ${healthColor};">
                                ${Math.round(healthPercent)}%
                            </div>
                            <div style="font-size: 0.7em; color: #ccc;">Ø³Ù„Ø§Ù…Øª</div>
                        </div>
                    </div>
                    
                    <div class="health-bar">
                        <div class="health-fill" style="width: ${healthPercent}%"></div>
                    </div>
                    
                    <div style="margin-top: 12px;">
                        <h4 style="color: var(--neon); margin-bottom: 8px; font-size: 0.9em;">Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ¹Ù…ÛŒØ±:</h4>
                        ${gameData.repairOptions.map(option => `
                            <div class="repair-option" onclick="repairVehicle(${vehicle.id}, ${option.healthRestore}, ${option.cost})">
                                <div style="display: flex; justify-content: space-between;">
                                    <div>
                                        <strong style="color: white; font-size: 0.9em;">${option.name}</strong>
                                        <div style="font-size: 0.75em; color: #ccc;">
                                            Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ: ${option.healthRestore}% - Ø²Ù…Ø§Ù†: ${option.time} Ø¯Ù‚ÛŒÙ‚Ù‡
                                        </div>
                                    </div>
                                    <div style="color: var(--warning); font-weight: bold; font-size: 0.9em;">
                                        ${option.cost} ğŸª™
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
                repairContainer.appendChild(vehicleStatus);
            });
        }

        function repairVehicle(vehicleId, healthRestore, cost) {
            const vehicle = gameData.currentUser.vehicles.find(v => v.id === vehicleId);
            if (!vehicle) return;
            
            if (gameData.currentUser.coins >= cost) {
                gameData.currentUser.coins -= cost;
                vehicle.health = Math.min(vehicle.maxHealth, vehicle.health + healthRestore);
                
                gameData.currentUser.transactions.push({
                    description: `ØªØ¹Ù…ÛŒØ± ${vehicle.name}`,
                    amount: -cost,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                saveGameData();
                updateUserInfo();
                loadRepairShop();
                showNotification(`ğŸ”§ ØªØ¹Ù…ÛŒØ± ${vehicle.name} Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯!`, 'success');
            } else {
                showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ ØªØ¹Ù…ÛŒØ± Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
            }
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ø¨Ø§Ø²Ø§Ø± ====================
        function loadMarket() {
            const marketAds = document.getElementById('marketAds');
            marketAds.innerHTML = '';
            
            if (gameData.marketAds.length === 0) {
                marketAds.innerHTML = '<div style="text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">Ù‡ÛŒÚ† Ø¢Ú¯Ù‡ÛŒ ÙØ¹Ø§Ù„ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</div>';
                return;
            }
            
            gameData.marketAds.forEach(ad => {
                const adElement = document.createElement('div');
                adElement.className = 'market-ad';
                adElement.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;">
                        <div>
                            <h4 style="color: white; margin-bottom: 4px; font-size: 0.9em;">${ad.item}</h4>
                            <div style="color: #ccc; font-size: 0.8em;">ÙØ±ÙˆØ´Ù†Ø¯Ù‡: ${ad.user} (Ú©Ù„Ø§Ø³ ${ad.userClass})</div>
                            <div style="color: #ccc; font-size: 0.8em; margin-top: 4px;">${ad.description}</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="color: var(--warning); font-weight: bold; font-size: 1.1em;">${ad.price.toLocaleString()} ğŸª™</div>
                            <button class="btn" onclick="buyFromMarket(${ad.id})" style="padding: 6px 12px; margin-top: 8px; font-size: 0.8em;">
                                Ø®Ø±ÛŒØ¯
                            </button>
                        </div>
                    </div>
                `;
                marketAds.appendChild(adElement);
            });
        }

        function showNewAdModal() {
            const modalContent = `
                <h3 style="color: var(--neon); text-align: center; margin-bottom: 12px; font-size: 1.1em;">ğŸ“¢ Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ Ø¬Ø¯ÛŒØ¯</h3>
                <div style="margin-bottom: 12px;">
                    <label style="color: white; display: block; margin-bottom: 4px; font-size: 0.9em;">Ø¹Ù†ÙˆØ§Ù† Ø¢Ú¯Ù‡ÛŒ:</label>
                    <input type="text" id="adTitle" placeholder="Ù…Ø«Ø§Ù„: Ù…ÙˆØªÙˆØ± Ø¯Ø³Øª Ø¯ÙˆÙ…" style="width: 100%; padding: 8px; border-radius: 6px; border: 1px solid #333; background: rgba(255,255,255,0.1); color: white; font-size: 0.9em;">
                </div>
                <div style="margin-bottom: 12px;">
                    <label style="color: white; display: block; margin-bottom: 4px; font-size: 0.9em;">Ù‚ÛŒÙ…Øª (Ø³Ú©Ù‡):</label>
                    <input type="number" id="adPrice" placeholder="1000" style="width: 100%; padding: 8px; border-radius: 6px; border: 1px solid #333; background: rgba(255,255,255,0.1); color: white; font-size: 0.9em;">
                </div>
                <div style="margin-bottom: 12px;">
                    <label style="color: white; display: block; margin-bottom: 4px; font-size: 0.9em;">ØªÙˆØ¶ÛŒØ­Ø§Øª:</label>
                    <textarea id="adDescription" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ú©Ø§Ù„Ø§..." style="width: 100%; padding: 8px; border-radius: 6px; border: 1px solid #333; background: rgba(255,255,255,0.1); color: white; height: 70px; font-size: 0.9em;"></textarea>
                </div>
                <div style="margin-bottom: 12px;">
                    <label style="color: white; display: block; margin-bottom: 4px; font-size: 0.9em;">Ù‡Ø²ÛŒÙ†Ù‡ Ø¢Ú¯Ù‡ÛŒ (50 Ø³Ú©Ù‡):</label>
                    <div style="color: var(--warning); font-size: 0.9em;">50 ğŸª™</div>
                </div>
                <button class="btn" onclick="postNewAd()" style="width: 100%; padding: 10px; font-size: 0.9em;">
                    Ù¾Ø±Ø¯Ø§Ø®Øª Ùˆ Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ
                </button>
            `;
            showModal(modalContent);
        }

        function postNewAd() {
            const title = document.getElementById('adTitle').value;
            const price = parseInt(document.getElementById('adPrice').value);
            const description = document.getElementById('adDescription').value;
            
            if (!title || !price || !description) {
                showNotification('Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯', 'error');
                return;
            }

            // Ù‡Ø²ÛŒÙ†Ù‡ Ø¢Ú¯Ù‡ÛŒ
            if (gameData.currentUser.coins < 50) {
                showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª Ù‡Ø²ÛŒÙ†Ù‡ Ø¢Ú¯Ù‡ÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
                return;
            }
            
            const newAd = {
                id: Date.now(),
                user: `${gameData.currentUser.firstName} ${gameData.currentUser.lastName}`,
                userClass: gameData.currentUser.className,
                item: title,
                price: price,
                description: description,
                type: 'other'
            };
            
            gameData.currentUser.coins -= 50;
            gameData.marketAds.push(newAd);
            saveGameData();
            loadMarket();
            closeModal();
            showNotification('ğŸ“¢ Ø¢Ú¯Ù‡ÛŒ Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯! (50 Ø³Ú©Ù‡ Ù‡Ø²ÛŒÙ†Ù‡ Ú©Ø³Ø± Ø´Ø¯)', 'success');
        }

        function buyFromMarket(adId) {
            const ad = gameData.marketAds.find(a => a.id === adId);
            if (!ad) return;
            
            if (gameData.currentUser.coins >= ad.price) {
                gameData.currentUser.coins -= ad.price;
                gameData.marketAds = gameData.marketAds.filter(a => a.id !== adId);
                
                // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¨Ù‡ Ú©ÙˆÙ„Ù‡ Ù¾Ø´ØªÛŒ
                gameData.currentUser.backpack.push({
                    id: Date.now(),
                    name: ad.item,
                    type: 'purchased',
                    description: ad.description
                });
                
                gameData.currentUser.transactions.push({
                    description: `Ø®Ø±ÛŒØ¯ ${ad.item} Ø§Ø² Ø¨Ø§Ø²Ø§Ø±`,
                    amount: -ad.price,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                saveGameData();
                updateUserInfo();
                loadMarket();
                showNotification(`ğŸ›’ Ø®Ø±ÛŒØ¯ ${ad.item} Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯!`, 'success');
            } else {
                showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø®Ø±ÛŒØ¯ Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
            }
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ ====================
        function loadLibrary() {
            const libraryBooks = document.getElementById('libraryBooks');
            libraryBooks.innerHTML = gameData.books.map(book => `
                <div class="product-card" onclick="buyBook(${book.id})">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="font-size: 1.8em;">ğŸ“š</div>
                            <div>
                                <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${book.name}</h3>
                                <div style="color: #ccc; font-size: 0.8em;">
                                    Ø§ÙØ²Ø§ÛŒØ´ Ù‡ÙˆØ´: +${book.intelligenceBoost}%
                                </div>
                                <div style="color: #ccc; font-size: 0.75em;">
                                    Ú©Ø§Ù‡Ø´ Ø²Ù…Ø§Ù† ØªØ­ØµÛŒÙ„: ${book.studyTimeReduction}%
                                </div>
                            </div>
                        </div>
                        <div style="color: var(--warning); font-weight: bold; font-size: 1.1em;">
                            ${book.price} ğŸª™
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function buyBook(bookId) {
            const book = gameData.books.find(b => b.id === bookId);
            if (!book) return;
            
            if (gameData.currentUser.coins >= book.price) {
                gameData.currentUser.coins -= book.price;
                gameData.currentUser.books.push({...book});
                
                // Ø§ÙØ²Ø§ÛŒØ´ Ù‡ÙˆØ´ ÙÙˆØ±ÛŒ
                gameData.currentUser.intelligence = Math.min(100, gameData.currentUser.intelligence + book.intelligenceBoost);
                
                gameData.currentUser.transactions.push({
                    description: `Ø®Ø±ÛŒØ¯ ${book.name}`,
                    amount: -book.price,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                saveGameData();
                updateUserInfo();
                showNotification(`ğŸ“š Ø®Ø±ÛŒØ¯ ${book.name} Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯! Ù‡ÙˆØ´ Ø´Ù…Ø§ Ø§ÙØ²Ø§ÛŒØ´ ÛŒØ§ÙØª`, 'success');
            } else {
                showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø®Ø±ÛŒØ¯ Ú©ØªØ§Ø¨ Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
            }
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ø¯Ø§Ø±ÙˆØ®Ø§Ù†Ù‡ ====================
        function loadPharmacy() {
            const pharmacyItems = document.getElementById('pharmacyItems');
            pharmacyItems.innerHTML = gameData.medicines.map(medicine => `
                <div class="product-card" onclick="buyMedicine(${medicine.id})">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="font-size: 1.8em;">ğŸ’Š</div>
                            <div>
                                <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${medicine.name}</h3>
                                <div style="color: #ccc; font-size: 0.8em;">
                                    ${medicine.type === 'intelligence' ? 
                                        `Ø§ÙØ²Ø§ÛŒØ´ Ù‡ÙˆØ´: +${medicine.intelligenceBoost}% (${medicine.duration} Ø¯Ù‚ÛŒÙ‚Ù‡)` :
                                        medicine.type === 'energy' ?
                                        `Ø§ÙØ²Ø§ÛŒØ´ Ø§Ù†Ø±Ú˜ÛŒ: +${medicine.energyBoost}% (${medicine.duration} Ø¯Ù‚ÛŒÙ‚Ù‡)` :
                                        `Ø§ÙØ²Ø§ÛŒØ´ Ø³Ù„Ø§Ù…Øª: +${medicine.healthBoost}%`
                                    }
                                </div>
                            </div>
                        </div>
                        <div style="color: var(--warning); font-weight: bold; font-size: 1.1em;">
                            ${medicine.price} ğŸª™
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function buyMedicine(medicineId) {
            const medicine = gameData.medicines.find(m => m.id === medicineId);
            if (!medicine) return;
            
            if (gameData.currentUser.coins >= medicine.price) {
                gameData.currentUser.coins -= medicine.price;
                gameData.currentUser.medicines.push({...medicine, active: true});
                
                // Ø§Ø«Ø± ÙÙˆØ±ÛŒ
                if (medicine.type === 'health') {
                    gameData.currentUser.health = Math.min(100, gameData.currentUser.health + medicine.healthBoost);
                }
                
                gameData.currentUser.transactions.push({
                    description: `Ø®Ø±ÛŒØ¯ ${medicine.name}`,
                    amount: -medicine.price,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                // ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø§Ø«Ø± Ø¨Ø¹Ø¯ Ø§Ø² Ù…Ø¯Øª Ø²Ù…Ø§Ù†
                if (medicine.duration > 0) {
                    setTimeout(() => {
                        const medIndex = gameData.currentUser.medicines.findIndex(m => 
                            m.id === medicine.id && m.active
                        );
                        if (medIndex !== -1) {
                            gameData.currentUser.medicines[medIndex].active = false;
                            saveGameData();
                            showNotification(`ğŸ’Š Ø§Ø«Ø± ${medicine.name} Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³ÛŒØ¯`, 'warning');
                        }
                    }, medicine.duration * 60000);
                }
                
                saveGameData();
                updateUserInfo();
                showNotification(`ğŸ’Š Ø®Ø±ÛŒØ¯ ${medicine.name} Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯!`, 'success');
            } else {
                showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø®Ø±ÛŒØ¯ Ø¯Ø§Ø±Ùˆ Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
            }
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ø§Ù…Ù„Ø§Ú© ====================
        function loadRealEstate() {
            const propertiesForSale = document.getElementById('propertiesForSale');
            const userProperties = document.getElementById('userProperties');
            
            // Ù…Ù„Ú©â€ŒÙ‡Ø§ÛŒ Ø¨Ø±Ø§ÛŒ ÙØ±ÙˆØ´
            propertiesForSale.innerHTML = gameData.properties.map(property => {
                const isOwned = gameData.currentUser.properties.some(p => p.id === property.id);
                
                return `
                    <div class="property-card ${isOwned ? 'owned' : ''}">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="font-size: 1.8em;">ğŸ </div>
                                <div>
                                    <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${property.name}</h3>
                                    <div style="color: #ccc; font-size: 0.8em;">
                                        Ù†ÙˆØ¹: ${property.type} â€¢ ÙØ¶Ø§ÛŒ: ${property.space}
                                    </div>
                                    <div style="color: #ccc; font-size: 0.75em;">
                                        Ù‚Ø¨ÙˆØ¶ Ù…Ø§Ù‡ÛŒØ§Ù†Ù‡: ${property.bills} Ø³Ú©Ù‡
                                    </div>
                                    ${isOwned ? 
                                        `<div style="color: var(--neon); font-size: 0.7em; margin-top: 4px;">
                                            âœ… Ù…Ø§Ù„ Ø´Ù…Ø§
                                        </div>` : ''
                                    }
                                </div>
                            </div>
                            <div>
                                ${!isOwned ? 
                                    `<div style="color: var(--warning); font-weight: bold; margin-bottom: 8px; font-size: 0.9em;">
                                        ${property.price.toLocaleString()} ğŸª™
                                     </div>
                                     <button class="btn" onclick="buyProperty(${property.id})" style="padding: 6px 12px; font-size: 0.8em;">
                                        Ø®Ø±ÛŒØ¯
                                     </button>` :
                                    `<button class="btn" onclick="sellProperty(${property.id})" style="padding: 6px 12px; font-size: 0.8em;">
                                        ÙØ±ÙˆØ´
                                     </button>`
                                }
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            // Ù…Ù„Ú©â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±
            userProperties.innerHTML = gameData.currentUser.properties.length === 0 ?
                '<div style="text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">Ù…Ù„Ú©ÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯</div>' :
                gameData.currentUser.properties.map(property => `
                    <div class="property-card owned">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="font-size: 1.8em;">ğŸ </div>
                                <div>
                                    <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${property.name}</h3>
                                    <div style="color: #ccc; font-size: 0.8em;">
                                        Ù†ÙˆØ¹: ${property.type} â€¢ Ù‚Ø¨ÙˆØ¶: ${property.bills} Ø³Ú©Ù‡
                                    </div>
                                </div>
                            </div>
                            <button class="btn" onclick="sellProperty(${property.id})" style="padding: 6px 12px; font-size: 0.8em;">
                                ÙØ±ÙˆØ´
                            </button>
                        </div>
                    </div>
                `).join('');
        }

        function buyProperty(propertyId) {
            const property = gameData.properties.find(p => p.id === propertyId);
            if (!property) return;
            
            if (gameData.currentUser.coins >= property.price) {
                gameData.currentUser.coins -= property.price;
                gameData.currentUser.properties.push({...property});
                
                gameData.currentUser.transactions.push({
                    description: `Ø®Ø±ÛŒØ¯ ${property.name}`,
                    amount: -property.price,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                // ØªÙˆÙ„ÛŒØ¯ Ù‚Ø¨Ø¶ Ø¨Ø±Ø§ÛŒ Ù…Ù„Ú© Ø¬Ø¯ÛŒØ¯
                generateBills();
                
                saveGameData();
                updateUserInfo();
                loadRealEstate();
                showNotification(`ğŸ  Ø®Ø±ÛŒØ¯ ${property.name} Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯!`, 'success');
            } else {
                showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø®Ø±ÛŒØ¯ Ù…Ù„Ú© Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
            }
        }

        function sellProperty(propertyId) {
            const propertyIndex = gameData.currentUser.properties.findIndex(p => p.id === propertyId);
            if (propertyIndex === -1) return;
            
            const property = gameData.currentUser.properties[propertyIndex];
            const sellPrice = Math.floor(property.price * 0.8); // 80% Ù‚ÛŒÙ…Øª Ø®Ø±ÛŒØ¯
            
            gameData.currentUser.coins += sellPrice;
            gameData.currentUser.properties.splice(propertyIndex, 1);
            
            gameData.currentUser.transactions.push({
                description: `ÙØ±ÙˆØ´ ${property.name}`,
                amount: sellPrice,
                time: new Date().toLocaleTimeString('fa-IR')
            });
            
            saveGameData();
            updateUserInfo();
            loadRealEstate();
            showNotification(`ğŸ  ${property.name} Ø¨Ù‡ Ù…Ø¨Ù„Øº ${sellPrice} Ø³Ú©Ù‡ ÙØ±ÙˆØ®ØªÙ‡ Ø´Ø¯!`, 'success');
        }

        // ==================== Ø³ÛŒØ³ØªÙ… ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¢Ù†Ù„Ø§ÛŒÙ† ====================
        function loadOnlineShop() {
            const onlineProducts = document.getElementById('onlineProducts');
            onlineProducts.innerHTML = gameData.onlineProducts.map(product => `
                <div class="product-card" onclick="buyOnlineProduct(${product.id})">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="font-size: 1.8em;">ğŸ“¦</div>
                            <div>
                                <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${product.name}</h3>
                                <div style="color: #ccc; font-size: 0.8em;">
                                    Ø¯Ø³ØªÙ‡: ${product.category}
                                </div>
                                <div style="color: #ccc; font-size: 0.75em;">
                                    Ø²Ù…Ø§Ù† ØªØ­ÙˆÛŒÙ„: ${product.deliveryTime} Ø³Ø§Ø¹Øª
                                </div>
                            </div>
                        </div>
                        <div style="color: var(--warning); font-weight: bold; font-size: 1.1em;">
                            ${product.price.toLocaleString()} ğŸª™
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function buyOnlineProduct(productId) {
            const product = gameData.onlineProducts.find(p => p.id === productId);
            if (!product) return;
            
            if (gameData.currentUser.coins >= product.price) {
                gameData.currentUser.coins -= product.price;
                
                gameData.currentUser.transactions.push({
                    description: `Ø®Ø±ÛŒØ¯ ${product.name} Ø§Ø² ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¢Ù†Ù„Ø§ÛŒÙ†`,
                    amount: -product.price,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                // Ø´Ø±ÙˆØ¹ ÙØ±Ø¢ÛŒÙ†Ø¯ ØªØ­ÙˆÛŒÙ„
                startDelivery(product);
                
                saveGameData();
                updateUserInfo();
                showNotification(`ğŸ›’ Ø®Ø±ÛŒØ¯ ${product.name} Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯! ØªØ­ÙˆÛŒÙ„: ${product.deliveryTime} Ø³Ø§Ø¹Øª`, 'success');
            } else {
                showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø®Ø±ÛŒØ¯ Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
            }
        }

        function startDelivery(product) {
            gameData.currentDelivery = {
                product: product,
                timeLeft: product.deliveryTime * 3600, // Ø¨Ù‡ Ø«Ø§Ù†ÛŒÙ‡
                totalTime: product.deliveryTime * 3600
            };

            document.getElementById('deliveryScreen').style.display = 'flex';
            document.getElementById('deliveryItem').textContent = `Ø¯Ø± Ø­Ø§Ù„ ØªØ­ÙˆÛŒÙ„: ${product.name}`;

            const deliveryInterval = setInterval(() => {
                if (!gameData.currentDelivery) {
                    clearInterval(deliveryInterval);
                    return;
                }

                gameData.currentDelivery.timeLeft--;
                const progress = ((gameData.currentDelivery.totalTime - gameData.currentDelivery.timeLeft) / gameData.currentDelivery.totalTime) * 100;
                
                const hours = Math.floor(gameData.currentDelivery.timeLeft / 3600);
                const minutes = Math.floor((gameData.currentDelivery.timeLeft % 3600) / 60);
                const seconds = gameData.currentDelivery.timeLeft % 60;
                
                document.getElementById('deliveryTimer').textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                document.getElementById('deliveryProgress').style.width = `${progress}%`;
                
                if (gameData.currentDelivery.timeLeft <= 0) {
                    clearInterval(deliveryInterval);
                    finishDelivery();
                }
            }, 1000);
        }

        function finishDelivery() {
            if (!gameData.currentDelivery) return;

            const product = gameData.currentDelivery.product;
            
            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¨Ù‡ Ú©ÙˆÙ„Ù‡ Ù¾Ø´ØªÛŒ
            gameData.currentUser.backpack.push({
                id: Date.now(),
                name: product.name,
                type: 'online_purchase',
                category: product.category
            });

            document.getElementById('deliveryScreen').style.display = 'none';
            showNotification(`ğŸ“¦ ${product.name} ØªØ­ÙˆÛŒÙ„ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯!`, 'success');
            
            gameData.currentDelivery = null;
            saveGameData();
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ø§ÛŒÙ†ØªØ±Ù†Øª ====================
        function loadInternet() {
            const internetPackages = document.getElementById('internetPackages');
            const internetStatusInfo = document.getElementById('internetStatusInfo');
            
            // Ø¨Ø³ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙ†ØªØ±Ù†Øª
            internetPackages.innerHTML = gameData.internetPackages.map(pkg => {
                const isActive = gameData.internetPackage && gameData.internetPackage.id === pkg.id;
                
                return `
                    <div class="internet-package ${isActive ? 'active' : ''}" onclick="buyInternetPackage(${pkg.id})">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="font-size: 1.8em;">ğŸ“¡</div>
                                <div>
                                    <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${pkg.name}</h3>
                                    <div style="color: #ccc; font-size: 0.8em;">
                                        Ø­Ø¬Ù…: ${pkg.data} Ú¯ÛŒÚ¯ â€¢ Ø³Ø±Ø¹Øª: ${pkg.speed} Ù…Ú¯Ø§Ø¨ÛŒØª
                                    </div>
                                    <div style="color: #ccc; font-size: 0.75em;">
                                        Ù…Ø¯Øª: ${pkg.duration} Ø±ÙˆØ²
                                    </div>
                                    ${isActive ? 
                                        `<div style="color: var(--neon); font-size: 0.7em; margin-top: 4px;">
                                            âœ… ÙØ¹Ø§Ù„
                                        </div>` : ''
                                    }
                                </div>
                            </div>
                            <div style="color: var(--warning); font-weight: bold; font-size: 1.1em;">
                                ${pkg.price} ğŸª™
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            // ÙˆØ¶Ø¹ÛŒØª Ø§ÛŒÙ†ØªØ±Ù†Øª
            if (!gameData.internetPackage || gameData.internetDataLeft <= 0) {
                internetStatusInfo.innerHTML = `
                    <div style="text-align: center; padding: 15px; color: #ccc;">
                        <div style="font-size: 2.5em;">ğŸ“µ</div>
                        <p style="font-size: 0.9em;">Ø§ÛŒÙ†ØªØ±Ù†Øª ÙØ¹Ø§Ù„ Ù†Ø¯Ø§Ø±ÛŒØ¯!</p>
                        <p style="font-size: 0.8em; margin-top: 8px;">Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§Ù¾â€ŒÙ‡Ø§ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø®Ø±ÛŒØ¯ Ø¨Ø³ØªÙ‡ Ø§ÛŒÙ†ØªØ±Ù†Øª Ø¯Ø§Ø±ÛŒØ¯</p>
                    </div>
                `;
            } else {
                internetStatusInfo.innerHTML = `
                    <div style="text-align: center; padding: 15px; color: white;">
                        <div style="font-size: 2.5em;">ğŸ“¶</div>
                        <h3 style="color: var(--neon); margin-bottom: 8px;">${gameData.internetPackage.name}</h3>
                        <div style="font-size: 0.9em;">Ø­Ø¬Ù… Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡: ${gameData.internetDataLeft.toFixed(1)} Ú¯ÛŒÚ¯</div>
                        <div style="font-size: 0.8em; color: #ccc; margin-top: 4px;">Ø³Ø±Ø¹Øª: ${gameData.internetPackage.speed} Ù…Ú¯Ø§Ø¨ÛŒØª</div>
                        <div style="font-size: 0.8em; color: #ccc;">Ù…Ø¯Øª: ${gameData.internetPackage.duration} Ø±ÙˆØ²</div>
                    </div>
                `;
            }
        }

        function buyInternetPackage(packageId) {
            const pkg = gameData.internetPackages.find(p => p.id === packageId);
            if (!pkg) return;
            
            if (gameData.currentUser.coins >= pkg.price) {
                gameData.currentUser.coins -= pkg.price;
                gameData.internetPackage = {...pkg};
                gameData.internetDataLeft = pkg.data;
                gameData.internetExpiry = Date.now() + (pkg.duration * 24 * 60 * 60 * 1000);
                
                gameData.currentUser.transactions.push({
                    description: `Ø®Ø±ÛŒØ¯ Ø¨Ø³ØªÙ‡ Ø§ÛŒÙ†ØªØ±Ù†Øª ${pkg.name}`,
                    amount: -pkg.price,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                saveGameData();
                updateUserInfo();
                loadInternet();
                showNotification(`ğŸ“¡ Ø¨Ø³ØªÙ‡ Ø§ÛŒÙ†ØªØ±Ù†Øª ${pkg.name} Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÙØ¹Ø§Ù„ Ø´Ø¯!`, 'success');
            } else {
                showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø®Ø±ÛŒØ¯ Ø¨Ø³ØªÙ‡ Ø§ÛŒÙ†ØªØ±Ù†Øª Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
            }
        }

        // ==================== Ø³ÛŒØ³ØªÙ… ÙˆÚ©ÛŒÙ„ ====================
        function loadLawyer() {
            const lawyerServices = document.getElementById('lawyerServices');
            lawyerServices.innerHTML = gameData.lawyerServices.map(service => `
                <div class="product-card" onclick="useLawyerService(${service.id})">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="font-size: 1.8em;">âš–ï¸</div>
                            <div>
                                <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${service.name}</h3>
                                <div style="color: #ccc; font-size: 0.8em;">
                                    ${service.type === 'jail_reduction' ? 'Ú©Ø§Ù‡Ø´ 50% Ø²Ù…Ø§Ù† Ø²Ù†Ø¯Ø§Ù†' : 'Ù…Ø´Ø§ÙˆØ±Ù‡ Ø­Ù‚ÙˆÙ‚ÛŒ'}
                                </div>
                            </div>
                        </div>
                        <div style="color: var(--warning); font-weight: bold; font-size: 1.1em;">
                            ${service.price} ğŸª™
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function useLawyerService(serviceId) {
            const service = gameData.lawyerServices.find(s => s.id === serviceId);
            if (!service) return;
            
            if (gameData.currentUser.coins >= service.price) {
                gameData.currentUser.coins -= service.price;
                
                if (service.type === 'jail_reduction' && gameData.isInJail) {
                    gameData.jailTimeLeft = Math.floor(gameData.jailTimeLeft * service.reduction);
                    showNotification(`âš–ï¸ ÙˆÚ©ÛŒÙ„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø´Ø¯! Ø²Ù…Ø§Ù† Ø²Ù†Ø¯Ø§Ù† Ø´Ù…Ø§ ${service.reduction * 100}% Ú©Ø§Ù‡Ø´ ÛŒØ§ÙØª`, 'success');
                } else if (service.type === 'consultation') {
                    showNotification('âš–ï¸ Ù…Ø´Ø§ÙˆØ±Ù‡ Ø­Ù‚ÙˆÙ‚ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ú©Ø±Ø¯ÛŒØ¯', 'success');
                }
                
                gameData.currentUser.transactions.push({
                    description: `Ù‡Ø²ÛŒÙ†Ù‡ ${service.name}`,
                    amount: -service.price,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                saveGameData();
                updateUserInfo();
            } else {
                showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø®Ø¯Ù…Ø§Øª ÙˆÚ©ÛŒÙ„ Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
            }
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ø´Ù‡Ø±Ø¯Ø§Ø±ÛŒ ====================
        function loadMunicipality() {
            const userBills = document.getElementById('userBills');
            
            if (!gameData.currentUser.bills || gameData.currentUser.bills.length === 0) {
                userBills.innerHTML = '<div style="text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">Ù‚Ø¨Ø¶ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª Ù†Ø¯Ø§Ø±ÛŒØ¯</div>';
                return;
            }
            
            userBills.innerHTML = gameData.currentUser.bills.map(bill => {
                const isOverdue = bill.dueDate <= 0;
                
                return `
                    <div class="bill-item ${isOverdue ? 'overdue' : ''}">
                        <div>
                            <div style="font-size: 0.9em;">${bill.type} - ${bill.property}</div>
                            <div style="font-size: 0.7em; color: #ccc;">
                                ${isOverdue ? 'âš ï¸ Ù…Ø¹ÙˆÙ‚Ù‡' : `Ù…ÙˆØ¹Ø¯: ${bill.dueDate} Ø±ÙˆØ²`}
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="color: ${isOverdue ? 'var(--danger)' : 'var(--warning)'}; font-weight: bold; font-size: 0.9em;">
                                ${bill.amount} ğŸª™
                            </div>
                            <button class="btn" onclick="payBill(${bill.id})" style="padding: 6px 12px; font-size: 0.8em;">
                                Ù¾Ø±Ø¯Ø§Ø®Øª
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function payBill(billId) {
            const billIndex = gameData.currentUser.bills.findIndex(b => b.id === billId);
            if (billIndex === -1) return;
            
            const bill = gameData.currentUser.bills[billIndex];
            
            if (gameData.currentUser.coins >= bill.amount) {
                gameData.currentUser.coins -= bill.amount;
                gameData.currentUser.bills.splice(billIndex, 1);
                
                gameData.currentUser.transactions.push({
                    description: `Ù¾Ø±Ø¯Ø§Ø®Øª Ù‚Ø¨Ø¶ ${bill.type}`,
                    amount: -bill.amount,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                saveGameData();
                updateUserInfo();
                loadMunicipality();
                showNotification(`âœ… Ù‚Ø¨Ø¶ ${bill.type} Ù¾Ø±Ø¯Ø§Ø®Øª Ø´Ø¯!`, 'success');
            } else {
                showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª Ù‚Ø¨Ø¶ Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
            }
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ø¨ÙˆØ±Ø³ ====================
        function loadStock() {
            const stocksList = document.getElementById('stocksList');
            
            stocksList.innerHTML = gameData.stocks.map(stock => {
                const userStock = gameData.currentUser.stocks.find(s => s.id === stock.id);
                const userShares = userStock ? userStock.shares : 0;
                
                return `
                    <div class="product-card">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="font-size: 1.8em;">ğŸ“ˆ</div>
                                <div>
                                    <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${stock.name}</h3>
                                    <div style="color: #ccc; font-size: 0.8em;">
                                        Ù‚ÛŒÙ…Øª: ${stock.price} Ø³Ú©Ù‡
                                    </div>
                                    <div style="color: #ccc; font-size: 0.75em;">
                                        ${userShares > 0 ? `Ø³Ù‡Ø§Ù… Ø´Ù…Ø§: ${userShares} Ø³Ù‡Ù…` : 'Ø³Ù‡Ø§Ù…ÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯'}
                                    </div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 6px;">
                                <button class="btn" onclick="buyStock(${stock.id})" style="padding: 6px 10px; font-size: 0.7em;">
                                    Ø®Ø±ÛŒØ¯
                                </button>
                                ${userShares > 0 ? 
                                    `<button class="btn" onclick="sellStock(${stock.id})" style="padding: 6px 10px; font-size: 0.7em;">
                                        ÙØ±ÙˆØ´
                                     </button>` : ''
                                }
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function buyStock(stockId) {
            const stock = gameData.stocks.find(s => s.id === stockId);
            if (!stock) return;
            
            const sharesToBuy = 1; // Ø®Ø±ÛŒØ¯ 1 Ø³Ù‡Ù…
            const totalCost = stock.price * sharesToBuy;
            
            if (gameData.currentUser.coins >= totalCost) {
                gameData.currentUser.coins -= totalCost;
                
                // Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† ÛŒØ§ Ø§ÛŒØ¬Ø§Ø¯ Ø³Ù‡Ø§Ù… Ú©Ø§Ø±Ø¨Ø±
                let userStock = gameData.currentUser.stocks.find(s => s.id === stockId);
                if (userStock) {
                    userStock.shares += sharesToBuy;
                } else {
                    gameData.currentUser.stocks.push({
                        id: stockId,
                        name: stock.name,
                        shares: sharesToBuy,
                        buyPrice: stock.price
                    });
                }
                
                gameData.currentUser.transactions.push({
                    description: `Ø®Ø±ÛŒØ¯ Ø³Ù‡Ø§Ù… ${stock.name}`,
                    amount: -totalCost,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                saveGameData();
                updateUserInfo();
                loadStock();
                showNotification(`ğŸ“ˆ ${sharesToBuy} Ø³Ù‡Ù… Ø§Ø² ${stock.name} Ø®Ø±ÛŒØ¯Ø§Ø±ÛŒ Ø´Ø¯!`, 'success');
            } else {
                showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø®Ø±ÛŒØ¯ Ø³Ù‡Ø§Ù… Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
            }
        }

        function sellStock(stockId) {
            const stock = gameData.stocks.find(s => s.id === stockId);
            const userStockIndex = gameData.currentUser.stocks.findIndex(s => s.id === stockId);
            
            if (userStockIndex === -1) return;
            
            const userStock = gameData.currentUser.stocks[userStockIndex];
            const totalValue = stock.price * userStock.shares;
            
            gameData.currentUser.coins += totalValue;
            gameData.currentUser.stocks.splice(userStockIndex, 1);
            
            gameData.currentUser.transactions.push({
                description: `ÙØ±ÙˆØ´ Ø³Ù‡Ø§Ù… ${stock.name}`,
                amount: totalValue,
                time: new Date().toLocaleTimeString('fa-IR')
            });
            
            saveGameData();
            updateUserInfo();
            loadStock();
            showNotification(`ğŸ“ˆ ${userStock.shares} Ø³Ù‡Ù… Ø§Ø² ${stock.name} ÙØ±ÙˆØ®ØªÙ‡ Ø´Ø¯!`, 'success');
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ø¢Ø´Ù¾Ø²ÛŒ ====================
        function loadCooking() {
            const cookingRecipes = document.getElementById('cookingRecipes');
            
            cookingRecipes.innerHTML = gameData.cookingRecipes.map(recipe => {
                const hasIngredients = recipe.ingredients.every(ingredient =>
                    gameData.currentUser.foodItems.some(food => food.name === ingredient)
                );
                
                return `
                    <div class="product-card">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="font-size: 1.8em;">ğŸ³</div>
                                <div>
                                    <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${recipe.name}</h3>
                                    <div style="color: #ccc; font-size: 0.8em;">
                                        Ù…ÙˆØ§Ø¯: ${recipe.ingredients.join('ØŒ ')}
                                    </div>
                                    <div style="color: #ccc; font-size: 0.75em;">
                                        Ú©Ø§Ù‡Ø´ Ú¯Ø±Ø³Ù†Ú¯ÛŒ: ${recipe.hungerReduction}% â€¢ Ø§Ù†Ø±Ú˜ÛŒ: +${recipe.energyBoost}%
                                    </div>
                                    <div style="color: #ccc; font-size: 0.7em;">
                                        Ø²Ù…Ø§Ù†: ${recipe.timeRequired} Ø¯Ù‚ÛŒÙ‚Ù‡
                                    </div>
                                </div>
                            </div>
                            <button class="btn" onclick="cookRecipe(${recipe.id})" 
                                    ${!hasIngredients ? 'disabled style="opacity: 0.5;"' : ''}
                                    style="padding: 6px 12px; font-size: 0.8em;">
                                Ù¾Ø®Øª
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function cookRecipe(recipeId) {
            const recipe = gameData.cookingRecipes.find(r => r.id === recipeId);
            if (!recipe) return;
            
            // Ù…ØµØ±Ù Ù…ÙˆØ§Ø¯
            recipe.ingredients.forEach(ingredient => {
                const foodIndex = gameData.currentUser.foodItems.findIndex(f => f.name === ingredient);
                if (foodIndex !== -1) {
                    gameData.currentUser.foodItems.splice(foodIndex, 1);
                }
            });
            
            showNotification(`ğŸ³ Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø®Øª ${recipe.name}...`, 'success');
            
            setTimeout(() => {
                // Ø§Ø«Ø±Ø§Øª ØºØ°Ø§
                gameData.currentUser.hunger = Math.max(0, gameData.currentUser.hunger - recipe.hungerReduction);
                gameData.currentUser.energy = Math.min(100, gameData.currentUser.energy + recipe.energyBoost);
                
                saveGameData();
                updateUserInfo();
                showNotification(`ğŸ³ ${recipe.name} Ø¢Ù…Ø§Ø¯Ù‡ Ø´Ø¯! Ú¯Ø±Ø³Ù†Ú¯ÛŒ Ú©Ø§Ù‡Ø´ Ùˆ Ø§Ù†Ø±Ú˜ÛŒ Ø§ÙØ²Ø§ÛŒØ´ ÛŒØ§ÙØª`, 'success');
            }, recipe.timeRequired * 1000);
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ø³ÙˆÙ¾Ø±Ù…Ø§Ø±Ú©Øª ====================
        function loadSupermarket() {
            const supermarketItems = document.getElementById('supermarketItems');
            supermarketItems.innerHTML = gameData.supermarketItems.map(item => `
                <div class="product-card" onclick="buyFoodItem(${item.id})">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="font-size: 1.8em;">ğŸ</div>
                            <div>
                                <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${item.name}</h3>
                                <div style="color: #ccc; font-size: 0.8em;">
                                    Ú©Ø§Ù‡Ø´ Ú¯Ø±Ø³Ù†Ú¯ÛŒ: ${item.hungerReduction}%
                                </div>
                                <div style="color: #ccc; font-size: 0.75em;">
                                    Ù†ÙˆØ¹: ${item.type}
                                </div>
                            </div>
                        </div>
                        <div style="color: var(--warning); font-weight: bold; font-size: 1.1em;">
                            ${item.price} ğŸª™
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function buyFoodItem(itemId) {
            const item = gameData.supermarketItems.find(i => i.id === itemId);
            if (!item) return;
            
            if (gameData.currentUser.coins >= item.price) {
                gameData.currentUser.coins -= item.price;
                gameData.currentUser.foodItems.push({...item});
                
                gameData.currentUser.transactions.push({
                    description: `Ø®Ø±ÛŒØ¯ ${item.name}`,
                    amount: -item.price,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                saveGameData();
                updateUserInfo();
                showNotification(`ğŸ Ø®Ø±ÛŒØ¯ ${item.name} Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯!`, 'success');
            } else {
                showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø®Ø±ÛŒØ¯ Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
            }
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ø¯ÙˆØ³ØªØ§Ù† ====================
        function loadFriends() {
            const friendsList = document.getElementById('friendsList');
            
            if (gameData.currentUser.friends.length === 0) {
                friendsList.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: #ccc;">
                        <div style="font-size: 3em;">ğŸ‘¥</div>
                        <p style="font-size: 0.9em; margin-top: 10px;">Ù‡Ù†ÙˆØ² Ø¯ÙˆØ³ØªÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯!</p>
                        <p style="font-size: 0.8em; margin-top: 5px;">Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø¯ÙˆØ³ØªØ§Ù† Ø¬Ø¯ÛŒØ¯ Ø¯Ú©Ù…Ù‡ Ø²ÛŒØ± Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯</p>
                    </div>
                `;
                return;
            }
            
            friendsList.innerHTML = gameData.currentUser.friends.map(friend => `
                <div class="friend-card">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="font-size: 1.8em;">ğŸ‘¤</div>
                            <div>
                                <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${friend.name}</h3>
                                <div style="color: #ccc; font-size: 0.8em;">
                                    Ø³Ø·Ø­: ${friend.level}
                                </div>
                                <div style="color: ${friend.online ? 'var(--neon)' : '#ccc'}; font-size: 0.7em;">
                                    ${friend.online ? 'ğŸŸ¢ Ø¢Ù†Ù„Ø§ÛŒÙ†' : 'ğŸ”´ Ø¢ÙÙ„Ø§ÛŒÙ†'}
                                </div>
                            </div>
                        </div>
                        <button class="btn" onclick="chatWithFriend(${friend.id})" style="padding: 6px 12px; font-size: 0.8em;">
                            Ú†Øª
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function findNewFriends() {
            const newFriends = gameData.friends.filter(friend => 
                !gameData.currentUser.friends.some(f => f.id === friend.id)
            );
            
            if (newFriends.length === 0) {
                showNotification('Ù‡Ù…Ù‡ Ø¯ÙˆØ³ØªØ§Ù† Ø±Ø§ Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯!', 'info');
                return;
            }
            
            const randomFriend = newFriends[Math.floor(Math.random() * newFriends.length)];
            gameData.currentUser.friends.push({...randomFriend});
            
            saveGameData();
            loadFriends();
            showNotification(`ğŸ‘¥ ${randomFriend.name} Ø¨Ù‡ Ù„ÛŒØ³Øª Ø¯ÙˆØ³ØªØ§Ù† Ø´Ù…Ø§ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯!`, 'success');
        }

        function chatWithFriend(friendId) {
            const friend = gameData.currentUser.friends.find(f => f.id === friendId);
            if (!friend) return;
            
            showModal(`
                <h3 style="color: var(--neon); text-align: center; margin-bottom: 12px; font-size: 1.1em;">ğŸ’¬ Ú†Øª Ø¨Ø§ ${friend.name}</h3>
                <div style="color: #ccc; margin-bottom: 15px; font-size: 0.9em; text-align: center;">
                    ${friend.online ? 'ğŸŸ¢ Ø¢Ù†Ù„Ø§ÛŒÙ†' : 'ğŸ”´ Ø¢ÙÙ„Ø§ÛŒÙ†'}
                </div>
                <div style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 10px; margin-bottom: 10px;">
                    <div style="color: white; font-size: 0.9em;">Ø³Ù„Ø§Ù…! Ú†Ø·ÙˆØ± Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù… Ú©Ù…Ú©ØªØ§Ù† Ú©Ù†Ù…ØŸ</div>
                    <div style="color: #ccc; font-size: 0.7em; text-align: left; margin-top: 4px;">${friend.name}</div>
                </div>
                <div style="display: flex; gap: 8px;">
                    <input type="text" placeholder="Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..." style="flex: 1; padding: 8px; border-radius: 6px; border: 1px solid #333; background: rgba(255,255,255,0.1); color: white; font-size: 0.9em;">
                    <button class="btn" style="padding: 8px 12px; font-size: 0.8em;">Ø§Ø±Ø³Ø§Ù„</button>
                </div>
            `);
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ø¢Ù…ÙˆØ²Ø´Ú¯Ø§Ù‡ ØªØ®ØµØµÛŒ ====================
        function loadTraining() {
            const trainingCourses = document.getElementById('trainingCourses');
            trainingCourses.innerHTML = gameData.trainingCourses.map(course => {
                const hasRequirements = course.requirement.every(req => 
                    gameData.currentUser.certificates.some(cert => cert.name === req)
                );
                const isCompleted = gameData.currentUser.certificates.some(cert => cert.name === course.certificate);
                
                return `
                    <div class="training-course">
                        <div style="display: flex; justify-content: space-between; align-items: start;">
                            <div>
                                <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${course.name}</h3>
                                <div style="color: #ccc; font-size: 0.8em;">
                                    Ø²Ù…Ø§Ù† Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²: ${course.timeRequired} Ø¯Ù‚ÛŒÙ‚Ù‡
                                </div>
                                <div style="color: #ccc; font-size: 0.75em;">
                                    Ù…Ø¯Ø±Ú©: ${course.certificate}
                                    ${course.requirement.length > 0 ? `â€¢ Ù¾ÛŒØ´ Ù†ÛŒØ§Ø²: ${course.requirement.join(', ')}` : ''}
                                </div>
                                ${isCompleted ? 
                                    `<div style="color: var(--secondary); font-size: 0.7em; margin-top: 4px;">
                                        âœ… ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡
                                    </div>` : ''
                                }
                            </div>
                            <div>
                                ${!isCompleted ? 
                                    `<button class="btn" onclick="startTraining(${course.id})" 
                                             ${!hasRequirements ? 'disabled style="opacity: 0.5;"' : ''}
                                             style="padding: 6px 12px; font-size: 0.8em;">
                                        ${course.price} ğŸª™
                                    </button>` :
                                    `<button class="btn" disabled style="padding: 6px 12px; font-size: 0.8em; opacity: 0.5;">
                                        ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡
                                    </button>`
                                }
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function startTraining(courseId) {
            const course = gameData.trainingCourses.find(c => c.id === courseId);
            if (!course) return;
            
            if (gameData.currentUser.coins >= course.price) {
                gameData.currentUser.coins -= course.price;
                
                showNotification(`ğŸ“ ${course.name} Ø´Ø±ÙˆØ¹ Ø´Ø¯!`, 'success');
                
                setTimeout(() => {
                    // Ø¯Ø±ÛŒØ§ÙØª Ù…Ø¯Ø±Ú©
                    gameData.currentUser.certificates.push({
                        id: Date.now(),
                        name: course.certificate,
                        type: 'professional',
                        issueDate: new Date().toLocaleDateString('fa-IR')
                    });
                    
                    saveGameData();
                    loadTraining();
                    showNotification(`ğŸ“ ${course.name} Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³ÛŒØ¯! Ù…Ø¯Ø±Ú© ${course.certificate} Ø¯Ø±ÛŒØ§ÙØª Ú©Ø±Ø¯ÛŒØ¯`, 'success');
                }, course.timeRequired * 1000);
            } else {
                showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø«Ø¨Øª Ù†Ø§Ù… Ø¯Ø± Ø¯ÙˆØ±Ù‡ Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
            }
        }

        // ==================== Ø³ÛŒØ³ØªÙ… ØªØ±ÛŒØ¯ ====================
        function loadTrade() {
            const tradeMarket = document.getElementById('tradeMarket');
            const userAssets = document.getElementById('userAssets');
            
            // Ø¨Ø§Ø²Ø§Ø± ØªØ±ÛŒØ¯
            tradeMarket.innerHTML = gameData.tradeItems.map(item => `
                <div class="trade-item">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="font-size: 1.8em;">ğŸ’</div>
                            <div>
                                <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${item.name}</h3>
                                <div style="color: #ccc; font-size: 0.8em;">
                                    Ù‚ÛŒÙ…Øª: ${item.price.toLocaleString()} Ø³Ú©Ù‡
                                </div>
                                <div style="color: #ccc; font-size: 0.75em;">
                                    Ù†ÙˆØ³Ø§Ù†: ${(item.volatility * 100).toFixed(1)}%
                                </div>
                            </div>
                        </div>
                        <button class="btn" onclick="buyTradeItem(${item.id})" style="padding: 6px 12px; font-size: 0.8em;">
                            Ø®Ø±ÛŒØ¯
                        </button>
                    </div>
                </div>
            `).join('');
            
            // Ø¯Ø§Ø±Ø§ÛŒÛŒâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±
            if (gameData.currentUser.tradeAssets.length === 0) {
                userAssets.innerHTML = '<div style="text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">Ø¯Ø§Ø±Ø§ÛŒÛŒ ØªØ±ÛŒØ¯ÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯</div>';
            } else {
                userAssets.innerHTML = gameData.currentUser.tradeAssets.map(asset => `
                    <div class="trade-item">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="font-size: 1.8em;">ğŸ’</div>
                                <div>
                                    <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${asset.name}</h3>
                                    <div style="color: #ccc; font-size: 0.8em;">
                                        Ù…Ù‚Ø¯Ø§Ø±: ${asset.amount}
                                    </div>
                                    <div style="color: #ccc; font-size: 0.75em;">
                                        Ù‚ÛŒÙ…Øª Ø®Ø±ÛŒØ¯: ${asset.buyPrice.toLocaleString()} Ø³Ú©Ù‡
                                    </div>
                                </div>
                            </div>
                            <button class="btn" onclick="sellTradeItem(${asset.id})" style="padding: 6px 12px; font-size: 0.8em;">
                                ÙØ±ÙˆØ´
                            </button>
                        </div>
                    </div>
                `).join('');
            }
        }

        function buyTradeItem(itemId) {
            const item = gameData.tradeItems.find(i => i.id === itemId);
            if (!item) return;
            
            const amount = 1;
            const totalCost = item.price * amount;
            
            if (gameData.currentUser.coins >= totalCost) {
                gameData.currentUser.coins -= totalCost;
                
                // Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† ÛŒØ§ Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø§Ø±Ø§ÛŒÛŒ
                let userAsset = gameData.currentUser.tradeAssets.find(a => a.id === itemId);
                if (userAsset) {
                    userAsset.amount += amount;
                    userAsset.buyPrice = item.price; // Ø¢Ù¾Ø¯ÛŒØª Ù‚ÛŒÙ…Øª Ø®Ø±ÛŒØ¯
                } else {
                    gameData.currentUser.tradeAssets.push({
                        id: itemId,
                        name: item.name,
                        amount: amount,
                        buyPrice: item.price
                    });
                }
                
                gameData.currentUser.transactions.push({
                    description: `Ø®Ø±ÛŒØ¯ ${item.name}`,
                    amount: -totalCost,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                saveGameData();
                updateUserInfo();
                loadTrade();
                showNotification(`ğŸ’ ${amount} ÙˆØ§Ø­Ø¯ Ø§Ø² ${item.name} Ø®Ø±ÛŒØ¯Ø§Ø±ÛŒ Ø´Ø¯!`, 'success');
            } else {
                showNotification('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø®Ø±ÛŒØ¯ Ù†Ø¯Ø§Ø±ÛŒØ¯!', 'error');
            }
        }

        function sellTradeItem(itemId) {
            const item = gameData.tradeItems.find(i => i.id === itemId);
            const userAssetIndex = gameData.currentUser.tradeAssets.findIndex(a => a.id === itemId);
            
            if (userAssetIndex === -1) return;
            
            const userAsset = gameData.currentUser.tradeAssets[userAssetIndex];
            const totalValue = item.price * userAsset.amount;
            
            gameData.currentUser.coins += totalValue;
            gameData.currentUser.tradeAssets.splice(userAssetIndex, 1);
            
            gameData.currentUser.transactions.push({
                description: `ÙØ±ÙˆØ´ ${userAsset.name}`,
                amount: totalValue,
                time: new Date().toLocaleTimeString('fa-IR')
            });
            
            saveGameData();
            updateUserInfo();
            loadTrade();
            showNotification(`ğŸ’ ${userAsset.amount} ÙˆØ§Ø­Ø¯ Ø§Ø² ${userAsset.name} ÙØ±ÙˆØ®ØªÙ‡ Ø´Ø¯!`, 'success');
        }

        // ==================== Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ú©Ù…Ú©ÛŒ ====================
        function getVehicleIcon(type) {
            switch(type) {
                case 'bicycle': return 'ğŸš²';
                case 'motorcycle': return 'ğŸï¸';
                case 'car': return 'ğŸš—';
                case 'supercar': return 'ğŸš€';
                default: return 'ğŸš—';
            }
        }

        function showModal(content) {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'block';
            modal.innerHTML = `
                <div class="modal-content">
                    <button class="close-modal" onclick="closeModal()">Ã—</button>
                    ${content}
                </div>
            `;
            document.body.appendChild(modal);
        }

        function closeModal() {
            const modal = document.querySelector('.modal');
            if (modal) modal.remove();
        }

        function saveGameData() {
            try {
                localStorage.setItem('drHoseyniGame', JSON.stringify(gameData));
            } catch (e) {
                console.error('Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ø¨Ø§Ø²ÛŒ:', e);
            }
        }

        function loadGameData() {
            try {
                const saved = localStorage.getItem('drHoseyniGame');
                if (saved) {
                    Object.assign(gameData, JSON.parse(saved));
                }
            } catch (e) {
                console.error('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¨Ø§Ø²ÛŒ:', e);
            }
        }

        // ==================== Ø­Ù„Ù‚Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²ÛŒ ====================
        function startTimeLoop() {
            setInterval(updateGameTime, 60000 / gameData.gameSpeed); // 1 Ø¯Ù‚ÛŒÙ‚Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ = 1 Ø³Ø§Ø¹Øª Ø¨Ø§Ø²ÛŒ
        }

        function startGameLoop() {
            setInterval(() => {
                if (!gameData.currentUser || gameData.isInJail) return;
                
                // Ø³ÛŒØ³ØªÙ… Ú¯Ø±Ø³Ù†Ú¯ÛŒ
                gameData.currentUser.hunger += 1;
                if (gameData.currentUser.hunger > 100) {
                    gameData.currentUser.hunger = 100;
                    gameData.currentUser.health -= 2;
                    if (gameData.currentUser.health < 0) gameData.currentUser.health = 0;
                    
                    if (gameData.currentUser.health <= 0) {
                        showNotification('ğŸ’€ Ø§Ø² Ú¯Ø±Ø³Ù†Ú¯ÛŒ Ù…Ø±Ø¯ÛŒØ¯! Ø¨Ù‡ Ø¨ÛŒÙ…Ø§Ø±Ø³ØªØ§Ù† Ù…Ù†ØªÙ‚Ù„ Ø´Ø¯ÛŒØ¯.', 'error');
                        gameData.currentUser.health = 50;
                        gameData.currentUser.hunger = 50;
                        gameData.currentUser.coins -= 2000;
                    }
                }
                
                // Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø§Ù†Ø±Ú˜ÛŒ
                if (gameData.currentUser.hunger < 50) {
                    gameData.currentUser.energy = Math.min(100, gameData.currentUser.energy + 0.5);
                }
                
                // Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø³Ù„Ø§Ù…Øª
                if (gameData.currentUser.hunger < 30 && gameData.currentUser.energy > 50) {
                    gameData.currentUser.health = Math.min(100, gameData.currentUser.health + 0.2);
                }
                
                // Ú©Ø§Ù‡Ø´ Ø²Ù…Ø§Ù† Ù‚Ø¨Ø¶â€ŒÙ‡Ø§
                if (gameData.currentUser.bills) {
                    gameData.currentUser.bills.forEach(bill => {
                        if (Math.random() < 0.01) { // 1% chance per minute
                            bill.dueDate--;
                            if (bill.dueDate <= -7) { // 7 Ø±ÙˆØ² Ù…Ø¹ÙˆÙ‚Ù‡
                                sendToJail('Ø¹Ø¯Ù… Ù¾Ø±Ø¯Ø§Ø®Øª Ù‚Ø¨Ø¶');
                            }
                        }
                    });
                }
                
                // Ù†ÙˆØ³Ø§Ù† Ù‚ÛŒÙ…Øª Ø³Ù‡Ø§Ù… Ùˆ ØªØ±ÛŒØ¯
                if (Math.random() < 0.05) { // 5% chance per minute
                    gameData.stocks.forEach(stock => {
                        const change = (Math.random() - 0.5) * 2 * stock.volatility;
                        stock.price = Math.max(10, Math.floor(stock.price * (1 + change)));
                    });
                    
                    gameData.tradeItems.forEach(item => {
                        const change = (Math.random() - 0.5) * 2 * item.volatility;
                        item.price = Math.max(10, Math.floor(item.price * (1 + change)));
                    });
                }
                
                saveGameData();
                updateUserInfo();
            }, 30000);
        }

        // ==================== Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ ====================
        document.addEventListener('DOMContentLoaded', function() {
            loadGameData();
            
            if (gameData.currentUser) {
                showGamePage();
                startTimeLoop();
                startGameLoop();
                
                if (gameData.isInJail) {
                    document.getElementById('jailScreen').style.display = 'flex';
                }
            }
        });

        // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø§Ø³Ú©Ø±ÙˆÙ„ Ùˆ Ø²ÙˆÙ…
        document.addEventListener('touchmove', function(e) {
            if (e.touches.length > 1) {
                e.preventDefault();
            }
        }, { passive: false });

        document.addEventListener('gesturestart', function(e) {
            e.preventDefault();
        });
    </script>
</body>
</html>
