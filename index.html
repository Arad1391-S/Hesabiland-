<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üèôÔ∏è ÿ¥Ÿáÿ± ÿ¢ŸÖŸàÿ≤ÿ¥€å ÿØ⁄©ÿ™ÿ± ÿ≠ÿ≥ÿßÿ®€å - ŸÜÿ≥ÿÆŸá ŸÜŸáÿß€å€å</title>
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Vazirmatn, sans-serif;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --primary: #6366f1;
            --secondary: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #1f2937;
            --light: #f8fafc;
            --neon: #00ff88;
            --cyber: #0066ff;
            --jail: #dc2626;
            --hospital: #06b6d4;
            --day-bg: linear-gradient(135deg, #87CEEB, #98FB98);
            --night-bg: linear-gradient(135deg, #2c3e50, #34495e);
            --spring-bg: linear-gradient(135deg, #87CEEB, #98FB98);
            --summer-bg: linear-gradient(135deg, #FFD700, #FF8C00);
            --autumn-bg: linear-gradient(135deg, #D2691E, #FFA500);
            --winter-bg: linear-gradient(135deg, #B0C4DE, #4682B4);
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: var(--spring-bg);
            color: #1f2937;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            transition: all 1s ease;
        }

        body.night-mode {
            background: var(--night-bg);
            color: white;
        }

        body.summer-mode {
            background: var(--summer-bg);
        }

        body.autumn-mode {
            background: var(--autumn-bg);
        }

        body.winter-mode {
            background: var(--winter-bg);
        }

        /* ÿµŸÅÿ≠Ÿá ŸÑÿß⁄Ø€åŸÜ */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 3000;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }

        .login-form {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            width: 95%;
            max-width: 400px;
            border: 3px solid var(--primary);
        }

        .night-mode .login-form {
            background: rgba(31, 41, 55, 0.95);
            border-color: var(--neon);
        }

        .login-title {
            text-align: center;
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 1.6em;
        }

        .night-mode .login-title {
            color: var(--neon);
        }

        .school-name {
            text-align: center;
            color: #666;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .night-mode .school-name {
            color: #ccc;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 6px;
            color: #1f2937;
            font-weight: bold;
            font-size: 0.9em;
        }

        .night-mode .form-group label {
            color: var(--neon);
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 0.9em;
            transition: all 0.3s ease;
            background: white;
            color: #1f2937;
        }

        .night-mode .form-group input, .night-mode .form-group select {
            background: rgba(255,255,255,0.1);
            border-color: var(--neon);
            color: white;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 8px rgba(99, 102, 241, 0.3);
        }

        .user-type {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
        }

        .user-type-btn {
            flex: 1;
            padding: 10px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            font-weight: bold;
            color: #1f2937;
            font-size: 0.85em;
        }

        .night-mode .user-type-btn {
            background: rgba(255,255,255,0.1);
            border-color: #666;
            color: #ccc;
        }

        .user-type-btn.active {
            border-color: var(--primary);
            background: var(--primary);
            color: white;
        }

        .night-mode .user-type-btn.active {
            border-color: var(--neon);
            background: var(--neon);
            color: black;
        }

        .btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(45deg, var(--primary), var(--cyber));
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 8px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .btn-creator {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
        }

        .btn-admin {
            background: linear-gradient(45deg, #a55eea, #8854d0);
        }

        .btn-danger {
            background: linear-gradient(45deg, var(--danger), #dc2626);
        }

        .btn-warning {
            background: linear-gradient(45deg, var(--warning), #e67e22);
        }

        .btn-success {
            background: linear-gradient(45deg, var(--secondary), #059669);
        }

        .game-container {
            display: none;
            width: 100%;
            height: 100%;
            position: fixed;
            top: 0;
            left: 0;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 12px 15px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-bottom: 2px solid var(--primary);
            transition: all 0.3s ease;
        }

        .night-mode .header {
            background: rgba(31, 41, 55, 0.95);
            border-bottom-color: var(--neon);
        }

        .header h1 {
            color: var(--primary);
            font-size: 1.2em;
        }

        .night-mode .header h1 {
            color: var(--neon);
        }

        .user-info {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .user-avatar {
            width: 35px;
            height: 35px;
            background: linear-gradient(45deg, var(--primary), var(--cyber));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1em;
            color: white;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }

        .status-bars {
            display: flex;
            flex-direction: column;
            gap: 4px;
            min-width: 120px;
        }

        .status-bar {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.7em;
        }

        .bar-container {
            flex: 1;
            height: 6px;
            background: #e5e7eb;
            border-radius: 3px;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .health-bar { background: linear-gradient(90deg, #ef4444, #f59e0b, #10b981); }
        .hunger-bar { background: linear-gradient(90deg, #10b981, #f59e0b, #ef4444); }
        .energy-bar { background: linear-gradient(90deg, #ef4444, #f59e0b, #10b981); }
        .intelligence-bar { background: linear-gradient(90deg, #8b5cf6, #06b6d4, #10b981); }

        .time-display {
            background: rgba(255,255,255,0.9);
            padding: 6px 10px;
            border-radius: 15px;
            font-weight: bold;
            box-shadow: 0 1px 4px rgba(0,0,0,0.1);
            color: #1f2937;
            font-size: 0.8em;
        }

        .night-mode .time-display {
            background: rgba(255,255,255,0.1);
            color: var(--neon);
        }

        .phone-container {
            margin-top: 70px;
            height: calc(100% - 130px);
            display: flex;
            flex-direction: column;
            background: #1a1a1a;
            border: 2px solid #333;
            border-radius: 20px;
            margin: 75px 10px 10px 10px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.8);
        }

        .phone-status-bar {
            background: #111;
            padding: 8px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #333;
            font-size: 0.7em;
            color: white;
        }

        .phone-content {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            padding: 12px;
        }

        .home-screen {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            padding: 15px;
        }

        .app-icon {
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 8px;
        }

        .app-icon:hover {
            transform: scale(1.05);
        }

        .app-icon div {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 6px auto;
            font-size: 1.4em;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }

        .app-name {
            font-size: 0.7em;
            color: #ccc;
        }

        .city-map {
            display: none;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 15px;
        }

        .map-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .location {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .location:hover {
            transform: translateY(-3px);
            border-color: var(--neon);
            box-shadow: 0 3px 10px rgba(0, 255, 136, 0.3);
        }

        .location.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .location.disabled:hover {
            transform: none;
            border-color: transparent;
            box-shadow: none;
        }

        .location-icon {
            font-size: 2em;
            margin-bottom: 8px;
        }

        .location-name {
            font-weight: bold;
            margin-bottom: 4px;
            color: white;
            font-size: 0.9em;
        }

        .location-distance {
            font-size: 0.7em;
            color: #ccc;
        }

        .backpack {
            display: none;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 15px;
        }

        .backpack-section {
            margin-bottom: 20px;
        }

        .backpack-section h3 {
            color: var(--neon);
            margin-bottom: 12px;
            border-bottom: 1px solid var(--neon);
            padding-bottom: 6px;
            font-size: 0.9em;
        }

        .items-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }

        .item-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            border: 1px solid #333;
            transition: all 0.3s ease;
        }

        .item-card:hover {
            border-color: var(--neon);
            transform: scale(1.03);
        }

        .item-icon {
            font-size: 1.5em;
            margin-bottom: 6px;
        }

        .item-details {
            font-size: 0.6em;
            color: #ccc;
            margin-top: 4px;
        }

        .bank-app {
            display: none;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 15px;
        }

        .bank-section {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .bank-section h3 {
            color: var(--neon);
            margin-bottom: 12px;
            font-size: 0.9em;
        }

        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            border-bottom: 1px solid #333;
            color: white;
            font-size: 0.8em;
        }

        .job-app {
            display: none;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 15px;
        }

        .job-card {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .job-card:hover {
            border-color: var(--neon);
            transform: translateY(-2px);
        }

        .job-card.working {
            border-color: var(--secondary);
        }

        .job-card.cooldown {
            border-color: var(--danger);
            opacity: 0.7;
        }

        .job-card.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .market-app {
            display: none;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 15px;
        }

        .market-ad {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .market-ad:hover {
            border-color: var(--neon);
        }

        .chat-app {
            display: none;
            height: 100%;
            flex-direction: column;
        }

        .chat-header {
            background: var(--primary);
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #333;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 12px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .message {
            max-width: 85%;
            padding: 8px 12px;
            border-radius: 12px;
            font-size: 0.8em;
        }

        .message.sent {
            background: var(--primary);
            align-self: flex-end;
            border-bottom-right-radius: 4px;
        }

        .message.received {
            background: #374151;
            align-self: flex-start;
            border-bottom-left-radius: 4px;
        }

        .chat-input {
            display: flex;
            padding: 12px;
            border-top: 1px solid #333;
            gap: 8px;
        }

        .chat-input input {
            flex: 1;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid #333;
            border-radius: 20px;
            color: white;
            font-size: 0.8em;
        }

        .chat-input button {
            padding: 10px 15px;
            background: var(--neon);
            border: none;
            border-radius: 20px;
            color: black;
            font-weight: bold;
            cursor: pointer;
            font-size: 0.8em;
        }

        .education-app {
            display: none;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 15px;
        }

        .law-app {
            display: none;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 15px;
        }

        .law-section {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
        }

        .transport-app {
            display: none;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 15px;
        }

        .repair-shop {
            display: none;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 15px;
        }

        .vehicle-card {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
            color: white;
        }

        .vehicle-card:hover {
            border-color: var(--neon);
            transform: translateY(-2px);
        }

        .vehicle-card.owned {
            border-color: var(--secondary);
        }

        .vehicle-status {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 12px;
            border-left: 4px solid var(--neon);
            color: white;
        }

        .health-bar {
            width: 100%;
            height: 15px;
            background: #333;
            border-radius: 8px;
            overflow: hidden;
            margin: 8px 0;
        }

        .health-fill {
            height: 100%;
            background: linear-gradient(90deg, #ef4444, #f59e0b, #10b981);
            transition: width 0.3s ease;
        }

        .repair-option {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 12px;
            margin: 8px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            color: white;
        }

        .repair-option:hover {
            border-color: var(--neon);
            transform: translateY(-1px);
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(31, 41, 55, 0.95);
            display: flex;
            justify-content: space-around;
            padding: 8px 0;
            border-top: 2px solid var(--neon);
            backdrop-filter: blur(10px);
        }

        .nav-btn {
            text-align: center;
            cursor: pointer;
            padding: 6px 8px;
            border-radius: 8px;
            transition: all 0.3s ease;
            color: #ccc;
            min-width: 50px;
        }

        .nav-btn.active {
            color: var(--neon);
            background: rgba(0, 255, 136, 0.2);
        }

        .nav-btn i {
            font-size: 1.1em;
            margin-bottom: 3px;
        }

        .nav-btn span {
            font-size: 0.6em;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(31, 41, 55, 0.95);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid var(--neon);
            width: 90%;
            max-width: 400px;
            max-height: 80vh;
            overflow-y: auto;
            overflow-x: hidden;
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.3);
        }

        .close-modal {
            position: absolute;
            top: 8px;
            left: 8px;
            background: var(--danger);
            color: white;
            border: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 0.9em;
        }

        .travel-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 2500;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
        }

        .travel-timer {
            font-size: 2.5em;
            margin: 15px 0;
            color: var(--neon);
        }

        .progress-bar {
            width: 80%;
            height: 15px;
            background: #333;
            border-radius: 8px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--cyber));
            transition: width 1s linear;
        }

        .jail-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #450a0a, #7f1d1d);
            z-index: 3000;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
        }

        .jail-screen h1 {
            color: var(--danger);
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .jail-timer {
            font-size: 3em;
            color: var(--neon);
            margin: 20px 0;
        }

        .notification {
            position: fixed;
            top: 80px;
            right: 10px;
            background: var(--primary);
            color: white;
            padding: 12px 15px;
            border-radius: 8px;
            z-index: 10000;
            animation: slideIn 0.3s ease;
            max-width: 280px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            font-size: 0.8em;
        }

        .notification.error {
            background: var(--danger);
        }

        .notification.success {
            background: var(--secondary);
        }

        .notification.warning {
            background: var(--warning);
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.4s ease;
        }

        ::-webkit-scrollbar {
            width: 4px;
        }

        ::-webkit-scrollbar-track {
            background: #1a1a2e;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--neon);
            border-radius: 2px;
        }

        /* ÿßÿ≥ÿ™ÿß€åŸÑ‚ÄåŸáÿß€å ÿ¨ÿØ€åÿØ ÿ®ÿ±ÿß€å ÿßŸæ‚ÄåŸáÿß€å ÿ¨ÿØ€åÿØ */
        .library-app, .pharmacy-app, .realestate-app, .onlineshop-app, .internet-app, .lawyer-app, .municipality-app, .stock-app, .cooking-app, .supermarket-app, .friends-app, .training-app, .trade-app, .amusement-park-app, .cinema-app, .stadium-app, .insurance-app, .home-app, .stats-app {
            display: none;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 15px;
        }

        .product-card {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .product-card:hover {
            border-color: var(--neon);
            transform: translateY(-2px);
        }

        .course-card {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .course-card.active {
            border-color: var(--secondary);
        }

        .course-card.completed {
            border-color: var(--primary);
            opacity: 0.7;
        }

        .property-card {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .property-card.owned {
            border-color: var(--secondary);
        }

        .bills-section {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .bill-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #333;
            color: white;
        }

        .bill-item.overdue {
            background: rgba(239, 68, 68, 0.2);
            border-radius: 6px;
            margin: 4px 0;
        }

        .internet-package {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .internet-package:hover {
            border-color: var(--neon);
        }

        .internet-package.active {
            border-color: var(--secondary);
        }

        .delivery-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 2600;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
        }

        .user-name-display {
            font-weight: bold;
            color: var(--primary);
            font-size: 0.9em;
            margin-bottom: 2px;
        }

        .night-mode .user-name-display {
            color: var(--neon);
        }

        .friend-card {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .friend-card:hover {
            border-color: var(--neon);
        }

        .training-course {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .training-course:hover {
            border-color: var(--neon);
        }

        .trade-item {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .trade-item:hover {
            border-color: var(--neon);
        }

        .insurance-policy {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .insurance-policy:hover {
            border-color: var(--neon);
        }

        .home-feature {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .home-feature:hover {
            border-color: var(--neon);
            transform: translateY(-2px);
        }

        .home-feature.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .home-feature.disabled:hover {
            transform: none;
            border-color: transparent;
        }

        /* ÿµŸÅÿ≠Ÿá ŸÜŸÖŸàÿØÿßÿ± Ÿàÿ∂ÿπ€åÿ™ */
        .stats-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            padding: 15px;
        }

        .stat-chart {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .stat-title {
            color: var(--neon);
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .chart-bar {
            height: 25px;
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            margin: 10px 0;
            overflow: hidden;
            position: relative;
        }

        .chart-fill {
            height: 100%;
            border-radius: 12px;
            transition: width 0.5s ease;
            position: relative;
        }

        .chart-label {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-weight: bold;
            font-size: 0.8em;
            text-shadow: 0 1px 2px rgba(0,0,0,0.7);
        }

        .chart-value {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-weight: bold;
            font-size: 0.8em;
        }

        .health-fill { background: linear-gradient(90deg, #ef4444, #f59e0b, #10b981); }
        .energy-fill { background: linear-gradient(90deg, #ef4444, #f59e0b, #10b981); }
        .hunger-fill { background: linear-gradient(90deg, #10b981, #f59e0b, #ef4444); }
        .intelligence-fill { background: linear-gradient(90deg, #8b5cf6, #06b6d4, #10b981); }

        .stat-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .stat-box {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 12px;
            text-align: center;
        }

        .stat-box h4 {
            color: var(--neon);
            margin-bottom: 5px;
            font-size: 0.9em;
        }

        .stat-box p {
            color: white;
            font-size: 1.1em;
            font-weight: bold;
        }

        .game-over-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 4000;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
            padding: 20px;
        }

        .game-over-title {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: var(--danger);
        }

        .game-over-reason {
            font-size: 1.2em;
            margin-bottom: 30px;
            max-width: 500px;
            line-height: 1.6;
        }

        .game-over-stats {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            max-width: 400px;
            width: 100%;
        }

        .game-over-stat {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 1em;
        }

        /* ÿ±€åÿ≥ŸæÿßŸÜÿ≥€åŸà ÿ®ÿ±ÿß€å ÿ™ŸÖÿßŸÖ ⁄ØŸàÿ¥€å‚ÄåŸáÿß */
        @media (max-width: 480px) {
            .home-screen {
                grid-template-columns: repeat(3, 1fr);
                gap: 6px;
                padding: 10px;
            }
            
            .app-icon div {
                width: 45px;
                height: 45px;
                font-size: 1.2em;
            }
            
            .app-name {
                font-size: 0.65em;
            }
            
            .map-grid {
                grid-template-columns: 1fr;
            }
            
            .items-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .phone-container {
                margin: 70px 5px 5px 5px;
            }
            
            .header {
                padding: 10px 12px;
                height: 65px;
            }
            
            .status-bars {
                min-width: 100px;
            }

            .stat-details {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 360px) {
            .home-screen {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .app-icon div {
                width: 40px;
                height: 40px;
            }
        }

        /* ÿ¨ŸÑŸà⁄Ø€åÿ±€å ÿßÿ≤ ÿßÿ≥⁄©ÿ±ŸàŸÑ ÿßŸÅŸÇ€å */
        * {
            max-width: 100%;
        }
    
/* Overrides */
.header {
    padding: 10px 12px;
    position: fixed;
    top:0;left:0;right:0;
    z-index:1000;
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:12px;
    height:auto;
    min-height:64px;
    box-shadow:0 2px 10px rgba(0,0,0,0.08);
    border-bottom:2px solid var(--primary);
    flex-wrap:wrap;
}
.user-info{display:flex;gap:10px;align-items:center;flex-wrap:wrap;min-width:0;}
.user-name-display{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:160px;}
#userCoins{white-space:nowrap;font-size:.85em;min-width:0;}
.bar-container{position:relative;}
.bar-label{position:absolute;right:6px;top:50%;transform:translateY(-50%);font-size:.7em;font-weight:600;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.3);}


/* Header compact override */
.header{
    min-height:55px!important;
    padding:6px 10px!important;
    gap:6px!important;
}
.user-info{font-size:.85em!important;}
.status-bars{display:none!important;} /* hide bars for compact mode */

</style>
</head>
<body>
    <!-- ÿµŸÅÿ≠Ÿá ŸÑÿß⁄Ø€åŸÜ -->
    <div class="login-container" id="loginPage">
        <div class="login-form fade-in">
            <h2 class="login-title">üèôÔ∏è ÿ¥Ÿáÿ± ÿ¢ŸÖŸàÿ≤ÿ¥€å</h2>
            <div class="school-name">ŸÖÿØÿ±ÿ≥Ÿá ÿØ⁄©ÿ™ÿ± ÿ≠ÿ≥ÿßÿ®€å - ŸÜÿ≥ÿÆŸá ŸÜŸáÿß€å€å</div>
            
            <div class="user-type">
                <div class="user-type-btn active">
                    ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤
                </div>
            </div>

            <div class="form-group">
                <label for="className"><i class="fas fa-graduation-cap"></i> ⁄©ŸÑÿßÿ≥</label>
                <select id="className">
                    <option value="">ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÑÿßÿ≥</option>
                    <option value="701">⁄©ŸÑÿßÿ≥ €∑€∞€±</option>
                    <option value="702">⁄©ŸÑÿßÿ≥ €∑€∞€≤</option>
                    <option value="703">⁄©ŸÑÿßÿ≥ €∑€∞€≥</option>
                    <option value="704">⁄©ŸÑÿßÿ≥ €∑€∞€¥</option>
                    <option value="705">⁄©ŸÑÿßÿ≥ €∑€∞€µ</option>
                    <option value="706">⁄©ŸÑÿßÿ≥ €∑€∞€∂</option>
                </select>
            </div>

            <div class="form-group">
                <label for="firstName"><i class="fas fa-user"></i> ŸÜÿßŸÖ</label>
                <input type="text" id="firstName" placeholder="ŸÜÿßŸÖ ÿÆŸàÿØ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ">
            </div>

            <div class="form-group">
                <label for="lastName"><i class="fas fa-users"></i> ŸÜÿßŸÖ ÿÆÿßŸÜŸàÿßÿØ⁄Ø€å</label>
                <input type="text" id="lastName" placeholder="ŸÜÿßŸÖ ÿÆÿßŸÜŸàÿßÿØ⁄Ø€å ÿÆŸàÿØ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ">
            </div>

            <div class="form-group">
                <label for="password"><i class="fas fa-lock"></i> ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ±</label>
                <input type="password" id="password" placeholder="ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ± ÿÆŸàÿØ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ">
            </div>

            <button class="btn" onclick="login()">
                <i class="fas fa-play"></i> ÿ¥ÿ±Ÿàÿπ ÿ®ÿßÿ≤€å
            </button>
        </div>
    </div>

    <!-- ÿ±ÿßÿ®ÿ∑ ÿßÿµŸÑ€å ÿ®ÿßÿ≤€å -->
    <div class="game-container" id="gamePage">
        <!-- ŸáÿØÿ± -->
        <div class="header">
            <h1>üèôÔ∏è ÿ¥Ÿáÿ± ÿØ⁄©ÿ™ÿ± ÿ≠ÿ≥ÿßÿ®€å</h1>
            <div class="user-info">
                <div class="time-display">
                    <i class="fas fa-clock"></i> 
                    <span id="gameTime">08:00</span>
                </div>
                <div class="status-bars">
                    <div class="status-bar">
                        <i class="fas fa-heart" style="color: #ef4444;"></i>
                        <div class="bar-container">
                            <div class="bar-fill health-bar" id="healthBar" style="width: 100%"></div>
                        </div>
                    </div>
                    <div class="status-bar">
                        <i class="fas fa-utensils" style="color: #f59e0b;"></i>
                        <div class="bar-container">
                            <div class="bar-fill hunger-bar" id="hungerBar" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="status-bar">
                        <i class="fas fa-brain" style="color: #8b5cf6;"></i>
                        <div class="bar-container">
                            <div class="bar-fill intelligence-bar" id="intelligenceBar" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="status-bar">
                        <i class="fas fa-bolt" style="color: #10b981;"></i>
                        <div class="bar-container">
                            <div class="bar-fill energy-bar" id="energyBar" style="width: 100%"></div>
                        </div>
                    </div>
                </div>
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div style="font-size: 0.8em;">
                    <div class="user-name-display" id="userName">ŸÜÿßŸÖ ⁄©ÿßÿ±ÿ®ÿ±</div>
                    <div id="userCoins">ÿ≥⁄©Ÿá: 2,000 ü™ô</div>
                </div>
            </div>
        </div>

        <!-- ⁄ØŸàÿ¥€å ÿØÿßÿÆŸÑ ÿ®ÿßÿ≤€å -->
        <div class="phone-container">
            <div class="phone-status-bar">
                <span id="phoneTime">08:00</span>
                <span id="internetStatus">
                    <i class="fas fa-wifi" style="color: var(--neon);"></i>
                    <i class="fas fa-battery-three-quarters" style="margin-left: 6px;"></i>
                </span>
            </div>

            <div class="phone-content" id="phoneContent">
                <!-- ÿµŸÅÿ≠Ÿá ÿßÿµŸÑ€å ⁄ØŸàÿ¥€å -->
                <div class="home-screen" id="homeScreen">
                    <div class="app-icon" onclick="openApp('map')">
                        <div style="background: linear-gradient(45deg, #10b981, #059669);">
                            <i class="fas fa-map"></i>
                        </div>
                        <div class="app-name">ŸÜŸÇÿ¥Ÿá</div>
                    </div>
                    <div class="app-icon" onclick="openApp('backpack')">
                        <div style="background: linear-gradient(45deg, #f59e0b, #e67e22);">
                            <i class="fas fa-backpack"></i>
                        </div>
                        <div class="app-name">⁄©ŸàŸÑŸá Ÿæÿ¥ÿ™€å</div>
                    </div>
                    <div class="app-icon" onclick="openApp('bank')">
                        <div style="background: linear-gradient(45deg, #f59e0b, #d97706);">
                            <i class="fas fa-university"></i>
                        </div>
                        <div class="app-name">ÿ®ÿßŸÜ⁄©</div>
                    </div>
                    <div class="app-icon" onclick="openApp('jobs')">
                        <div style="background: linear-gradient(45deg, #8b5cf6, #7c3aed);">
                            <i class="fas fa-briefcase"></i>
                        </div>
                        <div class="app-name">ÿ¥ÿ∫ŸÑ‚ÄåŸáÿß</div>
                    </div>
                    <div class="app-icon" onclick="openApp('market')">
                        <div style="background: linear-gradient(45deg, #ef4444, #dc2626);">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="app-name">ÿ®ÿßÿ≤ÿßÿ±</div>
                    </div>
                    <div class="app-icon" onclick="openApp('education')">
                        <div style="background: linear-gradient(45deg, #06b6d4, #0891b2);">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <div class="app-name">ÿ¢ŸÖŸàÿ≤ÿ¥</div>
                    </div>
                    <div class="app-icon" onclick="openApp('transport')">
                        <div style="background: linear-gradient(45deg, #6b7280, #4b5563);">
                            <i class="fas fa-car"></i>
                        </div>
                        <div class="app-name">ÿ≠ŸÖŸÑ ŸÜŸÇŸÑ</div>
                    </div>
                    <div class="app-icon" onclick="openApp('repair')">
                        <div style="background: linear-gradient(45deg, #dc2626, #b91c1c);">
                            <i class="fas fa-tools"></i>
                        </div>
                        <div class="app-name">ÿ™ÿπŸÖ€åÿ±⁄ØÿßŸá</div>
                    </div>
                    <div class="app-icon" onclick="openApp('chat')">
                        <div style="background: linear-gradient(45deg, #8b5cf6, #7c3aed);">
                            <i class="fas fa-comments"></i>
                        </div>
                        <div class="app-name">⁄Üÿ™</div>
                    </div>
                    <div class="app-icon" onclick="openApp('laws')">
                        <div style="background: linear-gradient(45deg, #f59e0b, #e67e22);">
                            <i class="fas fa-gavel"></i>
                        </div>
                        <div class="app-name">ŸÇŸàÿßŸÜ€åŸÜ</div>
                    </div>
                    <!-- ÿßŸæ‚ÄåŸáÿß€å ÿ¨ÿØ€åÿØ -->
                    <div class="app-icon" onclick="openApp('library')">
                        <div style="background: linear-gradient(45deg, #10b981, #059669);">
                            <i class="fas fa-book"></i>
                        </div>
                        <div class="app-name">⁄©ÿ™ÿßÿ®ÿÆÿßŸÜŸá</div>
                    </div>
                    <div class="app-icon" onclick="openApp('pharmacy')">
                        <div style="background: linear-gradient(45deg, #ef4444, #dc2626);">
                            <i class="fas fa-pills"></i>
                        </div>
                        <div class="app-name">ÿØÿßÿ±ŸàÿÆÿßŸÜŸá</div>
                    </div>
                    <div class="app-icon" onclick="openApp('realestate')">
                        <div style="background: linear-gradient(45deg, #f59e0b, #d97706);">
                            <i class="fas fa-home"></i>
                        </div>
                        <div class="app-name">ÿßŸÖŸÑÿß⁄©</div>
                    </div>
                    <div class="app-icon" onclick="openApp('onlineshop')">
                        <div style="background: linear-gradient(45deg, #8b5cf6, #7c3aed);">
                            <i class="fas fa-shopping-bag"></i>
                        </div>
                        <div class="app-name">ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá</div>
                    </div>
                    <div class="app-icon" onclick="openApp('internet')">
                        <div style="background: linear-gradient(45deg, #06b6d4, #0891b2);">
                            <i class="fas fa-wifi"></i>
                        </div>
                        <div class="app-name">ÿß€åŸÜÿ™ÿ±ŸÜÿ™</div>
                    </div>
                    <div class="app-icon" onclick="openApp('lawyer')">
                        <div style="background: linear-gradient(45deg, #6b7280, #4b5563);">
                            <i class="fas fa-balance-scale"></i>
                        </div>
                        <div class="app-name">Ÿà⁄©€åŸÑ</div>
                    </div>
                    <div class="app-icon" onclick="openApp('municipality')">
                        <div style="background: linear-gradient(45deg, #dc2626, #b91c1c);">
                            <i class="fas fa-landmark"></i>
                        </div>
                        <div class="app-name">ÿ¥Ÿáÿ±ÿØÿßÿ±€å</div>
                    </div>
                    <div class="app-icon" onclick="openApp('stock')">
                        <div style="background: linear-gradient(45deg, #10b981, #059669);">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="app-name">ÿ®Ÿàÿ±ÿ≥</div>
                    </div>
                    <div class="app-icon" onclick="openApp('cooking')">
                        <div style="background: linear-gradient(45deg, #f59e0b, #e67e22);">
                            <i class="fas fa-utensils"></i>
                        </div>
                        <div class="app-name">ÿ¢ÿ¥Ÿæÿ≤€å</div>
                    </div>
                    <div class="app-icon" onclick="openApp('supermarket')">
                        <div style="background: linear-gradient(45deg, #8b5cf6, #7c3aed);">
                            <i class="fas fa-store"></i>
                        </div>
                        <div class="app-name">ÿ≥ŸàŸæÿ±ŸÖÿßÿ±⁄©ÿ™</div>
                    </div>
                    <div class="app-icon" onclick="openApp('friends')">
                        <div style="background: linear-gradient(45deg, #ec4899, #db2777);">
                            <i class="fas fa-user-friends"></i>
                        </div>
                        <div class="app-name">ÿØŸàÿ≥ÿ™ÿßŸÜ</div>
                    </div>
                    <div class="app-icon" onclick="openApp('training')">
                        <div style="background: linear-gradient(45deg, #f59e0b, #e67e22);">
                            <i class="fas fa-certificate"></i>
                        </div>
                        <div class="app-name">ÿ¢ŸÖŸàÿ≤ÿ¥⁄ØÿßŸá</div>
                    </div>
                    <div class="app-icon" onclick="openApp('trade')">
                        <div style="background: linear-gradient(45deg, #10b981, #059669);">
                            <i class="fas fa-exchange-alt"></i>
                        </div>
                        <div class="app-name">ÿ™ÿ±€åÿØ</div>
                    </div>
                    <div class="app-icon" onclick="openApp('insurance')">
                        <div style="background: linear-gradient(45deg, #06b6d4, #0891b2);">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div class="app-name">ÿ®€åŸÖŸá</div>
                    </div>
                    <div class="app-icon" onclick="openApp('stats')">
                        <div style="background: linear-gradient(45deg, #ec4899, #db2777);">
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <div class="app-name">Ÿàÿ∂ÿπ€åÿ™</div>
                    </div>
                </div>

                <!-- ŸÜŸÇÿ¥Ÿá ÿ¥Ÿáÿ± -->
                <div class="city-map" id="mapApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">üó∫Ô∏è ŸÜŸÇÿ¥Ÿá ÿ¥Ÿáÿ±</h2>
                    <div class="map-grid" id="cityMap">
                        <!-- ŸÖ⁄©ÿßŸÜ‚ÄåŸáÿß ÿ®Ÿá ÿµŸàÿ±ÿ™ ÿØÿß€åŸÜÿßŸÖ€å⁄© -->
                    </div>
                </div>

                <!-- ⁄©ŸàŸÑŸá Ÿæÿ¥ÿ™€å -->
                <div class="backpack" id="backpackApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">üéí ⁄©ŸàŸÑŸá Ÿæÿ¥ÿ™€å ŸÖŸÜ</h2>
                    <div class="backpack-section">
                        <h3>üíº ÿ¥ÿ∫ŸÑ‚ÄåŸáÿß€å ŸÅÿπÿßŸÑ</h3>
                        <div class="items-grid" id="activeJobs">
                            <!-- ÿ¥ÿ∫ŸÑ‚ÄåŸáÿß€å ŸÅÿπÿßŸÑ -->
                        </div>
                    </div>
                    <div class="backpack-section">
                        <h3>üè† ÿßÿ≥ŸÜÿßÿØ ŸÖŸÑ⁄©‚ÄåŸáÿß</h3>
                        <div class="items-grid" id="propertyDeeds">
                            <!-- ÿßÿ≥ŸÜÿßÿØ ŸÖŸÑ⁄© -->
                        </div>
                    </div>
                    <div class="backpack-section">
                        <h3>üöó Ÿàÿ≥ÿß€åŸÑ ŸÜŸÇŸÑ€åŸá</h3>
                        <div class="items-grid" id="vehiclesList">
                            <!-- Ÿàÿ≥ÿß€åŸÑ ŸÜŸÇŸÑ€åŸá -->
                        </div>
                    </div>
                    <div class="backpack-section">
                        <h3>üìÑ ŸÖÿØÿßÿ±⁄© Ÿà ⁄ØŸàÿßŸá€åŸÜÿßŸÖŸá‚ÄåŸáÿß</h3>
                        <div class="items-grid" id="certificatesList">
                            <!-- ŸÖÿØÿßÿ±⁄© -->
                        </div>
                    </div>
                    <div class="backpack-section">
                        <h3>üìö ⁄©ÿ™ÿßÿ®‚ÄåŸáÿß</h3>
                        <div class="items-grid" id="booksList">
                            <!-- ⁄©ÿ™ÿßÿ®‚ÄåŸáÿß -->
                        </div>
                    </div>
                    <div class="backpack-section">
                        <h3>üíä ÿØÿßÿ±ŸàŸáÿß</h3>
                        <div class="items-grid" id="medicinesList">
                            <!-- ÿØÿßÿ±ŸàŸáÿß -->
                        </div>
                    </div>
                    <div class="backpack-section">
                        <h3>üõí ŸÖŸàÿßÿØ ÿ∫ÿ∞ÿß€å€å</h3>
                        <div class="items-grid" id="foodItemsList">
                            <!-- ŸÖŸàÿßÿØ ÿ∫ÿ∞ÿß€å€å -->
                        </div>
                    </div>
                    <div class="backpack-section">
                        <h3>üíª Ÿàÿ≥ÿß€åŸÑ ÿßŸÑ⁄©ÿ™ÿ±ŸàŸÜ€å⁄©€å</h3>
                        <div class="items-grid" id="electronicsList">
                            <!-- Ÿàÿ≥ÿß€åŸÑ ÿßŸÑ⁄©ÿ™ÿ±ŸàŸÜ€å⁄©€å -->
                        </div>
                    </div>
                </div>

                <!-- ÿ®ÿßŸÜ⁄© -->
                <div class="bank-app" id="bankApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">üè¶ ÿ®ÿßŸÜ⁄© ÿ¥Ÿáÿ±</h2>
                    <div class="bank-section">
                        <h3>üí∞ ŸÖŸàÿ¨ŸàÿØ€å ÿ≠ÿ≥ÿßÿ®</h3>
                        <div style="font-size: 1.8em; text-align: center; color: var(--neon); margin: 15px 0;">
                            <span id="bankBalance">2,000</span> ü™ô
                        </div>
                    </div>
                    <div class="bank-section">
                        <h3>üìä ŸàÿßŸÖ‚ÄåŸáÿß€å ŸÅÿπÿßŸÑ</h3>
                        <div id="activeLoans">
                            <!-- ŸàÿßŸÖ‚ÄåŸáÿß€å ŸÅÿπÿßŸÑ -->
                        </div>
                    </div>
                    <div class="bank-section">
                        <h3>üìä ÿ™ÿ±ÿß⁄©ŸÜÿ¥‚ÄåŸáÿß</h3>
                        <div id="transactionsList">
                            <!-- ÿ™ÿ±ÿß⁄©ŸÜÿ¥‚ÄåŸáÿß -->
                        </div>
                    </div>
                    <div class="bank-section">
                        <h3>üí∏ ÿÆÿØŸÖÿßÿ™ ÿ®ÿßŸÜ⁄©€å</h3>
                        <div style="display: flex; gap: 8px;">
                            <button class="btn" onclick="showLoanModal()" style="flex: 1;">
                                ÿØÿ±€åÿßŸÅÿ™ ŸàÿßŸÖ
                            </button>
                            <button class="btn" onclick="payLoan()" style="flex: 1;">
                                Ÿæÿ±ÿØÿßÿÆÿ™ ŸàÿßŸÖ
                            </button>
                        </div>
                    </div>
                </div>

                <!-- ÿ¥ÿ∫ŸÑ‚ÄåŸáÿß -->
                <div class="job-app" id="jobApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">üíº ÿ≥€åÿ≥ÿ™ŸÖ ÿ¥ÿ∫ŸÑ‚ÄåŸáÿß</h2>
                    <div id="jobsContainer">
                        <!-- ⁄©ÿßÿ±ÿ™‚ÄåŸáÿß€å ÿ¥ÿ∫ŸÑ€å -->
                    </div>
                </div>

                <!-- ÿ®ÿßÿ≤ÿßÿ± -->
                <div class="market-app" id="marketApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">üõí ÿ®ÿßÿ≤ÿßÿ± ÿ¥Ÿáÿ±</h2>
                    <div class="bank-section">
                        <h3>üì¢ ÿ¢⁄ØŸá€å‚ÄåŸáÿß€å ŸÅÿπÿßŸÑ</h3>
                        <div id="marketAds">
                            <!-- ÿ¢⁄ØŸá€å‚ÄåŸáÿß -->
                        </div>
                    </div>
                    <div class="bank-section">
                        <h3>‚ûï ÿ´ÿ®ÿ™ ÿ¢⁄ØŸá€å ÿ¨ÿØ€åÿØ</h3>
                        <button class="btn" onclick="showNewAdModal()">
                            ÿ´ÿ®ÿ™ ÿ¢⁄ØŸá€å ÿ¨ÿØ€åÿØ
                        </button>
                    </div>
                </div>

                <!-- ⁄Üÿ™ -->
                <div class="chat-app" id="chatApp">
                    <div class="chat-header">
                        <h3 style="font-size: 0.9em;">üí¨ ⁄Üÿ™ ⁄©ŸÑÿßÿ≥ <span id="chatClassName"></span></h3>
                    </div>
                    <div class="chat-messages" id="chatMessages">
                        <!-- Ÿæ€åÿßŸÖ‚ÄåŸáÿß -->
                    </div>
                    <div class="chat-input">
                        <input type="text" id="messageInput" placeholder="Ÿæ€åÿßŸÖ ÿÆŸàÿØ ÿ±ÿß ÿ®ŸÜŸà€åÿ≥€åÿØ..." onkeypress="handleChatKeypress(event)">
                        <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>

                <!-- ÿ¢ŸÖŸàÿ≤ÿ¥ -->
                <div class="education-app" id="educationApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">üéì ÿ≥€åÿ≥ÿ™ŸÖ ÿ™ÿ≠ÿµ€åŸÑ€å</h2>
                    <div class="bank-section">
                        <h3>üìö ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ÿ™ÿ≠ÿµ€åŸÑ€å</h3>
                        <div id="educationCourses">
                            <!-- ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ÿ™ÿ≠ÿµ€åŸÑ€å -->
                        </div>
                    </div>
                    <div class="bank-section">
                        <h3>üìú ⁄ØŸàÿßŸá€åŸÜÿßŸÖŸá‚ÄåŸáÿß</h3>
                        <div id="licenseOptions">
                            <!-- ⁄Øÿ≤€åŸÜŸá‚ÄåŸáÿß€å ⁄ØŸàÿßŸá€åŸÜÿßŸÖŸá -->
                        </div>
                    </div>
                </div>

                <!-- ŸÇŸàÿßŸÜ€åŸÜ -->
                <div class="law-app" id="lawApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">‚öñÔ∏è ŸÇÿßŸÜŸàŸÜ ÿßÿ≥ÿßÿ≥€å ÿ®ÿßÿ≤€å</h2>
                    <div class="law-section">
                        <h3>üìä ŸÅÿµŸÑ ÿßŸàŸÑ: ÿßŸÇÿ™ÿµÿßÿØ</h3>
                        <p style="font-size: 0.8em;">¬ß1.1: Ÿáÿ± ⁄©ÿßÿ±ÿ®ÿ± ÿ®ÿß 2,000 ÿ≥⁄©Ÿá ÿ¥ÿ±Ÿàÿπ ŸÖ€å‚Äå⁄©ŸÜÿØ</p>
                        <p style="font-size: 0.8em;">¬ß1.2: ÿ≠ŸÇŸàŸÇ Ÿæÿß€åŸá: 500 ÿ≥⁄©Ÿá ÿ±Ÿàÿ≤ÿßŸÜŸá</p>
                        <p style="font-size: 0.8em;">¬ß1.3: ÿπÿØŸÖ Ÿæÿ±ÿØÿßÿÆÿ™ ŸàÿßŸÖ: ÿ≤ŸÜÿØÿßŸÜ 24 ÿ≥ÿßÿπÿ™Ÿá</p>
                    </div>
                    <div class="law-section">
                        <h3>üöó ŸÅÿµŸÑ ÿØŸàŸÖ: ÿ≠ŸÖŸÑ Ÿà ŸÜŸÇŸÑ</h3>
                        <p style="font-size: 0.8em;">¬ß2.1: ⁄ØŸàÿßŸá€åŸÜÿßŸÖŸá ÿ±ÿßŸÜŸÜÿØ⁄Ø€å ÿßÿ¨ÿ®ÿßÿ±€å ÿßÿ≥ÿ™</p>
                        <p style="font-size: 0.8em;">¬ß2.2: ÿ±ÿßŸÜŸÜÿØ⁄Ø€å ÿ®ÿØŸàŸÜ ⁄ØŸàÿßŸá€åŸÜÿßŸÖŸá: ÿ¨ÿ±€åŸÖŸá 2,000 ÿ≥⁄©Ÿá</p>
                    </div>
                    <div class="law-section">
                        <h3>üíº ŸÅÿµŸÑ ÿ≥ŸàŸÖ: ÿ¥ÿ∫ŸÑ</h3>
                        <p style="font-size: 0.8em;">¬ß3.1: Ÿáÿ± ÿ¥ÿ∫ŸÑ ŸÜ€åÿßÿ≤ŸÖŸÜÿØ€å ÿÆÿßÿµ ÿÆŸàÿØ ÿ±ÿß ÿØÿßÿ±ÿØ</p>
                        <p style="font-size: 0.8em;">¬ß3.2: ÿßÿ±ÿ™ŸÇÿßÿ° ÿ¥ÿ∫ŸÑ€å ŸÜ€åÿßÿ≤ ÿ®Ÿá ÿ™ÿ¨ÿ±ÿ®Ÿá ÿØÿßÿ±ÿØ</p>
                    </div>
                    <div class="bank-section">
                        <h3>üìñ ⁄©ÿ™ÿßÿ® ÿ±ÿßŸáŸÜŸÖÿß€å ⁄©ÿßŸÖŸÑ ÿ®ÿßÿ≤€å</h3>
                        <button class="btn" onclick="buyGameGuide()">
                            ÿÆÿ±€åÿØ ⁄©ÿ™ÿßÿ® ÿ±ÿßŸáŸÜŸÖÿß - 500 ÿ≥⁄©Ÿá
                        </button>
                    </div>
                </div>

                <!-- ÿ≥€åÿ≥ÿ™ŸÖ ÿ≠ŸÖŸÑ ŸÜŸÇŸÑ -->
                <div class="transport-app" id="transportApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">üöó ÿ≥€åÿ≥ÿ™ŸÖ ÿ≠ŸÖŸÑ ŸÜŸÇŸÑ</h2>
                    <div id="vehiclesContainer">
                        <!-- Ÿàÿ≥ÿß€åŸÑ ŸÜŸÇŸÑ€åŸá -->
                    </div>
                </div>

                <!-- ÿ™ÿπŸÖ€åÿ±⁄ØÿßŸá -->
                <div class="repair-shop" id="repairShop">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">üîß ÿ™ÿπŸÖ€åÿ±⁄ØÿßŸá ÿ¥Ÿáÿ±</h2>
                    <div id="repairContainer">
                        <!-- Ÿàÿ∂ÿπ€åÿ™ Ÿàÿ≥ÿß€åŸÑ ŸÜŸÇŸÑ€åŸá -->
                    </div>
                </div>

                <!-- ÿßŸæ‚ÄåŸáÿß€å ÿ¨ÿØ€åÿØ -->

                <!-- ⁄©ÿ™ÿßÿ®ÿÆÿßŸÜŸá -->
                <div class="library-app" id="libraryApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">üìö ⁄©ÿ™ÿßÿ®ÿÆÿßŸÜŸá ÿ¥Ÿáÿ±</h2>
                    <div class="bank-section">
                        <h3>üìñ ⁄©ÿ™ÿßÿ®‚ÄåŸáÿß€å ÿ¢ŸÖŸàÿ≤ÿ¥€å</h3>
                        <div id="libraryBooks">
                            <!-- ⁄©ÿ™ÿßÿ®‚ÄåŸáÿß -->
                        </div>
                    </div>
                </div>

                <!-- ÿØÿßÿ±ŸàÿÆÿßŸÜŸá -->
                <div class="pharmacy-app" id="pharmacyApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">üíä ÿØÿßÿ±ŸàÿÆÿßŸÜŸá ÿ¥Ÿáÿ±</h2>
                    <div class="bank-section">
                        <h3>üß™ ÿØÿßÿ±ŸàŸáÿß Ÿà ŸÖ⁄©ŸÖŸÑ‚ÄåŸáÿß</h3>
                        <div id="pharmacyItems">
                            <!-- ÿØÿßÿ±ŸàŸáÿß -->
                        </div>
                    </div>
                </div>

                <!-- ÿßŸÖŸÑÿß⁄© -->
                <div class="realestate-app" id="realestateApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">üèòÔ∏è ÿØŸÅÿ™ÿ± ÿßŸÖŸÑÿß⁄©</h2>
                    <div class="bank-section">
                        <h3>üè† ŸÖŸÑ⁄©‚ÄåŸáÿß€å ÿ®ÿ±ÿß€å ŸÅÿ±Ÿàÿ¥</h3>
                        <div id="propertiesForSale">
                            <!-- ŸÖŸÑ⁄©‚ÄåŸáÿß -->
                        </div>
                    </div>
                    <div class="bank-section">
                        <h3>üè° ŸÖŸÑ⁄©‚ÄåŸáÿß€å ÿ¥ŸÖÿß</h3>
                        <div id="userProperties">
                            <!-- ŸÖŸÑ⁄©‚ÄåŸáÿß€å ⁄©ÿßÿ±ÿ®ÿ± -->
                        </div>
                    </div>
                </div>

                <!-- ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá ÿ¢ŸÜŸÑÿß€åŸÜ -->
                <div class="onlineshop-app" id="onlineshopApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">üõí ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá ÿ¢ŸÜŸÑÿß€åŸÜ</h2>
                    <div class="bank-section">
                        <h3>üì¶ ŸÖÿ≠ÿµŸàŸÑÿßÿ™ Ÿà€å⁄òŸá</h3>
                        <div id="onlineProducts">
                            <!-- ŸÖÿ≠ÿµŸàŸÑÿßÿ™ -->
                        </div>
                    </div>
                </div>

                <!-- ÿß€åŸÜÿ™ÿ±ŸÜÿ™ -->
                <div class="internet-app" id="internetApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">üì° ÿßŸæÿ±ÿßÿ™Ÿàÿ± ÿß€åŸÜÿ™ÿ±ŸÜÿ™</h2>
                    <div class="bank-section">
                        <h3>üåê ÿ®ÿ≥ÿ™Ÿá‚ÄåŸáÿß€å ÿß€åŸÜÿ™ÿ±ŸÜÿ™</h3>
                        <div id="internetPackages">
                            <!-- ÿ®ÿ≥ÿ™Ÿá‚ÄåŸáÿß -->
                        </div>
                    </div>
                    <div class="bank-section">
                        <h3>üìä Ÿàÿ∂ÿπ€åÿ™ ÿß€åŸÜÿ™ÿ±ŸÜÿ™ ÿ¥ŸÖÿß</h3>
                        <div id="internetStatusInfo">
                            <!-- Ÿàÿ∂ÿπ€åÿ™ -->
                        </div>
                    </div>
                </div>

                <!-- Ÿà⁄©€åŸÑ -->
                <div class="lawyer-app" id="lawyerApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">‚öñÔ∏è ÿØŸÅÿ™ÿ± Ÿà⁄©ÿßŸÑÿ™</h2>
                    <div class="bank-section">
                        <h3>üë®‚Äçüíº ÿÆÿØŸÖÿßÿ™ ÿ≠ŸÇŸàŸÇ€å</h3>
                        <div id="lawyerServices">
                            <!-- ÿÆÿØŸÖÿßÿ™ -->
                        </div>
                    </div>
                </div>

                <!-- ÿ¥Ÿáÿ±ÿØÿßÿ±€å -->
                <div class="municipality-app" id="municipalityApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">üèõÔ∏è ÿ¥Ÿáÿ±ÿØÿßÿ±€å</h2>
                    <div class="bank-section">
                        <h3>üìã ŸÇÿ®Ÿàÿ∂ ÿ¥ŸÖÿß</h3>
                        <div id="userBills">
                            <!-- ŸÇÿ®Ÿàÿ∂ -->
                        </div>
                    </div>
                </div>

                <!-- ÿ®Ÿàÿ±ÿ≥ -->
                <div class="stock-app" id="stockApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">üìà ÿ®Ÿàÿ±ÿ≥ ÿ¥Ÿáÿ±</h2>
                    <div class="bank-section">
                        <h3>üíπ ÿ≥ŸáÿßŸÖ‚ÄåŸáÿß€å ŸÖŸàÿ¨ŸàÿØ</h3>
                        <div id="stocksList">
                            <!-- ÿ≥ŸáÿßŸÖ‚ÄåŸáÿß -->
                        </div>
                    </div>
                </div>

                <!-- ÿ¢ÿ¥Ÿæÿ≤€å -->
                <div class="cooking-app" id="cookingApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">üë®‚Äçüç≥ ÿ¢ÿ¥Ÿæÿ≤ÿÆÿßŸÜŸá</h2>
                    <div class="bank-section">
                        <h3>üç≥ ÿ∫ÿ∞ÿßŸáÿß€å ŸÇÿßÿ®ŸÑ ŸæÿÆÿ™</h3>
                        <div id="cookingRecipes">
                            <!-- ÿØÿ≥ÿ™Ÿàÿ±Ÿáÿß -->
                        </div>
                    </div>
                </div>

                <!-- ÿ≥ŸàŸæÿ±ŸÖÿßÿ±⁄©ÿ™ -->
                <div class="supermarket-app" id="supermarketApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">üõí ÿ≥ŸàŸæÿ±ŸÖÿßÿ±⁄©ÿ™</h2>
                    <div class="bank-section">
                        <h3>ü•¶ ŸÖŸàÿßÿØ ÿ∫ÿ∞ÿß€å€å</h3>
                        <div id="supermarketItems">
                            <!-- ŸÖŸàÿßÿØ ÿ∫ÿ∞ÿß€å€å -->
                        </div>
                    </div>
                </div>

                <!-- ÿØŸàÿ≥ÿ™ÿßŸÜ -->
                <div class="friends-app" id="friendsApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">üë• ÿ≥€åÿ≥ÿ™ŸÖ ÿØŸàÿ≥ÿ™ÿßŸÜ</h2>
                    <div class="bank-section">
                        <h3>ü§ù ÿØŸàÿ≥ÿ™ÿßŸÜ ÿ¥ŸÖÿß</h3>
                        <div id="friendsList">
                            <!-- ŸÑ€åÿ≥ÿ™ ÿØŸàÿ≥ÿ™ÿßŸÜ -->
                        </div>
                    </div>
                    <div class="bank-section">
                        <h3>üîç Ÿæ€åÿØÿß ⁄©ÿ±ÿØŸÜ ÿØŸàÿ≥ÿ™ÿßŸÜ ÿ¨ÿØ€åÿØ</h3>
                        <button class="btn" onclick="findNewFriends()">
                            Ÿæ€åÿØÿß ⁄©ÿ±ÿØŸÜ ÿØŸàÿ≥ÿ™ÿßŸÜ ÿ¨ÿØ€åÿØ
                        </button>
                    </div>
                </div>

                <!-- ÿ¢ŸÖŸàÿ≤ÿ¥⁄ØÿßŸá -->
                <div class="training-app" id="trainingApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">üéì ÿ¢ŸÖŸàÿ≤ÿ¥⁄ØÿßŸá ÿ™ÿÆÿµÿµ€å</h2>
                    <div class="bank-section">
                        <h3>üìú ÿØŸàÿ±Ÿá‚ÄåŸáÿß€å ÿ™ÿÆÿµÿµ€å</h3>
                        <div id="trainingCourses">
                            <!-- ÿØŸàÿ±Ÿá‚ÄåŸáÿß -->
                        </div>
                    </div>
                </div>

                <!-- ÿ™ÿ±€åÿØ -->
                <div class="trade-app" id="tradeApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">üíπ ÿ≥€åÿ≥ÿ™ŸÖ ÿ™ÿ±€åÿØ</h2>
                    <div class="bank-section">
                        <h3>üìä ÿ®ÿßÿ≤ÿßÿ± ÿ™ÿ±€åÿØ</h3>
                        <div id="tradeMarket">
                            <!-- ÿ®ÿßÿ≤ÿßÿ± ÿ™ÿ±€åÿØ -->
                        </div>
                    </div>
                    <div class="bank-section">
                        <h3>üíº ÿØÿßÿ±ÿß€å€å‚ÄåŸáÿß€å ÿ¥ŸÖÿß</h3>
                        <div id="userAssets">
                            <!-- ÿØÿßÿ±ÿß€å€å‚ÄåŸáÿß -->
                        </div>
                    </div>
                    <div class="bank-section">
                        <h3>üìà ⁄Øÿ≤ÿßÿ±ÿ¥ ÿ≥ŸàÿØ Ÿà ÿ∂ÿ±ÿ±</h3>
                        <div id="profitLossReport">
                            <!-- ⁄Øÿ≤ÿßÿ±ÿ¥ -->
                        </div>
                    </div>
                </div>

                <!-- ÿ®€åŸÖŸá -->
                <div class="insurance-app" id="insuranceApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">üõ°Ô∏è ÿ¥ÿ±⁄©ÿ™ ÿ®€åŸÖŸá</h2>
                    <div class="bank-section">
                        <h3>üìã ÿ®€åŸÖŸá‚ÄåŸáÿß€å ŸÅÿπÿßŸÑ</h3>
                        <div id="activeInsurances">
                            <!-- ÿ®€åŸÖŸá‚ÄåŸáÿß€å ŸÅÿπÿßŸÑ -->
                        </div>
                    </div>
                    <div class="bank-section">
                        <h3>üíº ÿ®€åŸÖŸá‚ÄåŸáÿß€å ŸÇÿßÿ®ŸÑ ÿÆÿ±€åÿØ</h3>
                        <div id="insurancePolicies">
                            <!-- ÿ®€åŸÖŸá‚ÄåŸáÿß -->
                        </div>
                    </div>
                </div>

                <!-- ÿÆÿßŸÜŸá -->
                <div class="home-app" id="homeApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">üè† ÿÆÿßŸÜŸá ÿ¥ŸÖÿß</h2>
                    <div id="homeFeatures">
                        <!-- ÿßŸÖ⁄©ÿßŸÜÿßÿ™ ÿÆÿßŸÜŸá -->
                    </div>
                </div>

                <!-- ŸÜŸÖŸàÿØÿßÿ± Ÿàÿ∂ÿπ€åÿ™ -->
                <div class="stats-app" id="statsApp">
                    <h2 style="color: var(--neon); text-align: center; margin-bottom: 15px; font-size: 1.1em;">üìä ŸÜŸÖŸàÿØÿßÿ± Ÿàÿ∂ÿπ€åÿ™</h2>
                    <div class="stats-container">
                        <div class="stat-chart">
                            <h3 class="stat-title">ÿ≥ŸÑÿßŸÖÿ™</h3>
                            <div class="chart-bar">
                                <div class="chart-fill health-fill" id="healthChart" style="width: 100%"></div>
                                <div class="chart-label">ÿ≥ŸÑÿßŸÖÿ™</div>
                                <div class="chart-value" id="healthValue">100%</div>
                            </div>
                        </div>
                        
                        <div class="stat-chart">
                            <h3 class="stat-title">ÿßŸÜÿ±⁄ò€å</h3>
                            <div class="chart-bar">
                                <div class="chart-fill energy-fill" id="energyChart" style="width: 100%"></div>
                                <div class="chart-label">ÿßŸÜÿ±⁄ò€å</div>
                                <div class="chart-value" id="energyValue">100%</div>
                            </div>
                        </div>
                        
                        <div class="stat-chart">
                            <h3 class="stat-title">⁄Øÿ±ÿ≥ŸÜ⁄Ø€å</h3>
                            <div class="chart-bar">
                                <div class="chart-fill hunger-fill" id="hungerChart" style="width: 0%"></div>
                                <div class="chart-label">⁄Øÿ±ÿ≥ŸÜ⁄Ø€å</div>
                                <div class="chart-value" id="hungerValue">0%</div>
                            </div>
                        </div>
                        
                        <div class="stat-chart">
                            <h3 class="stat-title">ŸáŸàÿ¥</h3>
                            <div class="chart-bar">
                                <div class="chart-fill intelligence-fill" id="intelligenceChart" style="width: 0%"></div>
                                <div class="chart-label">ŸáŸàÿ¥</div>
                                <div class="chart-value" id="intelligenceValue">0%</div>
                            </div>
                        </div>
                        
                        <div class="stat-details">
                            <div class="stat-box">
                                <h4>ÿ≥⁄©Ÿá‚ÄåŸáÿß</h4>
                                <p id="statsCoins">2,000 ü™ô</p>
                            </div>
                            <div class="stat-box">
                                <h4>ŸÖŸÑ⁄©‚ÄåŸáÿß</h4>
                                <p id="statsProperties">0</p>
                            </div>
                            <div class="stat-box">
                                <h4>Ÿàÿ≥ÿß€åŸÑ ŸÜŸÇŸÑ€åŸá</h4>
                                <p id="statsVehicles">0</p>
                            </div>
                            <div class="stat-box">
                                <h4>⁄ØŸàÿßŸá€åŸÜÿßŸÖŸá‚ÄåŸáÿß</h4>
                                <p id="statsCertificates">0</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÿµŸÅÿ≠Ÿá ÿ≥ŸÅÿ± -->
        <div class="travel-screen" id="travelScreen">
            <div id="travelIcon" style="font-size: 3em; margin-bottom: 15px;">üöó</div>
            <div id="travelDestination" style="font-size: 1.3em; margin-bottom: 8px;">ŸÖŸÇÿµÿØ: ...</div>
            <div class="travel-timer" id="travelTimer">00:00</div>
            <div class="progress-bar">
                <div class="progress-fill" id="travelProgress" style="width: 0%"></div>
            </div>
            <div id="travelMethod" style="margin-top: 8px; color: #ccc; font-size: 0.9em;">ÿ±Ÿàÿ¥: ...</div>
            <button class="btn btn-danger" onclick="cancelTravel()" style="margin-top: 15px; padding: 10px;">
                <i class="fas fa-times"></i> ŸÑÿ∫Ÿà ÿ≥ŸÅÿ±
            </button>
        </div>

        <!-- ÿµŸÅÿ≠Ÿá ÿ≤ŸÜÿØÿßŸÜ -->
        <div class="jail-screen" id="jailScreen">
            <h1>‚õìÔ∏è ÿ≤ŸÜÿØÿßŸÜ ÿ¥Ÿáÿ±</h1>
            <div style="font-size: 1em; margin-bottom: 15px;">
                <p id="jailReason">ÿ®Ÿá ÿØŸÑ€åŸÑ ÿπÿØŸÖ Ÿæÿ±ÿØÿßÿÆÿ™ ŸàÿßŸÖ ÿ®Ÿá ÿ≤ŸÜÿØÿßŸÜ ÿßŸÅÿ™ÿßÿØŸá‚Äåÿß€åÿØ!</p>
                <p>ÿ®ÿß€åÿØ ŸÖŸÜÿ™ÿ∏ÿ± ÿ®ŸÖÿßŸÜ€åÿØ ÿ™ÿß ŸÖÿØÿ™ ÿ≤ŸÖÿßŸÜ ÿ≤ŸÜÿØÿßŸÜ ÿ™ŸÖÿßŸÖ ÿ¥ŸàÿØ</p>
            </div>
            <div class="jail-timer" id="jailTimer">24:00:00</div>
            <div style="color: #ccc; margin-top: 15px; font-size: 0.9em;">
                <p>‚è∞ ÿ≤ŸÖÿßŸÜ ÿ®ÿßŸÇ€å‚ÄåŸÖÿßŸÜÿØŸá:</p>
            </div>
            <div id="jailWorkOptions" style="margin-top: 20px;">
                <button class="btn" onclick="startJailWork()" style="margin: 5px;">
                    ⁄©ÿßÿ± ÿØÿ± ÿ≤ŸÜÿØÿßŸÜ (100 ÿ≥⁄©Ÿá)
                </button>
                <button class="btn btn-warning" onclick="hireLawyerFromJail()" style="margin: 5px;">
                    ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ Ÿà⁄©€åŸÑ (5,000 ÿ≥⁄©Ÿá)
                </button>
            </div>
        </div>

        <!-- ÿµŸÅÿ≠Ÿá ÿ™ÿ≠Ÿà€åŸÑ -->
        <div class="delivery-screen" id="deliveryScreen">
            <div style="font-size: 3em; margin-bottom: 15px;">üì¶</div>
            <div style="font-size: 1.3em; margin-bottom: 8px;" id="deliveryItem">ÿØÿ± ÿ≠ÿßŸÑ ÿ™ÿ≠Ÿà€åŸÑ: ...</div>
            <div class="travel-timer" id="deliveryTimer">02:00:00</div>
            <div class="progress-bar">
                <div class="progress-fill" id="deliveryProgress" style="width: 0%"></div>
            </div>
            <div style="margin-top: 8px; color: #ccc; font-size: 0.9em;">ÿ≤ŸÖÿßŸÜ ÿ®ÿßŸÇ€å‚ÄåŸÖÿßŸÜÿØŸá ÿ™ÿß ÿ™ÿ≠Ÿà€åŸÑ</div>
            <button class="btn" onclick="closeDeliveryScreen()" style="margin-top: 15px; padding: 10px;">
                ÿ®ÿ≥ÿ™ŸÜ (ÿ™ÿ≠Ÿà€åŸÑ ÿØÿ± Ÿæÿ≥‚Äåÿ≤ŸÖ€åŸÜŸá ÿßÿØÿßŸÖŸá ŸÖ€å‚Äå€åÿßÿ®ÿØ)
            </button>
        </div>

        <!-- ÿµŸÅÿ≠Ÿá ÿÆŸàÿßÿ® -->
        <div class="travel-screen" id="sleepScreen">
            <div style="font-size: 3em; margin-bottom: 15px;">üí§</div>
            <div style="font-size: 1.3em; margin-bottom: 8px;">ÿØÿ± ÿ≠ÿßŸÑ ÿÆŸàÿßÿ®€åÿØŸÜ...</div>
            <div class="travel-timer" id="sleepTimer">08:00:00</div>
            <div class="progress-bar">
                <div class="progress-fill" id="sleepProgress" style="width: 0%"></div>
            </div>
            <div style="margin-top: 8px; color: #ccc; font-size: 0.9em;">ÿµÿ®ÿ≠ ÿ≥ÿßÿπÿ™ €∑ ÿ®€åÿØÿßÿ± ŸÖ€å‚Äåÿ¥Ÿà€åÿØ</div>
            <button class="btn btn-danger" onclick="cancelSleep()" style="margin-top: 15px; padding: 10px;">
                <i class="fas fa-times"></i> ÿ®€åÿØÿßÿ± ÿ¥ÿØŸÜ
            </button>
        </div>

        <!-- ÿµŸÅÿ≠Ÿá Ÿæÿß€åÿßŸÜ ÿ®ÿßÿ≤€å -->
        <div class="game-over-screen" id="gameOverScreen">
            <h1 class="game-over-title" id="gameOverTitle">Ÿæÿß€åÿßŸÜ ÿ®ÿßÿ≤€å</h1>
            <div class="game-over-reason" id="gameOverReason">
                ÿ®ÿßÿ≤€å ÿ®Ÿá Ÿæÿß€åÿßŸÜ ÿ±ÿ≥€åÿØ!
            </div>
            <div class="game-over-stats" id="gameOverStats">
                <!-- ÿ¢ŸÖÿßÿ± ÿ®ÿßÿ≤€å -->
            </div>
            <button class="btn btn-success" onclick="restartGame()" style="padding: 12px 24px; font-size: 1.1em;">
                <i class="fas fa-redo"></i> ÿ¥ÿ±Ÿàÿπ ŸÖÿ¨ÿØÿØ ÿ®ÿßÿ≤€å
            </button>
        </div>

        <!-- ŸÜŸàÿßÿ± Ÿæÿß€å€åŸÜ -->
        <div class="bottom-nav">
            <div class="nav-btn active" onclick="showScreen('home')">
                <i class="fas fa-home"></i>
                <span>ÿÆÿßŸÜŸá</span>
            </div>
            <div class="nav-btn" onclick="openApp('map')">
                <i class="fas fa-map"></i>
                <span>ÿ¥Ÿáÿ±</span>
            </div>
            <div class="nav-btn" onclick="openApp('jobs')">
                <i class="fas fa-briefcase"></i>
                <span>ÿ¥ÿ∫ŸÑ</span>
            </div>
            <div class="nav-btn" onclick="openApp('bank')">
                <i class="fas fa-university"></i>
                <span>ÿ®ÿßŸÜ⁄©</span>
            </div>
            <div class="nav-btn" onclick="openApp('backpack')">
                <i class="fas fa-backpack"></i>
                <span>⁄©ŸàŸÑŸá‚ÄåŸæÿ¥ÿ™€å</span>
            </div>
            <div class="nav-btn" onclick="openApp('stats')">
                <i class="fas fa-chart-pie"></i>
                <span>Ÿàÿ∂ÿπ€åÿ™</span>
            </div>
        </div>
    </div>

    <script>
        // ==================== ÿØÿßÿØŸá‚ÄåŸáÿß€å ⁄©ÿßŸÖŸÑ ÿ®ÿßÿ≤€å ====================
        const gameData = {
            currentUser: null,
            gameTime: 8 * 60, // 08:00 ÿ®Ÿá ÿØŸÇ€åŸÇŸá
            isNight: false,
            currentTravel: null,
            isInJail: false,
            jailTimeLeft: 0,
            jailReason: "",
            currentDelivery: null,
            internetPackage: null,
            internetExpiry: null,
            internetDataLeft: 0,
            gameSpeed: 60, // 1 ÿØŸÇ€åŸÇŸá ŸàÿßŸÇÿπ€å = 1 ÿ≥ÿßÿπÿ™ ÿ®ÿßÿ≤€å
            currentSeason: 'spring',
            hasGameGuide: false,
            activeInsurances: [],
            randomEvents: [],
            isSleeping: false,
            gameOver: false,
            crimes: 0,
            
            // ŸÖ⁄©ÿßŸÜ‚ÄåŸáÿß€å ÿ¥Ÿáÿ±
            locations: [
                { 
                    id: 'school', 
                    name: 'ŸÖÿØÿ±ÿ≥Ÿá ÿØ⁄©ÿ™ÿ± ÿ≠ÿ≥ÿßÿ®€å', 
                    icon: 'üè´', 
                    distance: 0, 
                    type: 'education',
                    actions: ['ÿ™ÿ≠ÿµ€åŸÑ', '⁄©ÿßÿ± ÿØÿ± ŸÖÿØÿ±ÿ≥Ÿá']
                },
                { 
                    id: 'restaurant', 
                    name: 'ÿ±ÿ≥ÿ™Ÿàÿ±ÿßŸÜ', 
                    icon: 'üçï', 
                    distance: 5, 
                    type: 'food',
                    actions: ['ÿ∫ÿ∞ÿß ÿÆŸàÿ±ÿØŸÜ', '⁄©ÿßÿ± ÿØÿ± ÿ±ÿ≥ÿ™Ÿàÿ±ÿßŸÜ'],
                    cost: 500
                },
                { 
                    id: 'cafe', 
                    name: '⁄©ÿßŸÅŸá', 
                    icon: '‚òï', 
                    distance: 4, 
                    type: 'food',
                    actions: ['ŸÜŸàÿ¥€åÿØŸÜ€å', '⁄©ÿßÿ± ÿØÿ± ⁄©ÿßŸÅŸá'],
                    cost: 300
                },
                { 
                    id: 'supermarket', 
                    name: 'ÿ≥ŸàŸæÿ±ŸÖÿßÿ±⁄©ÿ™', 
                    icon: 'üõí', 
                    distance: 8, 
                    type: 'market',
                    actions: ['ÿÆÿ±€åÿØ ŸÖŸàÿßÿØ ÿ∫ÿ∞ÿß€å€å', '⁄©ÿßÿ± ÿØÿ± ÿ≥ŸàŸæÿ±ŸÖÿßÿ±⁄©ÿ™']
                },
                { 
                    id: 'carShop', 
                    name: 'ŸÜŸÖÿß€åÿ¥⁄ØÿßŸá ŸÖÿßÿ¥€åŸÜ', 
                    icon: 'üöó', 
                    distance: 12, 
                    type: 'transport',
                    actions: ['ÿÆÿ±€åÿØ Ÿàÿ≥€åŸÑŸá ŸÜŸÇŸÑ€åŸá']
                },
                { 
                    id: 'bank', 
                    name: 'ÿ®ÿßŸÜ⁄©', 
                    icon: 'üè¶', 
                    distance: 6, 
                    type: 'service',
                    actions: ['ÿÆÿØŸÖÿßÿ™ ÿ®ÿßŸÜ⁄©€å', '⁄©ÿßÿ± ÿØÿ± ÿ®ÿßŸÜ⁄©']
                },
                { 
                    id: 'gasStation', 
                    name: 'ŸæŸÖŸæ ÿ®ŸÜÿ≤€åŸÜ', 
                    icon: '‚õΩ', 
                    distance: 10, 
                    type: 'service',
                    actions: ['ÿ≥ŸàÿÆÿ™ ⁄Ø€åÿ±€å', '⁄©ÿßÿ± ÿØÿ± ŸæŸÖŸæ ÿ®ŸÜÿ≤€åŸÜ'],
                    cost: 1000
                },
                { 
                    id: 'drivingSchool', 
                    name: 'ÿ¢ŸÖŸàÿ≤ÿ¥ ÿ±ÿßŸÜŸÜÿØ⁄Ø€å', 
                    icon: 'üö¶', 
                    distance: 7, 
                    type: 'education',
                    actions: ['ÿ¢ŸÖŸàÿ≤ÿ¥ ÿ±ÿßŸÜŸÜÿØ⁄Ø€å']
                },
                { 
                    id: 'repairShop', 
                    name: 'ÿ™ÿπŸÖ€åÿ±⁄ØÿßŸá', 
                    icon: 'üîß', 
                    distance: 9, 
                    type: 'service',
                    actions: ['ÿ™ÿπŸÖ€åÿ± Ÿàÿ≥€åŸÑŸá ŸÜŸÇŸÑ€åŸá', '⁄©ÿßÿ± ÿØÿ± ÿ™ÿπŸÖ€åÿ±⁄ØÿßŸá']
                },
                { 
                    id: 'apartments', 
                    name: 'ŸÖÿ¨ÿ™ŸÖÿπ ŸÖÿ≥⁄©ŸàŸÜ€å', 
                    icon: 'üè¢', 
                    distance: 3, 
                    type: 'property',
                    actions: ['ÿÆÿ±€åÿØ ŸÖŸÑ⁄©']
                },
                { 
                    id: 'mall', 
                    name: 'ŸÖÿ±⁄©ÿ≤ ÿÆÿ±€åÿØ', 
                    icon: 'üè¨', 
                    distance: 9, 
                    type: 'market',
                    actions: ['ÿÆÿ±€åÿØ ÿßÿ¨ŸÜÿßÿ≥', '⁄©ÿßÿ± ÿØÿ± ŸÖÿ±⁄©ÿ≤ ÿÆÿ±€åÿØ']
                },
                { 
                    id: 'hospital', 
                    name: 'ÿ®€åŸÖÿßÿ±ÿ≥ÿ™ÿßŸÜ', 
                    icon: 'üè•', 
                    distance: 8, 
                    type: 'service',
                    actions: ['ÿØÿ±ŸÖÿßŸÜ', '⁄©ÿßÿ± ÿØÿ± ÿ®€åŸÖÿßÿ±ÿ≥ÿ™ÿßŸÜ'],
                    cost: 2000
                },
                { 
                    id: 'police', 
                    name: '⁄©ŸÑÿßŸÜÿ™ÿ±€å', 
                    icon: 'üöì', 
                    distance: 7, 
                    type: 'service',
                    actions: ['ÿ¢ÿ≤ÿßÿØ€å ÿßÿ≤ ÿ≤ŸÜÿØÿßŸÜ']
                },
                { 
                    id: 'library', 
                    name: '⁄©ÿ™ÿßÿ®ÿÆÿßŸÜŸá', 
                    icon: 'üìö', 
                    distance: 6, 
                    type: 'education',
                    actions: ['ÿÆÿ±€åÿØ ⁄©ÿ™ÿßÿ®']
                },
                { 
                    id: 'pharmacy', 
                    name: 'ÿØÿßÿ±ŸàÿÆÿßŸÜŸá', 
                    icon: 'üíä', 
                    distance: 5, 
                    type: 'service',
                    actions: ['ÿÆÿ±€åÿØ ÿØÿßÿ±Ÿà']
                },
                { 
                    id: 'realestate', 
                    name: 'ÿØŸÅÿ™ÿ± ÿßŸÖŸÑÿß⁄©', 
                    icon: 'üèòÔ∏è', 
                    distance: 4, 
                    type: 'property',
                    actions: ['ÿÆÿ±€åÿØ Ÿà ŸÅÿ±Ÿàÿ¥ ŸÖŸÑ⁄©']
                },
                { 
                    id: 'onlineshop', 
                    name: 'ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá ÿ¢ŸÜŸÑÿß€åŸÜ', 
                    icon: 'üõí', 
                    distance: 0, 
                    type: 'market',
                    actions: ['ÿÆÿ±€åÿØ ÿ¢ŸÜŸÑÿß€åŸÜ']
                },
                { 
                    id: 'internet', 
                    name: 'ÿßŸæÿ±ÿßÿ™Ÿàÿ± ÿß€åŸÜÿ™ÿ±ŸÜÿ™', 
                    icon: 'üì°', 
                    distance: 3, 
                    type: 'service',
                    actions: ['ÿÆÿ±€åÿØ ÿ®ÿ≥ÿ™Ÿá ÿß€åŸÜÿ™ÿ±ŸÜÿ™']
                },
                { 
                    id: 'lawyer', 
                    name: 'ÿØŸÅÿ™ÿ± Ÿà⁄©ÿßŸÑÿ™', 
                    icon: '‚öñÔ∏è', 
                    distance: 5, 
                    type: 'service',
                    actions: ['ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ Ÿà⁄©€åŸÑ']
                },
                { 
                    id: 'municipality', 
                    name: 'ÿ¥Ÿáÿ±ÿØÿßÿ±€å', 
                    icon: 'üèõÔ∏è', 
                    distance: 4, 
                    type: 'service',
                    actions: ['Ÿæÿ±ÿØÿßÿÆÿ™ ŸÇÿ®Ÿàÿ∂']
                },
                { 
                    id: 'stock', 
                    name: 'ÿ®Ÿàÿ±ÿ≥', 
                    icon: 'üìà', 
                    distance: 8, 
                    type: 'finance',
                    actions: ['ÿÆÿ±€åÿØ Ÿà ŸÅÿ±Ÿàÿ¥ ÿ≥ŸáÿßŸÖ']
                },
                { 
                    id: 'amusementPark', 
                    name: 'Ÿæÿßÿ±⁄© ÿ™ŸÅÿ±€åÿ≠€å', 
                    icon: 'üé°', 
                    distance: 15, 
                    type: 'entertainment',
                    actions: ['ÿ™ŸÅÿ±€åÿ≠', '⁄©ÿßÿ± ÿØÿ± Ÿæÿßÿ±⁄©']
                },
                { 
                    id: 'cinema', 
                    name: 'ÿ≥€åŸÜŸÖÿß', 
                    icon: 'üé¨', 
                    distance: 8, 
                    type: 'entertainment',
                    actions: ['ÿ™ŸÖÿßÿ¥ÿß€å ŸÅ€åŸÑŸÖ', '⁄©ÿßÿ± ÿØÿ± ÿ≥€åŸÜŸÖÿß']
                },
                { 
                    id: 'stadium', 
                    name: 'ÿßÿ≥ÿ™ÿßÿØ€åŸàŸÖ', 
                    icon: '‚öΩ', 
                    distance: 12, 
                    type: 'sports',
                    actions: ['Ÿàÿ±ÿ≤ÿ¥', '⁄©ÿßÿ± ÿØÿ± ÿßÿ≥ÿ™ÿßÿØ€åŸàŸÖ']
                },
                { 
                    id: 'trainingCenter', 
                    name: 'ÿ¢ŸÖŸàÿ≤ÿ¥⁄ØÿßŸá ÿ™ÿÆÿµÿµ€å', 
                    icon: 'üéì', 
                    distance: 6, 
                    type: 'education',
                    actions: ['ÿ¢ŸÖŸàÿ≤ÿ¥ ÿ™ÿÆÿµÿµ€å']
                },
                { 
                    id: 'insuranceOffice', 
                    name: 'ÿØŸÅÿ™ÿ± ÿ®€åŸÖŸá', 
                    icon: 'üõ°Ô∏è', 
                    distance: 5, 
                    type: 'service',
                    actions: ['ÿÆÿ±€åÿØ ÿ®€åŸÖŸá']
                },
                { 
                    id: 'electronicsStore', 
                    name: 'ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá ÿßŸÑ⁄©ÿ™ÿ±ŸàŸÜ€å⁄©', 
                    icon: 'üíª', 
                    distance: 7, 
                    type: 'market',
                    actions: ['ÿÆÿ±€åÿØ Ÿàÿ≥ÿß€åŸÑ ÿßŸÑ⁄©ÿ™ÿ±ŸàŸÜ€å⁄©€å']
                }
            ],

            // ÿ¥ÿ∫ŸÑ‚ÄåŸáÿß
            jobs: [
                // ÿ¥ÿ∫ŸÑ‚ÄåŸáÿß€å Ÿæÿßÿ±Ÿá‚ÄåŸàŸÇÿ™ (ÿ®ÿØŸàŸÜ ŸÖÿØÿ±⁄©)
                {
                    id: 1,
                    name: 'Ÿæ€å⁄© ŸÖŸàÿ™Ÿàÿ±€å',
                    location: 'city',
                    icon: 'üèçÔ∏è',
                    type: 'delivery',
                    salary: 300,
                    requirement: [],
                    energyCost: 15,
                    timeRequired: 10,
                    cooldown: 15,
                    workType: 'part-time'
                },
                {
                    id: 2,
                    name: 'ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá ÿØŸàÿ±Ÿá‚Äå⁄Øÿ±ÿØ',
                    location: 'city',
                    icon: 'üõí',
                    type: 'retail',
                    salary: 250,
                    requirement: [],
                    energyCost: 12,
                    timeRequired: 8,
                    cooldown: 12,
                    workType: 'part-time'
                },
                {
                    id: 3,
                    name: '⁄©ÿßÿ±⁄Øÿ± ÿ≥ÿßÿÆÿ™ŸÖÿßŸÜ€å',
                    location: 'construction',
                    icon: 'üë∑',
                    type: 'labor',
                    salary: 400,
                    requirement: [],
                    energyCost: 25,
                    timeRequired: 15,
                    cooldown: 20,
                    workType: 'part-time'
                },
                {
                    id: 4,
                    name: 'ŸÜÿ∏ÿßŸÅÿ™⁄Ü€å',
                    location: 'city',
                    icon: 'üßπ',
                    type: 'service',
                    salary: 200,
                    requirement: [],
                    energyCost: 20,
                    timeRequired: 12,
                    cooldown: 15,
                    workType: 'part-time'
                },

                // ÿ¥ÿ∫ŸÑ‚ÄåŸáÿß€å ÿ™ŸÖÿßŸÖ‚ÄåŸàŸÇÿ™ (ŸÜ€åÿßÿ≤ ÿ®Ÿá ŸÖÿØÿ±⁄©)
                {
                    id: 5,
                    name: 'ŸÖÿπŸÑŸÖ',
                    location: 'school',
                    icon: 'üë®‚Äçüè´',
                    type: 'education',
                    salary: 1500,
                    requirement: ['ŸÖÿØÿ±⁄© ÿ™ÿ≠ÿµ€åŸÑ€å'],
                    energyCost: 20,
                    timeRequired: 30,
                    cooldown: 45,
                    workType: 'full-time'
                },
                {
                    id: 6,
                    name: 'ÿ®ÿ±ŸÜÿßŸÖŸá‚ÄåŸÜŸà€åÿ≥',
                    location: 'techCompany',
                    icon: 'üíª',
                    type: 'technical',
                    salary: 2000,
                    requirement: ['ŸÖÿØÿ±⁄© ÿ®ÿ±ŸÜÿßŸÖŸá‚ÄåŸÜŸà€åÿ≥€å'],
                    energyCost: 18,
                    timeRequired: 25,
                    cooldown: 35,
                    workType: 'full-time'
                },
                {
                    id: 7,
                    name: 'ÿ≠ÿ≥ÿßÿ®ÿØÿßÿ±',
                    location: 'bank',
                    icon: 'üßÆ',
                    type: 'finance',
                    salary: 1800,
                    requirement: ['ŸÖÿØÿ±⁄© ÿ≠ÿ≥ÿßÿ®ÿØÿßÿ±€å'],
                    energyCost: 15,
                    timeRequired: 28,
                    cooldown: 40,
                    workType: 'full-time'
                },
                {
                    id: 8,
                    name: 'ŸÖÿØ€åÿ±',
                    location: 'office',
                    icon: 'üï¥Ô∏è',
                    type: 'management',
                    salary: 2500,
                    requirement: ['MBA'],
                    energyCost: 22,
                    timeRequired: 35,
                    cooldown: 50,
                    workType: 'full-time'
                },
                {
                    id: 9,
                    name: 'Ÿæÿ≤ÿ¥⁄©',
                    location: 'hospital',
                    icon: 'üë®‚Äç‚öïÔ∏è',
                    type: 'medical',
                    salary: 3000,
                    requirement: ['ŸÖÿØÿ±⁄© Ÿæÿ≤ÿ¥⁄©€å'],
                    energyCost: 25,
                    timeRequired: 40,
                    cooldown: 60,
                    workType: 'full-time'
                },

                // ÿ¥ÿ∫ŸÑ‚ÄåŸáÿß€å ÿ≤ŸÜÿØÿßŸÜ
                {
                    id: 10,
                    name: '⁄©ÿßÿ±⁄Øÿ± ÿ≤ŸÜÿØÿßŸÜ',
                    location: 'jail',
                    icon: '‚õìÔ∏è',
                    type: 'labor',
                    salary: 100,
                    requirement: [],
                    energyCost: 10,
                    timeRequired: 30,
                    cooldown: 30,
                    workType: 'jail'
                }
            ],

            // Ÿàÿ≥ÿß€åŸÑ ŸÜŸÇŸÑ€åŸá
            vehicles: [
                { 
                    id: 1, 
                    name: 'ÿØŸà⁄Üÿ±ÿÆŸá', 
                    price: 1000, 
                    type: 'bicycle', 
                    speed: 40, 
                    fuel: 0,
                    health: 100,
                    maxHealth: 100,
                    fuelConsumption: 0,
                    icon: 'üö≤'
                },
                { 
                    id: 2, 
                    name: 'ŸÖŸàÿ™Ÿàÿ±', 
                    price: 8000, 
                    type: 'motorcycle', 
                    speed: 20, 
                    fuel: 10,
                    health: 100,
                    maxHealth: 100,
                    fuelConsumption: 3,
                    icon: 'üèçÔ∏è'
                },
                { 
                    id: 3, 
                    name: 'ŸÖÿßÿ¥€åŸÜ', 
                    price: 80000, 
                    type: 'car', 
                    speed: 5, 
                    fuel: 50,
                    health: 100,
                    maxHealth: 100,
                    fuelConsumption: 5,
                    icon: 'üöó'
                },
                { 
                    id: 4, 
                    name: 'ÿ≥ŸàŸæÿ± ÿßÿ≥ÿ™ÿßÿ±', 
                    price: 500000, 
                    type: 'supercar', 
                    speed: 2, 
                    fuel: 100,
                    health: 100,
                    maxHealth: 100,
                    fuelConsumption: 10,
                    icon: 'üöÄ'
                }
            ],

            // ⁄Øÿ≤€åŸÜŸá‚ÄåŸáÿß€å ÿ™ÿπŸÖ€åÿ±
            repairOptions: [
                { name: 'ÿ™ÿπŸÖ€åÿ± ÿ¨ÿ≤ÿ¶€å', cost: 500, healthRestore: 30, time: 5 },
                { name: 'ÿ™ÿπŸÖ€åÿ± ⁄©ÿßŸÖŸÑ', cost: 1200, healthRestore: 70, time: 10 },
                { name: 'ÿ®ÿßÿ≤ÿ≥ÿßÿ≤€å ⁄©ÿßŸÖŸÑ', cost: 2500, healthRestore: 100, time: 20 }
            ],

            // ŸàÿßŸÖ‚ÄåŸáÿß
            loanOptions: [
                { amount: 5000, interest: 15, duration: 7 },
                { amount: 10000, interest: 20, duration: 14 },
                { amount: 20000, interest: 25, duration: 30 }
            ],

            // ÿ®ÿßÿ≤ÿßÿ± - ÿ¢⁄ØŸá€å‚ÄåŸáÿß
            marketAds: [],

            // ÿØŸàÿ±Ÿá‚ÄåŸáÿß€å ÿ¢ŸÖŸàÿ≤ÿ¥€å
            courses: [
                { id: 1, name: '⁄ØŸàÿßŸá€åŸÜÿßŸÖŸá ŸÖŸàÿ™Ÿàÿ±', price: 3000, type: 'license', requirement: [] },
                { id: 2, name: '⁄ØŸàÿßŸá€åŸÜÿßŸÖŸá ŸÖÿßÿ¥€åŸÜ', price: 8000, type: 'license', requirement: ['⁄ØŸàÿßŸá€åŸÜÿßŸÖŸá ŸÖŸàÿ™Ÿàÿ±'] },
                { id: 3, name: 'ŸÖÿØÿ±⁄© ÿ™ÿ≠ÿµ€åŸÑ€å', price: 15000, type: 'education', requirement: [] },
                { id: 4, name: '⁄ØŸàÿßŸá€åŸÜÿßŸÖŸá ÿ®ŸáÿØÿßÿ¥ÿ™', price: 2500, type: 'certificate', requirement: [] },
                { id: 5, name: '⁄ØŸàÿßŸá€åŸÜÿßŸÖŸá ŸÅŸÜ€å', price: 5000, type: 'certificate', requirement: [] },
                { id: 6, name: '⁄ØŸàÿßŸá€åŸÜÿßŸÖŸá Ÿæÿ±ÿ≥ÿ™ÿßÿ±€å', price: 7000, type: 'certificate', requirement: [] },
                { id: 7, name: 'ŸÖÿØÿ±⁄© Ÿæÿ≤ÿ¥⁄©€å', price: 25000, type: 'education', requirement: ['ŸÖÿØÿ±⁄© ÿ™ÿ≠ÿµ€åŸÑ€å'] }
            ],

            // ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ÿ™ÿ≠ÿµ€åŸÑ€å
            educationClasses: [
                { id: 1, name: '⁄©ŸÑÿßÿ≥ ÿßŸàŸÑ', price: 0, timeRequired: 10, requirement: [], intelligenceRequired: 0, studyTimeReduction: 0 },
                { id: 2, name: '⁄©ŸÑÿßÿ≥ ÿØŸàŸÖ', price: 2000, timeRequired: 15, requirement: ['⁄©ŸÑÿßÿ≥ ÿßŸàŸÑ'], intelligenceRequired: 20, studyTimeReduction: 0 },
                { id: 3, name: '⁄©ŸÑÿßÿ≥ ÿ≥ŸàŸÖ', price: 5000, timeRequired: 20, requirement: ['⁄©ŸÑÿßÿ≥ ÿØŸàŸÖ'], intelligenceRequired: 40, studyTimeReduction: 0 },
                { id: 4, name: '⁄©ŸÑÿßÿ≥ ⁄ÜŸáÿßÿ±ŸÖ', price: 10000, timeRequired: 30, requirement: ['⁄©ŸÑÿßÿ≥ ÿ≥ŸàŸÖ'], intelligenceRequired: 60, studyTimeReduction: 0 }
            ],

            // ⁄©ÿ™ÿßÿ®‚ÄåŸáÿß
            books: [
                { id: 1, name: '⁄©ÿ™ÿßÿ® ÿ±€åÿßÿ∂€å Ÿæÿß€åŸá', price: 500, intelligenceBoost: 5, studyTimeReduction: 5, type: 'math' },
                { id: 2, name: '⁄©ÿ™ÿßÿ® ÿπŸÑŸàŸÖ Ÿæ€åÿ¥ÿ±ŸÅÿ™Ÿá', price: 800, intelligenceBoost: 8, studyTimeReduction: 8, type: 'science' },
                { id: 3, name: '⁄©ÿ™ÿßÿ® ÿßÿØÿ®€åÿßÿ™', price: 400, intelligenceBoost: 3, studyTimeReduction: 3, type: 'literature' },
                { id: 4, name: '⁄©ÿ™ÿßÿ® ŸÅ€åÿ≤€å⁄©', price: 1000, intelligenceBoost: 10, studyTimeReduction: 10, type: 'physics' },
                { id: 5, name: '⁄©ÿ™ÿßÿ® ÿ¥€åŸÖ€å', price: 900, intelligenceBoost: 9, studyTimeReduction: 9, type: 'chemistry' },
                { id: 6, name: '⁄©ÿ™ÿßÿ® ÿ™ÿßÿ±€åÿÆ', price: 300, intelligenceBoost: 2, studyTimeReduction: 2, type: 'history' }
            ],

            // ÿØÿßÿ±ŸàŸáÿß
            medicines: [
                { id: 1, name: 'ŸÇÿ±ÿµ ŸáŸàÿ¥ ŸÖÿπŸÖŸàŸÑ€å', price: 800, intelligenceBoost: 10, duration: 60, type: 'intelligence' },
                { id: 2, name: 'ŸÇÿ±ÿµ ŸáŸàÿ¥ Ÿæ€åÿ¥ÿ±ŸÅÿ™Ÿá', price: 1500, intelligenceBoost: 20, duration: 120, type: 'intelligence' },
                { id: 3, name: 'ÿØÿßÿ±Ÿà€å ÿßŸÜÿ±⁄ò€å', price: 600, energyBoost: 30, duration: 30, type: 'energy' },
                { id: 4, name: 'ÿØÿßÿ±Ÿà€å ÿ≥ŸÑÿßŸÖÿ™', price: 1000, healthBoost: 50, duration: 0, type: 'health' }
            ],

            // ŸÖŸÑ⁄©‚ÄåŸáÿß
            properties: [
                { 
                    id: 1, 
                    name: 'ÿ¢Ÿæÿßÿ±ÿ™ŸÖÿßŸÜ ⁄©Ÿà⁄Ü⁄©', 
                    price: 50000, 
                    type: 'apartment', 
                    bills: 500, 
                    space: 2,
                    features: ['ÿßÿ™ÿßŸÇ ÿÆŸàÿßÿ®', 'ÿ¢ÿ¥Ÿæÿ≤ÿÆÿßŸÜŸá', 'ÿ≠ŸÖÿßŸÖ']
                },
                { 
                    id: 2, 
                    name: 'ÿ¢Ÿæÿßÿ±ÿ™ŸÖÿßŸÜ ŸÖÿ™Ÿàÿ≥ÿ∑', 
                    price: 100000, 
                    type: 'apartment', 
                    bills: 800, 
                    space: 4,
                    features: ['ÿßÿ™ÿßŸÇ ÿÆŸàÿßÿ®', 'ÿ¢ÿ¥Ÿæÿ≤ÿÆÿßŸÜŸá', 'ÿ≠ŸÖÿßŸÖ', 'ÿßÿ™ÿßŸÇ ŸÖÿ∑ÿßŸÑÿπŸá']
                },
                { 
                    id: 3, 
                    name: 'ÿ¢Ÿæÿßÿ±ÿ™ŸÖÿßŸÜ ÿ®ÿ≤ÿ±⁄Ø', 
                    price: 200000, 
                    type: 'apartment', 
                    bills: 1200, 
                    space: 6,
                    features: ['ÿßÿ™ÿßŸÇ ÿÆŸàÿßÿ®', 'ÿ¢ÿ¥Ÿæÿ≤ÿÆÿßŸÜŸá', 'ÿ≠ŸÖÿßŸÖ', 'ÿßÿ™ÿßŸÇ ŸÖÿ∑ÿßŸÑÿπŸá', 'ÿ≠€åÿßÿ∑']
                },
                { 
                    id: 4, 
                    name: 'Ÿà€åŸÑÿß', 
                    price: 500000, 
                    type: 'villa', 
                    bills: 2000, 
                    space: 10,
                    features: ['ÿßÿ™ÿßŸÇ ÿÆŸàÿßÿ®', 'ÿ¢ÿ¥Ÿæÿ≤ÿÆÿßŸÜŸá', 'ÿ≠ŸÖÿßŸÖ', 'ÿßÿ™ÿßŸÇ ŸÖÿ∑ÿßŸÑÿπŸá', 'ÿ≠€åÿßÿ∑', '⁄Øÿßÿ±ÿß⁄ò', 'ÿßŸÜÿ®ÿßÿ±€å']
                },
                { 
                    id: 5, 
                    name: 'ÿ≥ÿßÿÆÿ™ŸÖÿßŸÜ ÿ™ÿ¨ÿßÿ±€å', 
                    price: 1000000, 
                    type: 'commercial', 
                    bills: 5000, 
                    space: 20,
                    features: ['ÿØŸÅÿ™ÿ± ⁄©ÿßÿ±', 'ÿßÿ™ÿßŸÇ ⁄©ŸÜŸÅÿ±ÿßŸÜÿ≥', 'ÿ¢ÿ¥Ÿæÿ≤ÿÆÿßŸÜŸá', 'ÿ≥ÿ±Ÿà€åÿ≥ ÿ®ŸáÿØÿßÿ¥ÿ™€å']
                }
            ],

            // ŸÖÿ≠ÿµŸàŸÑÿßÿ™ ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá ÿ¢ŸÜŸÑÿß€åŸÜ
            onlineProducts: [
                { 
                    id: 1, 
                    name: 'ŸÑŸæ‚Äåÿ™ÿßŸæ ⁄Ø€åŸÖ€åŸÜ⁄Ø', 
                    price: 50000, 
                    category: 'electronics', 
                    deliveryTime: 4,
                    features: ['ÿØÿ≥ÿ™ÿ±ÿ≥€å ÿ®Ÿá ÿØŸàÿ±Ÿá‚ÄåŸáÿß€å ÿ¢ŸÜŸÑÿß€åŸÜ', 'ÿßŸÅÿ≤ÿß€åÿ¥ ÿ≥ÿ±ÿπÿ™ €åÿßÿØ⁄Ø€åÿ±€å 20%'],
                    usage: 'education'
                },
                { 
                    id: 2, 
                    name: '⁄ØŸàÿ¥€å ŸáŸàÿ¥ŸÖŸÜÿØ', 
                    price: 30000, 
                    category: 'electronics', 
                    deliveryTime: 3,
                    features: ['ÿßÿ±ÿ™ÿ®ÿßÿ∑ ÿ®Ÿáÿ™ÿ± ÿ®ÿß ÿØŸàÿ≥ÿ™ÿßŸÜ', 'ÿØÿ≥ÿ™ÿ±ÿ≥€å ÿ≥ÿ±€åÿπ‚Äåÿ™ÿ± ÿ®Ÿá ÿßŸæ‚ÄåŸáÿß'],
                    usage: 'communication'
                },
                { 
                    id: 3, 
                    name: '⁄©ŸÜÿ≥ŸàŸÑ ÿ®ÿßÿ≤€å', 
                    price: 40000, 
                    category: 'electronics', 
                    deliveryTime: 5,
                    features: ['ÿ≥ÿ±⁄Øÿ±ŸÖ€å Ÿà ÿ®ÿßÿ≤€å', '⁄©ÿßŸáÿ¥ ÿßÿ≥ÿ™ÿ±ÿ≥'],
                    usage: 'entertainment'
                },
                { 
                    id: 4, 
                    name: 'ÿ™ŸÑŸà€åÿ≤€åŸàŸÜ ŸáŸàÿ¥ŸÖŸÜÿØ', 
                    price: 60000, 
                    category: 'electronics', 
                    deliveryTime: 6,
                    features: ['ÿ™ŸÖÿßÿ¥ÿß€å ŸÅ€åŸÑŸÖ Ÿà ÿ≥ÿ±€åÿßŸÑ', 'ÿ¢ŸÖŸàÿ≤ÿ¥ ÿßÿ≤ ÿ∑ÿ±€åŸÇ ÿ±ÿ≥ÿßŸÜŸá'],
                    usage: 'entertainment'
                },
                { 
                    id: 5, 
                    name: 'ÿØŸà⁄Üÿ±ÿÆŸá Ÿàÿ±ÿ≤ÿ¥€å', 
                    price: 15000, 
                    category: 'sports', 
                    deliveryTime: 4,
                    features: ['ÿßŸÅÿ≤ÿß€åÿ¥ ÿ≥ŸÑÿßŸÖÿ™', '⁄©ÿßŸáÿ¥ Ÿáÿ≤€åŸÜŸá Ÿàÿ±ÿ≤ÿ¥'],
                    usage: 'health'
                },
                { 
                    id: 6, 
                    name: 'ŸÖÿ®ŸÑ ÿ±ÿßÿ≠ÿ™€å', 
                    price: 25000, 
                    category: 'furniture', 
                    deliveryTime: 8,
                    features: ['ÿßŸÅÿ≤ÿß€åÿ¥ ÿ±ÿßÿ≠ÿ™€å ÿØÿ± ÿÆÿßŸÜŸá', 'ÿ®ÿßÿ≤€åÿßÿ®€å ÿßŸÜÿ±⁄ò€å ÿ≥ÿ±€åÿπ‚Äåÿ™ÿ±'],
                    usage: 'comfort'
                }
            ],

            // ÿ®ÿ≥ÿ™Ÿá‚ÄåŸáÿß€å ÿß€åŸÜÿ™ÿ±ŸÜÿ™
            internetPackages: [
                { id: 1, name: 'ÿ®ÿ≥ÿ™Ÿá ÿßŸÇÿ™ÿµÿßÿØ€å', price: 1000, data: 5, speed: 1, duration: 7 },
                { id: 2, name: 'ÿ®ÿ≥ÿ™Ÿá ŸÖÿπŸÖŸàŸÑ€å', price: 2000, data: 15, speed: 3, duration: 7 },
                { id: 3, name: 'ÿ®ÿ≥ÿ™Ÿá Ÿæÿ±ÿ≥ÿ±ÿπÿ™', price: 4000, data: 30, speed: 5, duration: 7 },
                { id: 4, name: 'ÿ®ÿ≥ÿ™Ÿá ŸÜÿßŸÖÿ≠ÿØŸàÿØ', price: 8000, data: 999, speed: 10, duration: 7 }
            ],

            // ÿÆÿØŸÖÿßÿ™ Ÿà⁄©ÿßŸÑÿ™
            lawyerServices: [
                { id: 1, name: 'ŸÖÿ¥ÿßŸàÿ±Ÿá ÿ≠ŸÇŸàŸÇ€å', price: 1000, type: 'consultation' },
                { id: 2, name: '⁄©ÿßŸáÿ¥ ÿ≤ŸÖÿßŸÜ ÿ≤ŸÜÿØÿßŸÜ', price: 5000, type: 'jail_reduction', reduction: 0.5 }
            ],

            // ŸÖŸàÿßÿØ ÿ∫ÿ∞ÿß€å€å ÿ≥ŸàŸæÿ±ŸÖÿßÿ±⁄©ÿ™
            supermarketItems: [
                { id: 1, name: 'ŸÜÿßŸÜ', price: 100, type: 'bread', hungerReduction: 10 },
                { id: 2, name: 'ÿ¥€åÿ±', price: 200, type: 'dairy', hungerReduction: 15 },
                { id: 3, name: 'ÿ™ÿÆŸÖ ŸÖÿ±ÿ∫', price: 300, type: 'protein', hungerReduction: 20 },
                { id: 4, name: 'ŸÖÿ±ÿ∫', price: 800, type: 'meat', hungerReduction: 40 },
                { id: 5, name: 'ÿ®ÿ±ŸÜÿ¨', price: 500, type: 'grain', hungerReduction: 25 },
                { id: 6, name: 'ÿ±Ÿàÿ∫ŸÜ', price: 400, type: 'cooking', hungerReduction: 5 }
            ],

            // ÿØÿ≥ÿ™Ÿàÿ±Ÿáÿß€å ÿ¢ÿ¥Ÿæÿ≤€å
            cookingRecipes: [
                { id: 1, name: 'ÿ≥ÿßŸÜÿØŸà€å⁄Ü', ingredients: ['ŸÜÿßŸÜ', 'ÿ™ÿÆŸÖ ŸÖÿ±ÿ∫'], hungerReduction: 30, energyBoost: 10, timeRequired: 5 },
                { id: 2, name: 'ÿßŸÖŸÑÿ™', ingredients: ['ÿ™ÿÆŸÖ ŸÖÿ±ÿ∫', 'ÿ±Ÿàÿ∫ŸÜ'], hungerReduction: 40, energyBoost: 15, timeRequired: 10 },
                { id: 3, name: 'ŸÖÿ±ÿ∫ ŸæÿÆÿ™Ÿá', ingredients: ['ŸÖÿ±ÿ∫', 'ÿ±Ÿàÿ∫ŸÜ'], hungerReduction: 60, energyBoost: 20, timeRequired: 20 },
                { id: 4, name: 'ÿ®ÿ±ŸÜÿ¨ ŸæÿÆÿ™Ÿá', ingredients: ['ÿ®ÿ±ŸÜÿ¨'], hungerReduction: 35, energyBoost: 12, timeRequired: 15 }
            ],

            // ÿ≥ŸáÿßŸÖ ÿ®Ÿàÿ±ÿ≥
            stocks: [
                { id: 1, name: 'ÿ¥ÿ±⁄©ÿ™ ŸÅŸÜÿßŸàÿ±€å', price: 1000, volatility: 0.1 },
                { id: 2, name: 'ÿ¥ÿ±⁄©ÿ™ ÿÆŸàÿØÿ±Ÿàÿ≥ÿßÿ≤€å', price: 800, volatility: 0.15 },
                { id: 3, name: 'ÿ¥ÿ±⁄©ÿ™ ŸÜŸÅÿ™', price: 1200, volatility: 0.2 },
                { id: 4, name: 'ÿ¥ÿ±⁄©ÿ™ ÿ≥ÿßÿÆÿ™ŸÖÿßŸÜ€å', price: 600, volatility: 0.25 }
            ],

            // ÿØŸàÿ±Ÿá‚ÄåŸáÿß€å ÿ¢ŸÖŸàÿ≤ÿ¥⁄ØÿßŸá ÿ™ÿÆÿµÿµ€å
            trainingCourses: [
                { id: 1, name: 'ÿØŸàÿ±Ÿá ÿ®ÿ±ŸÜÿßŸÖŸá‚ÄåŸÜŸà€åÿ≥€å', price: 8000, timeRequired: 20, requirement: ['ŸÖÿØÿ±⁄© ÿ™ÿ≠ÿµ€åŸÑ€å'], certificate: 'ŸÖÿØÿ±⁄© ÿ®ÿ±ŸÜÿßŸÖŸá‚ÄåŸÜŸà€åÿ≥€å' },
                { id: 2, name: 'ÿØŸàÿ±Ÿá ÿ≠ÿ≥ÿßÿ®ÿØÿßÿ±€å', price: 6000, timeRequired: 18, requirement: ['ŸÖÿØÿ±⁄© ÿ™ÿ≠ÿµ€åŸÑ€å'], certificate: 'ŸÖÿØÿ±⁄© ÿ≠ÿ≥ÿßÿ®ÿØÿßÿ±€å' },
                { id: 3, name: 'ÿØŸàÿ±Ÿá ŸÖÿØ€åÿ±€åÿ™ (MBA)', price: 15000, timeRequired: 30, requirement: ['ŸÖÿØÿ±⁄© ÿ™ÿ≠ÿµ€åŸÑ€å'], certificate: 'MBA' },
                { id: 4, name: 'ÿØŸàÿ±Ÿá Ÿæÿ≤ÿ¥⁄©€å', price: 25000, timeRequired: 40, requirement: ['ŸÖÿØÿ±⁄© ÿ™ÿ≠ÿµ€åŸÑ€å'], certificate: 'ŸÖÿØÿ±⁄© Ÿæÿ≤ÿ¥⁄©€å' }
            ],

            // ÿ®ÿßÿ≤ÿßÿ± ÿ™ÿ±€åÿØ
            tradeItems: [
                { id: 1, name: 'ÿ∑ŸÑÿß', price: 50000, volatility: 0.05 },
                { id: 2, name: 'ŸÜŸÅÿ™', price: 30000, volatility: 0.08 },
                { id: 3, name: 'ÿßÿ±ÿ≤ ÿØ€åÿ¨€åÿ™ÿßŸÑ', price: 20000, volatility: 0.15 },
                { id: 4, name: 'ÿ≥⁄©Ÿá‚ÄåŸáÿß€å ŸÇÿØ€åŸÖ€å', price: 15000, volatility: 0.03 }
            ],

            // ÿØŸàÿ≥ÿ™ÿßŸÜ
            friends: [
                { id: 1, name: 'ÿπŸÑ€å ŸÖÿ≠ŸÖÿØ€å', level: 15, online: true, trustLevel: 80 },
                { id: 2, name: 'ÿ≥ÿßÿ±ÿß ÿßÿ≠ŸÖÿØ€å', level: 22, online: false, trustLevel: 60 },
                { id: 3, name: 'ŸÖÿ≠ŸÖÿØ ÿ±ÿ∂ÿß€å€å', level: 18, online: true, trustLevel: 90 },
                { id: 4, name: 'ŸÅÿßÿ∑ŸÖŸá ⁄©ÿ±€åŸÖ€å', level: 25, online: true, trustLevel: 70 }
            ],

            // ÿ®€åŸÖŸá‚ÄåŸáÿß
            insurancePolicies: [
                { id: 1, name: 'ÿ®€åŸÖŸá ÿ≥ŸÑÿßŸÖÿ™ Ÿæÿß€åŸá', price: 500, coverage: 1000, type: 'health', duration: 30 },
                { id: 2, name: 'ÿ®€åŸÖŸá ÿ≥ŸÑÿßŸÖÿ™ Ÿæ€åÿ¥ÿ±ŸÅÿ™Ÿá', price: 1500, coverage: 5000, type: 'health', duration: 30 },
                { id: 3, name: 'ÿ®€åŸÖŸá Ÿàÿ≥€åŸÑŸá ŸÜŸÇŸÑ€åŸá', price: 2000, coverage: 10000, type: 'vehicle', duration: 30 },
                { id: 4, name: 'ÿ®€åŸÖŸá ŸÖÿ≥⁄©ŸÜ', price: 3000, coverage: 50000, type: 'property', duration: 30 },
                { id: 5, name: 'ÿ®€åŸÖŸá ÿ¥ÿ∫ŸÑ€å', price: 1000, coverage: 2000, type: 'job', duration: 30 }
            ],

            // ÿßŸÖ⁄©ÿßŸÜÿßÿ™ ÿÆÿßŸÜŸá
            homeFeatures: [
                { id: 1, name: 'ÿßÿ™ÿßŸÇ ÿÆŸàÿßÿ®', icon: 'üõèÔ∏è', action: 'sleep', energyRecovery: 100, healthRecovery: 100, timeRequired: 480, description: 'ÿÆŸàÿßÿ® ⁄©ÿßŸÖŸÑ ÿ¥ÿ®ÿßŸÜŸá' },
                { id: 2, name: 'ÿ≠ŸÖÿßŸÖ', icon: 'üöø', action: 'shower', energyRecovery: 30, healthRecovery: 20, timeRequired: 20, description: 'ÿßÿ≥ÿ™ÿ≠ŸÖÿßŸÖ Ÿà ÿ®ÿßÿ≤€åÿßÿ®€å ÿßŸÜÿ±⁄ò€å' },
                { id: 3, name: 'ÿ¢ÿ¥Ÿæÿ≤ÿÆÿßŸÜŸá', icon: 'üë®‚Äçüç≥', action: 'cook', energyRecovery: 10, healthRecovery: 0, timeRequired: 30, description: 'ŸæÿÆÿ™ ÿ∫ÿ∞ÿß Ÿà ⁄©ÿßŸáÿ¥ ⁄Øÿ±ÿ≥ŸÜ⁄Ø€å' },
                { id: 4, name: 'ÿßÿ™ÿßŸÇ ŸÖÿ∑ÿßŸÑÿπŸá', icon: 'üìö', action: 'study', energyRecovery: -10, healthRecovery: 0, timeRequired: 60, description: 'ŸÖÿ∑ÿßŸÑÿπŸá Ÿà ÿßŸÅÿ≤ÿß€åÿ¥ ŸáŸàÿ¥' },
                { id: 5, name: 'ÿ≠€åÿßÿ∑', icon: 'üå≥', action: 'garden', energyRecovery: 20, healthRecovery: 10, timeRequired: 45, description: 'ÿ®ÿßÿ∫ÿ®ÿßŸÜ€å Ÿà ⁄©ÿ≥ÿ® ÿØÿ±ÿ¢ŸÖÿØ' },
                { id: 6, name: '⁄Øÿßÿ±ÿß⁄ò', icon: 'üîß', action: 'repair', energyRecovery: -15, healthRecovery: 0, timeRequired: 40, description: 'ÿ™ÿπŸÖ€åÿ± Ÿàÿ≥ÿß€åŸÑ ŸÜŸÇŸÑ€åŸá' }
            ],

            // ÿ≠ŸàÿßÿØÿ´ ÿ±ŸÜÿØŸàŸÖ - ⁄©ÿßŸáÿ¥ ÿßÿ≠ÿ™ŸÖÿßŸÑ ŸàŸÇŸàÿπ
            randomEvents: [
                { 
                    id: 1, 
                    name: 'ÿ™ÿµÿßÿØŸÅ ÿ±ÿßŸÜŸÜÿØ⁄Ø€å', 
                    type: 'accident', 
                    probability: 0.001, 
                    effect: { health: -30, coins: -1000 },
                    message: 'ŸÖÿ™ÿ£ÿ≥ŸÅÿßŸÜŸá ÿØÿ± €å⁄© ÿ™ÿµÿßÿØŸÅ ÿ±ÿßŸÜŸÜÿØ⁄Ø€å ŸÖÿ¨ÿ±Ÿàÿ≠ ÿ¥ÿØ€åÿØ!',
                    insuranceCoverage: 'vehicle'
                },
                { 
                    id: 2, 
                    name: 'ÿ®€åŸÖÿßÿ±€å', 
                    type: 'sickness', 
                    probability: 0.005, 
                    effect: { health: -40, energy: -20 },
                    message: 'ÿ®Ÿá ÿ®€åŸÖÿßÿ±€å ŸÖÿ®ÿ™ŸÑÿß ÿ¥ÿØ€åÿØ! ŸÜ€åÿßÿ≤ ÿ®Ÿá ÿßÿ≥ÿ™ÿ±ÿßÿ≠ÿ™ ÿØÿßÿ±€åÿØ.',
                    insuranceCoverage: 'health'
                },
                { 
                    id: 3, 
                    name: 'ÿ≥ÿ±ŸÇÿ™', 
                    type: 'theft', 
                    probability: 0.0008, 
                    effect: { coins: -5000 },
                    message: 'ŸÖŸÜÿ≤ŸÑ ÿ¥ŸÖÿß ŸÖŸàÿ±ÿØ ÿ≥ÿ±ŸÇÿ™ ŸÇÿ±ÿßÿ± ⁄Øÿ±ŸÅÿ™!',
                    insuranceCoverage: 'property'
                },
                { 
                    id: 4, 
                    name: 'ŸÅÿ±ÿµÿ™ ÿ≥ÿ±ŸÖÿß€åŸá‚Äå⁄Øÿ∞ÿßÿ±€å', 
                    type: 'opportunity', 
                    probability: 0.012, 
                    effect: { coins: 3000 },
                    message: '€å⁄© ŸÅÿ±ÿµÿ™ ÿ≥ÿ±ŸÖÿß€åŸá‚Äå⁄Øÿ∞ÿßÿ±€å ÿπÿßŸÑ€å Ÿæ€åÿØÿß ⁄©ÿ±ÿØ€åÿØ!'
                },
                { 
                    id: 5, 
                    name: 'ÿ≠ŸàÿßÿØÿ´ ÿ∑ÿ®€åÿπ€å', 
                    type: 'disaster', 
                    probability: 0.005, 
                    effect: { health: -20, coins: -3000 },
                    message: '€å⁄© ÿ≠ÿßÿØÿ´Ÿá ÿ∑ÿ®€åÿπ€å ÿ®ÿßÿπÿ´ ÿÆÿ≥ÿßÿ±ÿ™ ÿ¥ÿØŸá ÿßÿ≥ÿ™!',
                    insuranceCoverage: 'property'
                }
            ],

            // ⁄Üÿ™ ⁄©ŸÑÿßÿ≥€å
            classChats: {
                '701': [
                    { user: 'ÿ≥€åÿ≥ÿ™ŸÖ', message: 'ÿ®Ÿá ⁄Üÿ™ ⁄©ŸÑÿßÿ≥ €∑€∞€± ÿÆŸàÿ¥ ÿ¢ŸÖÿØ€åÿØ!', time: '08:00' }
                ],
                '702': [
                    { user: 'ÿ≥€åÿ≥ÿ™ŸÖ', message: 'ÿ®Ÿá ⁄Üÿ™ ⁄©ŸÑÿßÿ≥ €∑€∞€≤ ÿÆŸàÿ¥ ÿ¢ŸÖÿØ€åÿØ!', time: '08:00' }
                ],
                '703': [
                    { user: 'ÿ≥€åÿ≥ÿ™ŸÖ', message: 'ÿ®Ÿá ⁄Üÿ™ ⁄©ŸÑÿßÿ≥ €∑€∞€≥ ÿÆŸàÿ¥ ÿ¢ŸÖÿØ€åÿØ!', time: '08:00' }
                ],
                '704': [
                    { user: 'ÿ≥€åÿ≥ÿ™ŸÖ', message: 'ÿ®Ÿá ⁄Üÿ™ ⁄©ŸÑÿßÿ≥ €∑€∞€¥ ÿÆŸàÿ¥ ÿ¢ŸÖÿØ€åÿØ!', time: '08:00' }
                ],
                '705': [
                    { user: 'ÿ≥€åÿ≥ÿ™ŸÖ', message: 'ÿ®Ÿá ⁄Üÿ™ ⁄©ŸÑÿßÿ≥ €∑€∞€µ ÿÆŸàÿ¥ ÿ¢ŸÖÿØ€åÿØ!', time: '08:00' }
                ],
                '706': [
                    { user: 'ÿ≥€åÿ≥ÿ™ŸÖ', message: 'ÿ®Ÿá ⁄Üÿ™ ⁄©ŸÑÿßÿ≥ €∑€∞€∂ ÿÆŸàÿ¥ ÿ¢ŸÖÿØ€åÿØ!', time: '08:00' }
                ]
            }
        };

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ŸÜŸàÿ™€åŸÅ€å⁄©€åÿ¥ŸÜ ====================
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ÿ≤ŸÖÿßŸÜ ====================
        function updateGameTime() {
            if (gameData.gameOver) return;
            
            gameData.gameTime += 1;
            
            if (gameData.gameTime >= 24 * 60) {
                gameData.gameTime = 0;
                handleNewDay();
            }
            
            const hours = Math.floor(gameData.gameTime / 60);
            const minutes = gameData.gameTime % 60;
            const timeString = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
            
            document.getElementById('gameTime').textContent = timeString;
            document.getElementById('phoneTime').textContent = timeString;
            
            const wasNight = gameData.isNight;
            gameData.isNight = (hours >= 18 || hours < 6);
            
            if (wasNight !== gameData.isNight) {
                document.body.classList.toggle('night-mode', gameData.isNight);
            }

            // ÿ®ÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å Ÿàÿ∂ÿπ€åÿ™ ÿß€åŸÜÿ™ÿ±ŸÜÿ™
            updateInternetStatus();

            // ÿ®ÿ±ÿ±ÿ≥€å ÿ≠ŸàÿßÿØÿ´ ÿ±ŸÜÿØŸàŸÖ
            checkRandomEvents();

            // ÿ®ÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ŸÅÿµŸÑ
            updateSeason();
            
            // ÿ®ÿ±ÿ±ÿ≥€å Ÿæÿß€åÿßŸÜ ÿ®ÿßÿ≤€å
            checkGameOver();
        }

        function updateSeason() {
            const dayOfYear = Math.floor(gameData.gameTime / 24) % 365;
            let newSeason = 'spring';
            
            if (dayOfYear < 90) newSeason = 'spring';
            else if (dayOfYear < 180) newSeason = 'summer';
            else if (dayOfYear < 270) newSeason = 'autumn';
            else newSeason = 'winter';
            
            if (gameData.currentSeason !== newSeason) {
                gameData.currentSeason = newSeason;
                document.body.classList.remove('spring-mode', 'summer-mode', 'autumn-mode', 'winter-mode');
                document.body.classList.add(newSeason + '-mode');
                
                showNotification(`ŸÅÿµŸÑ ${getSeasonName(newSeason)} ÿ¥ÿ±Ÿàÿπ ÿ¥ÿØ!`, 'info');
            }
        }

        function getSeasonName(season) {
            const names = {
                'spring': 'ÿ®Ÿáÿßÿ±',
                'summer': 'ÿ™ÿßÿ®ÿ≥ÿ™ÿßŸÜ',
                'autumn': 'Ÿæÿß€å€åÿ≤',
                'winter': 'ÿ≤ŸÖÿ≥ÿ™ÿßŸÜ'
            };
            return names[season];
        }

        function checkRandomEvents() {
            if (!gameData.currentUser || gameData.isSleeping || gameData.gameOver) return;
            
            gameData.randomEvents.forEach(event => {
                if (Math.random() < event.probability) {
                    handleRandomEvent(event);
                }
            });
        }

        function handleRandomEvent(event) {
            // ÿßÿπŸÖÿßŸÑ ÿßÿ´ÿ±ÿßÿ™ ÿ≠ÿßÿØÿ´Ÿá
            if (event.effect.health) {
                gameData.currentUser.health = Math.max(0, gameData.currentUser.health + event.effect.health);
            }
            if (event.effect.energy) {
                gameData.currentUser.energy = Math.max(0, gameData.currentUser.energy + event.effect.energy);
            }
            if (event.effect.coins) {
                gameData.currentUser.coins = Math.max(0, gameData.currentUser.coins + event.effect.coins);
            }
            
            // ÿ®ÿ±ÿ±ÿ≥€å ÿ®€åŸÖŸá
            if (event.insuranceCoverage) {
                const insurance = gameData.activeInsurances.find(ins => ins.type === event.insuranceCoverage);
                if (insurance) {
                    const coverageAmount = Math.abs(event.effect.coins || 0);
                    if (coverageAmount > 0) {
                        gameData.currentUser.coins += coverageAmount;
                        showNotification(`ÿ®€åŸÖŸá ${getInsuranceTypeName(event.insuranceCoverage)} ÿÆÿ≥ÿßÿ±ÿ™ ÿ±ÿß Ÿæÿ±ÿØÿßÿÆÿ™ ⁄©ÿ±ÿØ!`, 'success');
                    }
                }
            }
            
            showNotification(event.message, event.effect.coins > 0 ? 'success' : 'error');
            updateUserInfo();
            updateStats();
        }

        function getInsuranceTypeName(type) {
            const names = {
                'health': 'ÿ≥ŸÑÿßŸÖÿ™',
                'vehicle': 'Ÿàÿ≥€åŸÑŸá ŸÜŸÇŸÑ€åŸá',
                'property': 'ŸÖÿ≥⁄©ŸÜ',
                'job': 'ÿ¥ÿ∫ŸÑ€å'
            };
            return names[type] || type;
        }

        function handleNewDay() {
            if (!gameData.currentUser || gameData.gameOver) return;
            
            // ÿ®ÿ±ÿ±ÿ≥€å ŸàÿßŸÖ‚ÄåŸáÿß
            gameData.currentUser.loans = gameData.currentUser.loans || [];
            gameData.currentUser.loans.forEach(loan => {
                loan.daysLeft--;
                if (loan.daysLeft <= 0) {
                    gameData.crimes++;
                    sendToJail('ÿπÿØŸÖ Ÿæÿ±ÿØÿßÿÆÿ™ ŸàÿßŸÖ');
                }
            });
            
            // ÿ≠ŸÇŸàŸÇ ÿ±Ÿàÿ≤ÿßŸÜŸá
            gameData.currentUser.coins += 500;
            gameData.currentUser.bankBalance += 500;
            gameData.currentUser.transactions.push({
                description: 'ÿ≠ŸÇŸàŸÇ ÿ±Ÿàÿ≤ÿßŸÜŸá',
                amount: 500,
                time: '09:00'
            });

            // ÿ™ŸàŸÑ€åÿØ ŸÇÿ®ÿ∂‚ÄåŸáÿß
            generateBills();
            
            // ÿ™ŸÖÿØ€åÿØ ÿ®€åŸÖŸá
            updateInsurance();
            
            showNotification('üí∞ ÿ≠ŸÇŸàŸÇ ÿ±Ÿàÿ≤ÿßŸÜŸá 500 ÿ≥⁄©Ÿá ÿØÿ±€åÿßŸÅÿ™ ÿ¥ÿØ!', 'success');
        }

        function generateBills() {
            if (!gameData.currentUser || !gameData.currentUser.properties || gameData.gameOver) return;
            
            gameData.currentUser.bills = gameData.currentUser.bills || [];
            
            // ŸÇÿ®ÿ∂ ÿ®ÿ±ŸÇÿå ÿ¢ÿ®ÿå ⁄Øÿßÿ≤ ÿ®ÿ±ÿß€å Ÿáÿ± ŸÖŸÑ⁄©
            gameData.currentUser.properties.forEach(property => {
                gameData.currentUser.bills.push({
                    id: Date.now() + Math.random(),
                    type: 'ÿ®ÿ±ŸÇ',
                    amount: Math.floor(property.bills * 0.4),
                    dueDate: 3,
                    property: property.name
                });
                
                gameData.currentUser.bills.push({
                    id: Date.now() + Math.random(),
                    type: 'ÿ¢ÿ®',
                    amount: Math.floor(property.bills * 0.3),
                    dueDate: 3,
                    property: property.name
                });
                
                gameData.currentUser.bills.push({
                    id: Date.now() + Math.random(),
                    type: '⁄Øÿßÿ≤',
                    amount: Math.floor(property.bills * 0.3),
                    dueDate: 3,
                    property: property.name
                });
            });

            // ŸÇÿ®ÿ∂ ÿß€åŸÜÿ™ÿ±ŸÜÿ™ ÿß⁄Øÿ± ÿ®ÿ≥ÿ™Ÿá ŸÅÿπÿßŸÑ ÿØÿßÿ±€åŸÖ
            if (gameData.internetPackage) {
                gameData.currentUser.bills.push({
                    id: Date.now() + Math.random(),
                    type: 'ÿß€åŸÜÿ™ÿ±ŸÜÿ™',
                    amount: Math.floor(gameData.internetPackage.price * 0.5),
                    dueDate: 7,
                    property: 'ÿ≥ÿ±Ÿà€åÿ≥ ÿß€åŸÜÿ™ÿ±ŸÜÿ™'
                });
            }
        }

        function updateInsurance() {
            gameData.activeInsurances = gameData.activeInsurances.filter(insurance => {
                insurance.daysLeft--;
                return insurance.daysLeft > 0;
            });
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ÿß€åŸÜÿ™ÿ±ŸÜÿ™ ====================
        function updateInternetStatus() {
            const internetStatus = document.getElementById('internetStatus');
            
            if (!gameData.internetPackage || gameData.internetDataLeft <= 0) {
                internetStatus.innerHTML = '<i class="fas fa-wifi-slash" style="color: var(--danger);"></i>';
                return;
            }
            
            // ⁄©ÿßŸáÿ¥ ÿØÿßÿØŸá ÿß€åŸÜÿ™ÿ±ŸÜÿ™ ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ÿßÿ≥ÿ™ŸÅÿßÿØŸá
            if (Math.random() < 0.1) { // 10% chance per minute to consume data
                gameData.internetDataLeft = Math.max(0, gameData.internetDataLeft - 0.1);
            }
            
            const speedBars = Math.ceil(gameData.internetPackage.speed / 2);
            let barsHtml = '';
            for (let i = 0; i < 4; i++) {
                barsHtml += `<i class="fas fa-wifi${i < speedBars ? '' : '-slash'}" style="color: ${i < speedBars ? 'var(--neon)' : '#666'}; margin-left: 2px;"></i>`;
            }
            
            internetStatus.innerHTML = barsHtml;
        }

        function checkInternetAccess() {
            if (!gameData.internetPackage || gameData.internetDataLeft <= 0) {
                showNotification('üì° ÿ®ÿ±ÿß€å ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿßÿ≤ ÿß€åŸÜ ÿ®ÿ±ŸÜÿßŸÖŸá ŸÜ€åÿßÿ≤ ÿ®Ÿá ÿß€åŸÜÿ™ÿ±ŸÜÿ™ ÿØÿßÿ±€åÿØ!', 'error');
                return false;
            }
            return true;
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ÿ≤ŸÜÿØÿßŸÜ ====================
        function sendToJail(reason) {
            gameData.isInJail = true;
            gameData.jailTimeLeft = 60 * 60; // 1 ÿ≥ÿßÿπÿ™ ÿ®Ÿá ÿ´ÿßŸÜ€åŸá
            gameData.jailReason = reason;
            
            document.getElementById('jailScreen').style.display = 'flex';
            document.getElementById('jailReason').textContent = `ÿ®Ÿá ÿØŸÑ€åŸÑ ${reason} ÿ®Ÿá ÿ≤ŸÜÿØÿßŸÜ ÿßŸÅÿ™ÿßÿØŸá‚Äåÿß€åÿØ!`;
            showNotification(`‚õìÔ∏è ÿ®Ÿá ÿØŸÑ€åŸÑ ${reason} ÿ®Ÿá ÿ≤ŸÜÿØÿßŸÜ ÿßŸÅÿ™ÿßÿØ€åÿØ!`, 'error');
            
            const jailInterval = setInterval(() => {
                if (gameData.gameOver) {
                    clearInterval(jailInterval);
                    return;
                }
                
                gameData.jailTimeLeft--;
                
                const hours = Math.floor(gameData.jailTimeLeft / 3600);
                const minutes = Math.floor((gameData.jailTimeLeft % 3600) / 60);
                const seconds = gameData.jailTimeLeft % 60;
                
                document.getElementById('jailTimer').textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (gameData.jailTimeLeft <= 0) {
                    clearInterval(jailInterval);
                    releaseFromJail();
                }
            }, 1000);
        }

        function releaseFromJail() {
            gameData.isInJail = false;
            document.getElementById('jailScreen').style.display = 'none';
            showNotification('üéâ ÿßÿ≤ ÿ≤ŸÜÿØÿßŸÜ ÿ¢ÿ≤ÿßÿØ ÿ¥ÿØ€åÿØ!', 'success');
        }

        function startJailWork() {
            if (!gameData.isInJail || gameData.gameOver) return;
            
            const jailJob = gameData.jobs.find(job => job.id === 10);
            if (gameData.currentUser.energy >= jailJob.energyCost) {
                gameData.currentUser.energy -= jailJob.energyCost;
                gameData.currentUser.coins += jailJob.salary;
                
                gameData.currentUser.transactions.push({
                    description: `⁄©ÿßÿ± ÿØÿ± ÿ≤ŸÜÿØÿßŸÜ`,
                    amount: jailJob.salary,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                showNotification(`‚õìÔ∏è ŸÖÿ®ŸÑÿ∫ ${jailJob.salary} ÿ≥⁄©Ÿá ÿßÿ≤ ⁄©ÿßÿ± ÿØÿ± ÿ≤ŸÜÿØÿßŸÜ ÿØÿ±€åÿßŸÅÿ™ ⁄©ÿ±ÿØ€åÿØ`, 'success');
                updateUserInfo();
                updateStats();
            } else {
                showNotification('ÿßŸÜÿ±⁄ò€å ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ⁄©ÿßÿ± ÿØÿ± ÿ≤ŸÜÿØÿßŸÜ ŸÜÿØÿßÿ±€åÿØ!', 'error');
            }
        }

        function hireLawyerFromJail() {
            if (!gameData.isInJail || gameData.gameOver) return;
            
            if (gameData.currentUser.coins >= 5000) {
                gameData.currentUser.coins -= 5000;
                gameData.jailTimeLeft = Math.floor(gameData.jailTimeLeft * 0.5); // ⁄©ÿßŸáÿ¥ 50% ÿ≤ŸÖÿßŸÜ
                
                gameData.currentUser.transactions.push({
                    description: `Ÿáÿ≤€åŸÜŸá Ÿà⁄©€åŸÑ ÿ®ÿ±ÿß€å ⁄©ÿßŸáÿ¥ ÿ≤ŸÖÿßŸÜ ÿ≤ŸÜÿØÿßŸÜ`,
                    amount: -5000,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                showNotification('‚öñÔ∏è Ÿà⁄©€åŸÑ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿ¥ÿØ! ÿ≤ŸÖÿßŸÜ ÿ≤ŸÜÿØÿßŸÜ ÿ¥ŸÖÿß 50% ⁄©ÿßŸáÿ¥ €åÿßŸÅÿ™', 'success');
                updateUserInfo();
                updateStats();
            } else {
                showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ Ÿà⁄©€åŸÑ ŸÜÿØÿßÿ±€åÿØ!', 'error');
            }
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ŸÑÿß⁄Ø€åŸÜ ====================
        function login() {
            const className = document.getElementById('className').value;
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const password = document.getElementById('password').value;

            if (!className || !firstName || !lastName || !password) {
                showNotification('ŸÑÿ∑ŸÅÿßŸã ÿ™ŸÖÿßŸÖ ŸÅ€åŸÑÿØŸáÿß ÿ±ÿß Ÿæÿ± ⁄©ŸÜ€åÿØ', 'error');
                return;
            }

            gameData.currentUser = {
                id: Date.now(),
                type: 'student',
                className: className,
                firstName: firstName,
                lastName: lastName,
                coins: 2000,
                energy: 100,
                hunger: 0,
                health: 100,
                intelligence: 0,
                properties: [],
                vehicles: [],
                certificates: [],
                books: [],
                medicines: [],
                foodItems: [],
                electronics: [],
                backpack: [],
                bankBalance: 2000,
                transactions: [],
                loans: [],
                activeJobs: [],
                jobCooldowns: {},
                activeCourses: [],
                bills: [],
                stocks: [],
                friends: [],
                tradeAssets: [],
                skills: {
                    education: 0,
                    technical: 0,
                    medical: 0,
                    service: 0
                }
            };

            saveGameData();
            showGamePage();
            startGameLoop();
            showNotification(`üéâ ÿ®Ÿá ÿ¥Ÿáÿ± ÿØ⁄©ÿ™ÿ± ÿ≠ÿ≥ÿßÿ®€å ÿÆŸàÿ¥ ÿ¢ŸÖÿØ€åÿØ ${firstName}!`, 'success');
        }

        // ==================== ŸÜŸÖÿß€åÿ¥ ÿ®ÿßÿ≤€å ====================
        function showGamePage() {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('gamePage').style.display = 'block';
            updateUserInfo();
            updateStats();
            loadCityMap();
            startTimeLoop();
        }

        function updateUserInfo() {
            if (!gameData.currentUser) return;
            
            document.getElementById('userName').textContent = 
                `${gameData.currentUser.firstName} ${gameData.currentUser.lastName}`;
            document.getElementById('userCoins').textContent = 
                `ÿ≥⁄©Ÿá: ${gameData.currentUser.coins.toLocaleString()} ü™ô`;
            
            // ÿ¢ŸæÿØ€åÿ™ Ÿàÿ∂ÿπ€åÿ™‚ÄåŸáÿß
            document.getElementById('healthBar').style.width = `${gameData.currentUser.health}%`;
            document.getElementById('hungerBar').style.width = `${gameData.currentUser.hunger}%`;
            document.getElementById('energyBar').style.width = `${gameData.currentUser.energy}%`;
            document.getElementById('intelligenceBar').style.width = `${gameData.currentUser.intelligence}%`;
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ÿßŸæ‚ÄåŸáÿß ====================
        function openApp(appName) {
            if (gameData.gameOver) {
                showNotification('ÿ®ÿßÿ≤€å ÿ®Ÿá Ÿæÿß€åÿßŸÜ ÿ±ÿ≥€åÿØŸá ÿßÿ≥ÿ™!', 'error');
                return;
            }

            if (gameData.isInJail && !['map', 'internet'].includes(appName)) {
                showNotification('‚õìÔ∏è ÿØÿ± ÿ≠ÿßŸÑ ÿ≠ÿßÿ∂ÿ± ÿØÿ± ÿ≤ŸÜÿØÿßŸÜ Ÿáÿ≥ÿ™€åÿØ!', 'error');
                return;
            }

            if (gameData.isSleeping) {
                showNotification('üí§ ÿØÿ± ÿ≠ÿßŸÑ ÿ≠ÿßÿ∂ÿ± ÿØÿ± ÿÆŸàÿßÿ® Ÿáÿ≥ÿ™€åÿØ!', 'error');
                return;
            }

            // ÿ®ÿ±ÿ±ÿ≥€å ÿØÿ≥ÿ™ÿ±ÿ≥€å ÿß€åŸÜÿ™ÿ±ŸÜÿ™ ÿ®ÿ±ÿß€å ÿßŸæ‚ÄåŸáÿß
            if (appName !== 'internet' && appName !== '' && !checkInternetAccess()) {
                return;
            }

            const apps = [
                'homeScreen', 'mapApp', 'backpackApp', 'bankApp', 'jobApp', 'marketApp', 
                'chatApp', 'educationApp', 'lawApp', 'transportApp', 'repairShop',
                'libraryApp', 'pharmacyApp', 'realestateApp', 'onlineshopApp', 
                'internetApp', 'lawyerApp', 'municipalityApp', 'stockApp', 
                'cookingApp', 'supermarketApp', 'friendsApp', 'trainingApp', 'tradeApp',
                'insuranceApp', 'homeApp', 'statsApp'
            ];
            
            apps.forEach(app => {
                document.getElementById(app).style.display = 'none';
            });
            
            switch(appName) {
                case 'map':
                    document.getElementById('mapApp').style.display = 'block';
                    break;
                case 'backpack':
                    document.getElementById('backpackApp').style.display = 'block';
                    loadBackpack();
                    break;
                case 'bank':
                    document.getElementById('bankApp').style.display = 'block';
                    loadBank();
                    break;
                case 'jobs':
                    document.getElementById('jobApp').style.display = 'block';
                    loadJobs();
                    break;
                case 'market':
                    document.getElementById('marketApp').style.display = 'block';
                    loadMarket();
                    break;
                case 'chat':
                    document.getElementById('chatApp').style.display = 'flex';
                    loadChat();
                    break;
                case 'education':
                    document.getElementById('educationApp').style.display = 'block';
                    loadEducation();
                    break;
                case 'laws':
                    document.getElementById('lawApp').style.display = 'block';
                    loadLaws();
                    break;
                case 'transport':
                    document.getElementById('transportApp').style.display = 'block';
                    loadTransport();
                    break;
                case 'repair':
                    document.getElementById('repairShop').style.display = 'block';
                    loadRepairShop();
                    break;
                case 'library':
                    document.getElementById('libraryApp').style.display = 'block';
                    loadLibrary();
                    break;
                case 'pharmacy':
                    document.getElementById('pharmacyApp').style.display = 'block';
                    loadPharmacy();
                    break;
                case 'realestate':
                    document.getElementById('realestateApp').style.display = 'block';
                    loadRealEstate();
                    break;
                case 'onlineshop':
                    document.getElementById('onlineshopApp').style.display = 'block';
                    loadOnlineShop();
                    break;
                case 'internet':
                    document.getElementById('internetApp').style.display = 'block';
                    loadInternet();
                    break;
                case 'lawyer':
                    document.getElementById('lawyerApp').style.display = 'block';
                    loadLawyer();
                    break;
                case 'municipality':
                    document.getElementById('municipalityApp').style.display = 'block';
                    loadMunicipality();
                    break;
                case 'stock':
                    document.getElementById('stockApp').style.display = 'block';
                    loadStock();
                    break;
                case 'cooking':
                    document.getElementById('cookingApp').style.display = 'block';
                    loadCooking();
                    break;
                case 'supermarket':
                    document.getElementById('supermarketApp').style.display = 'block';
                    loadSupermarket();
                    break;
                case 'friends':
                    document.getElementById('friendsApp').style.display = 'block';
                    loadFriends();
                    break;
                case 'training':
                    document.getElementById('trainingApp').style.display = 'block';
                    loadTraining();
                    break;
                case 'trade':
                    document.getElementById('tradeApp').style.display = 'block';
                    loadTrade();
                    break;
                case 'insurance':
                    document.getElementById('insuranceApp').style.display = 'block';
                    loadInsurance();
                    break;
                case 'home':
                    document.getElementById('homeApp').style.display = 'block';
                    loadHome();
                    break;
                case 'stats':
                    document.getElementById('statsApp').style.display = 'block';
                    updateStats();
                    break;
                default:
                    document.getElementById('homeScreen').style.display = 'grid';
            }
        }

        function showScreen(screen) {
            openApp(screen === 'home' ? '' : screen);
            
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ŸÜŸÇÿ¥Ÿá Ÿà ÿ≥ŸÅÿ± ====================
        function loadCityMap() {
            const cityMap = document.getElementById('cityMap');
            cityMap.innerHTML = '';
            
            gameData.locations.forEach(location => {
                const locationElement = document.createElement('div');
                locationElement.className = 'location';
                locationElement.innerHTML = `
                    <div class="location-icon">${location.icon}</div>
                    <div class="location-name">${location.name}</div>
                    <div class="location-distance">${location.distance} ÿØŸÇ€åŸÇŸá Ÿæ€åÿßÿØŸá</div>
                `;
                
                locationElement.addEventListener('click', () => travelToLocation(location));
                cityMap.appendChild(locationElement);
            });
        }

        function travelToLocation(location) {
            if (gameData.currentTravel) {
                showNotification('ÿØÿ± ÿ≠ÿßŸÑ ÿ≠ÿßÿ∂ÿ± ÿØÿ± ÿ≠ÿßŸÑ ÿ≥ŸÅÿ± Ÿáÿ≥ÿ™€åÿØ!', 'error');
                return;
            }

            if (gameData.isSleeping) {
                showNotification('üí§ ÿØÿ± ÿ≠ÿßŸÑ ÿ≠ÿßÿ∂ÿ± ÿØÿ± ÿÆŸàÿßÿ® Ÿáÿ≥ÿ™€åÿØ!', 'error');
                return;
            }

            if (gameData.currentUser.energy < 10) {
                showNotification('ÿßŸÜÿ±⁄ò€å ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ÿ≥ŸÅÿ± ŸÜÿØÿßÿ±€åÿØ!', 'error');
                return;
            }

            let travelTime = location.distance * 60;
            let method = 'Ÿæ€åÿßÿØŸá';
            let vehicle = null;

            // Ÿæ€åÿØÿß ⁄©ÿ±ÿØŸÜ ÿ≥ÿ±€åÿπÿ™ÿ±€åŸÜ Ÿàÿ≥€åŸÑŸá ŸÜŸÇŸÑ€åŸá ŸÇÿßÿ®ŸÑ ÿßÿ≥ÿ™ŸÅÿßÿØŸá
            if (gameData.currentUser.vehicles.length > 0) {
                const availableVehicles = gameData.currentUser.vehicles.filter(v => 
                    v.health > 20 && (v.type === 'bicycle' || v.fuel > 0)
                );
                
                if (availableVehicles.length > 0) {
                    vehicle = availableVehicles.reduce((fastest, current) => 
                        current.speed < fastest.speed ? current : fastest
                    );
                    travelTime = location.distance * vehicle.speed;
                    method = vehicle.name;
                }
            }

            startTravel(location, travelTime, method, vehicle);
        }

        function startTravel(location, travelTime, method, vehicle) {
            gameData.currentTravel = {
                location: location,
                timeLeft: travelTime,
                totalTime: travelTime,
                method: method,
                vehicle: vehicle
            };

            // ŸÜŸÖÿß€åÿ¥ ÿµŸÅÿ≠Ÿá ÿ≥ŸÅÿ±
            document.getElementById('travelScreen').style.display = 'flex';
            document.getElementById('travelIcon').textContent = vehicle ? vehicle.icon : 'üö∂';
            document.getElementById('travelDestination').textContent = `ŸÖŸÇÿµÿØ: ${location.name}`;
            document.getElementById('travelMethod').textContent = `ÿ±Ÿàÿ¥: ${method}`;

            // ŸÖÿµÿ±ŸÅ ÿßŸÜÿ±⁄ò€å
            gameData.currentUser.energy -= 5;
            updateUserInfo();
            updateStats();

            const travelInterval = setInterval(() => {
                if (!gameData.currentTravel || gameData.gameOver) {
                    clearInterval(travelInterval);
                    return;
                }

                gameData.currentTravel.timeLeft--;
                const progress = ((gameData.currentTravel.totalTime - gameData.currentTravel.timeLeft) / gameData.currentTravel.totalTime) * 100;
                
                const minutes = Math.floor(gameData.currentTravel.timeLeft / 60);
                const seconds = gameData.currentTravel.timeLeft % 60;
                
                document.getElementById('travelTimer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                document.getElementById('travelProgress').style.width = `${progress}%`;
                
                if (gameData.currentTravel.timeLeft <= 0) {
                    clearInterval(travelInterval);
                    finishTravel();
                }
            }, 1000);
        }

        function finishTravel() {
            if (!gameData.currentTravel) return;

            const location = gameData.currentTravel.location;
            
            // ŸÖÿµÿ±ŸÅ ÿ≥ŸàÿÆÿ™
            if (gameData.currentTravel.vehicle && gameData.currentTravel.vehicle.type !== 'bicycle') {
                gameData.currentTravel.vehicle.fuel -= 1;
                
                // ⁄©ÿßŸáÿ¥ ÿ≥ŸÑÿßŸÖÿ™ ÿ®ÿß ÿßÿ≠ÿ™ŸÖÿßŸÑ
                if (Math.random() < 0.2) {
                    gameData.currentTravel.vehicle.health -= 2;
                }
            }

            // ÿßŸÅÿ≤ÿß€åÿ¥ ⁄Øÿ±ÿ≥ŸÜ⁄Ø€å
            gameData.currentUser.hunger += 10;
            if (gameData.currentUser.hunger > 100) gameData.currentUser.hunger = 100;

            document.getElementById('travelScreen').style.display = 'none';
            
            // ŸÜŸÖÿß€åÿ¥ ÿßŸÇÿØÿßŸÖÿßÿ™ ŸÖŸÖ⁄©ŸÜ ÿØÿ± ŸÖ⁄©ÿßŸÜ ŸÖŸÇÿµÿØ
            showLocationActions(location);
            
            gameData.currentTravel = null;
            saveGameData();
            updateUserInfo();
            updateStats();
        }

        function showLocationActions(location) {
            let actionsHTML = `
                <h3 style="color: var(--neon); text-align: center; margin-bottom: 12px; font-size: 1.1em;">
                    ${location.icon} ${location.name}
                </h3>
                <div style="color: white; margin-bottom: 15px; font-size: 0.9em;">
                    ÿ®Ÿá ${location.name} ÿ±ÿ≥€åÿØ€åÿØ. ⁄ÜŸá ⁄©ÿßÿ±€å ŸÖ€å‚ÄåÿÆŸàÿßŸá€åÿØ ÿßŸÜÿ¨ÿßŸÖ ÿØŸá€åÿØÿü
                </div>
            `;

            location.actions.forEach(action => {
                actionsHTML += `
                    <button class="btn" onclick="performAction('${location.id}', '${action}')" 
                            style="margin: 4px 0; width: 100%; padding: 10px; font-size: 0.9em;">
                        ${action}
                    </button>
                `;
            });

            actionsHTML += `
                <button class="btn btn-danger" onclick="closeModal()" style="margin-top: 8px; padding: 10px;">
                    ÿ®ÿ≥ÿ™ŸÜ
                </button>
            `;

            showModal(actionsHTML);
        }

        function performAction(locationId, action) {
            const location = gameData.locations.find(l => l.id === locationId);
            
            switch(action) {
                case 'ÿ∫ÿ∞ÿß ÿÆŸàÿ±ÿØŸÜ':
                    if (location.cost && gameData.currentUser.coins >= location.cost) {
                        gameData.currentUser.coins -= location.cost;
                        gameData.currentUser.hunger = Math.max(0, gameData.currentUser.hunger - 30);
                        gameData.currentUser.energy = Math.min(100, gameData.currentUser.energy + 10);
                        showNotification('üçï ÿ∫ÿ∞ÿß ÿÆŸàÿ±ÿØ€åÿØ Ÿà ⁄Øÿ±ÿ≥ŸÜ⁄Ø€å ⁄©ÿßŸáÿ¥ €åÿßŸÅÿ™', 'success');
                    } else {
                        showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ÿ∫ÿ∞ÿß ÿÆŸàÿ±ÿØŸÜ ŸÜÿØÿßÿ±€åÿØ!', 'error');
                    }
                    break;
                    
                case 'ŸÜŸàÿ¥€åÿØŸÜ€å':
                    if (location.cost && gameData.currentUser.coins >= location.cost) {
                        gameData.currentUser.coins -= location.cost;
                        gameData.currentUser.energy = Math.min(100, gameData.currentUser.energy + 15);
                        showNotification('‚òï ŸÜŸàÿ¥€åÿØŸÜ€å ÿÆŸàÿ±ÿØ€åÿØ Ÿà ÿßŸÜÿ±⁄ò€å ÿßŸÅÿ≤ÿß€åÿ¥ €åÿßŸÅÿ™', 'success');
                    } else {
                        showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ŸÜŸàÿ¥€åÿØŸÜ€å ŸÜÿØÿßÿ±€åÿØ!', 'error');
                    }
                    break;
                    
                case 'ÿØÿ±ŸÖÿßŸÜ':
                    if (location.cost && gameData.currentUser.coins >= location.cost) {
                        gameData.currentUser.coins -= location.cost;
                        gameData.currentUser.health = 100;
                        showNotification('üè• ÿØÿ±ŸÖÿßŸÜ ÿ¥ÿØ€åÿØ Ÿà ÿ≥ŸÑÿßŸÖÿ™ ÿ¥ŸÖÿß ⁄©ÿßŸÖŸÑ ÿ¥ÿØ', 'success');
                    } else {
                        showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ÿØÿ±ŸÖÿßŸÜ ŸÜÿØÿßÿ±€åÿØ!', 'error');
                    }
                    break;
                    
                case 'ÿ≥ŸàÿÆÿ™ ⁄Ø€åÿ±€å':
                    if (location.cost && gameData.currentUser.coins >= location.cost) {
                        const vehicle = gameData.currentUser.vehicles.find(v => v.type !== 'bicycle');
                        if (vehicle) {
                            gameData.currentUser.coins -= location.cost;
                            vehicle.fuel = vehicle.type === 'supercar' ? 100 : 50;
                            showNotification('‚õΩ ÿ®ÿß⁄© Ÿàÿ≥€åŸÑŸá ŸÜŸÇŸÑ€åŸá Ÿæÿ± ÿ¥ÿØ', 'success');
                        } else {
                            showNotification('Ÿàÿ≥€åŸÑŸá ŸÜŸÇŸÑ€åŸá ÿ®ŸÜÿ≤€åŸÜ€å ŸÜÿØÿßÿ±€åÿØ!', 'error');
                        }
                    } else {
                        showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ÿ≥ŸàÿÆÿ™ ⁄Ø€åÿ±€å ŸÜÿØÿßÿ±€åÿØ!', 'error');
                    }
                    break;
                    
                case 'ÿÆÿ±€åÿØ Ÿàÿ≥€åŸÑŸá ŸÜŸÇŸÑ€åŸá':
                    closeModal();
                    openApp('transport');
                    break;
                    
                case 'ÿ™ÿπŸÖ€åÿ± Ÿàÿ≥€åŸÑŸá ŸÜŸÇŸÑ€åŸá':
                    closeModal();
                    openApp('repair');
                    break;
                    
                case 'ÿÆÿØŸÖÿßÿ™ ÿ®ÿßŸÜ⁄©€å':
                    closeModal();
                    openApp('bank');
                    break;
                    
                case 'ÿ¢ŸÖŸàÿ≤ÿ¥ ÿ±ÿßŸÜŸÜÿØ⁄Ø€å':
                    closeModal();
                    openApp('education');
                    break;

                case 'ÿÆÿ±€åÿØ ⁄©ÿ™ÿßÿ®':
                    closeModal();
                    openApp('library');
                    break;

                case 'ÿÆÿ±€åÿØ ÿØÿßÿ±Ÿà':
                    closeModal();
                    openApp('pharmacy');
                    break;

                case 'ÿÆÿ±€åÿØ Ÿà ŸÅÿ±Ÿàÿ¥ ŸÖŸÑ⁄©':
                    closeModal();
                    openApp('realestate');
                    break;

                case 'ÿÆÿ±€åÿØ ÿ¢ŸÜŸÑÿß€åŸÜ':
                    closeModal();
                    openApp('onlineshop');
                    break;

                case 'ÿÆÿ±€åÿØ ÿ®ÿ≥ÿ™Ÿá ÿß€åŸÜÿ™ÿ±ŸÜÿ™':
                    closeModal();
                    openApp('internet');
                    break;

                case 'ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ Ÿà⁄©€åŸÑ':
                    closeModal();
                    openApp('lawyer');
                    break;

                case 'Ÿæÿ±ÿØÿßÿÆÿ™ ŸÇÿ®Ÿàÿ∂':
                    closeModal();
                    openApp('municipality');
                    break;

                case 'ÿÆÿ±€åÿØ Ÿà ŸÅÿ±Ÿàÿ¥ ÿ≥ŸáÿßŸÖ':
                    closeModal();
                    openApp('stock');
                    break;

                case 'ÿÆÿ±€åÿØ ŸÖŸàÿßÿØ ÿ∫ÿ∞ÿß€å€å':
                    closeModal();
                    openApp('supermarket');
                    break;

                case 'ÿ¢ŸÖŸàÿ≤ÿ¥ ÿ™ÿÆÿµÿµ€å':
                    closeModal();
                    openApp('training');
                    break;

                case 'ÿÆÿ±€åÿØ ÿ®€åŸÖŸá':
                    closeModal();
                    openApp('insurance');
                    break;

                case 'ÿÆÿ±€åÿØ Ÿàÿ≥ÿß€åŸÑ ÿßŸÑ⁄©ÿ™ÿ±ŸàŸÜ€å⁄©€å':
                    closeModal();
                    // ÿ±ŸÅÿ™ŸÜ ÿ®Ÿá ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá ÿßŸÑ⁄©ÿ™ÿ±ŸàŸÜ€å⁄©
                    const electronicsStore = gameData.locations.find(l => l.id === 'electronicsStore');
                    if (electronicsStore) {
                        showLocationActions(electronicsStore);
                    }
                    break;

                case 'ÿ™ŸÅÿ±€åÿ≠':
                    if (gameData.currentUser.coins >= 200) {
                        gameData.currentUser.coins -= 200;
                        gameData.currentUser.energy = Math.min(100, gameData.currentUser.energy + 20);
                        gameData.currentUser.health = Math.min(100, gameData.currentUser.health + 10);
                        showNotification('üé° ÿ™ŸÅÿ±€åÿ≠ ⁄©ÿ±ÿØ€åÿØ Ÿà ÿßŸÜÿ±⁄ò€å Ÿà ÿ≥ŸÑÿßŸÖÿ™ ÿßŸÅÿ≤ÿß€åÿ¥ €åÿßŸÅÿ™', 'success');
                    } else {
                        showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ÿ™ŸÅÿ±€åÿ≠ ŸÜÿØÿßÿ±€åÿØ!', 'error');
                    }
                    break;

                case 'ÿ™ŸÖÿßÿ¥ÿß€å ŸÅ€åŸÑŸÖ':
                    if (gameData.currentUser.coins >= 300) {
                        gameData.currentUser.coins -= 300;
                        gameData.currentUser.energy = Math.min(100, gameData.currentUser.energy + 15);
                        showNotification('üé¨ ŸÅ€åŸÑŸÖ ÿ™ŸÖÿßÿ¥ÿß ⁄©ÿ±ÿØ€åÿØ Ÿà ÿßŸÜÿ±⁄ò€å ÿßŸÅÿ≤ÿß€åÿ¥ €åÿßŸÅÿ™', 'success');
                    } else {
                        showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ÿ™ŸÖÿßÿ¥ÿß€å ŸÅ€åŸÑŸÖ ŸÜÿØÿßÿ±€åÿØ!', 'error');
                    }
                    break;

                case 'Ÿàÿ±ÿ≤ÿ¥':
                    if (gameData.currentUser.coins >= 150) {
                        gameData.currentUser.coins -= 150;
                        gameData.currentUser.health = Math.min(100, gameData.currentUser.health + 15);
                        gameData.currentUser.energy = Math.max(0, gameData.currentUser.energy - 10);
                        showNotification('‚öΩ Ÿàÿ±ÿ≤ÿ¥ ⁄©ÿ±ÿØ€åÿØ Ÿà ÿ≥ŸÑÿßŸÖÿ™ ÿßŸÅÿ≤ÿß€åÿ¥ €åÿßŸÅÿ™', 'success');
                    } else {
                        showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å Ÿàÿ±ÿ≤ÿ¥ ŸÜÿØÿßÿ±€åÿØ!', 'error');
                    }
                    break;
                    
                case '⁄©ÿßÿ± ÿØÿ± ŸÖÿØÿ±ÿ≥Ÿá':
                case '⁄©ÿßÿ± ÿØÿ± ÿ±ÿ≥ÿ™Ÿàÿ±ÿßŸÜ':
                case '⁄©ÿßÿ± ÿØÿ± ⁄©ÿßŸÅŸá':
                case '⁄©ÿßÿ± ÿØÿ± ÿ≥ŸàŸæÿ±ŸÖÿßÿ±⁄©ÿ™':
                case '⁄©ÿßÿ± ÿØÿ± ÿ®ÿßŸÜ⁄©':
                case '⁄©ÿßÿ± ÿØÿ± ŸæŸÖŸæ ÿ®ŸÜÿ≤€åŸÜ':
                case '⁄©ÿßÿ± ÿØÿ± ÿ™ÿπŸÖ€åÿ±⁄ØÿßŸá':
                case '⁄©ÿßÿ± ÿØÿ± ŸÖÿ±⁄©ÿ≤ ÿÆÿ±€åÿØ':
                case '⁄©ÿßÿ± ÿØÿ± ÿ®€åŸÖÿßÿ±ÿ≥ÿ™ÿßŸÜ':
                case '⁄©ÿßÿ± ÿØÿ± Ÿæÿßÿ±⁄©':
                case '⁄©ÿßÿ± ÿØÿ± ÿ≥€åŸÜŸÖÿß':
                case '⁄©ÿßÿ± ÿØÿ± ÿßÿ≥ÿ™ÿßÿØ€åŸàŸÖ':
                    closeModal();
                    openApp('jobs');
                    break;
                    
                default:
                    showNotification('ÿß€åŸÜ ÿπŸÖŸÑ ŸáŸÜŸàÿ≤ Ÿæ€åÿßÿØŸá‚Äåÿ≥ÿßÿ≤€å ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™', 'warning');
            }
            
            closeModal();
            saveGameData();
            updateUserInfo();
            updateStats();
        }

        function cancelTravel() {
            if (!gameData.currentTravel) return;
            
            document.getElementById('travelScreen').style.display = 'none';
            gameData.currentTravel = null;
            showNotification('ÿ≥ŸÅÿ± ŸÑÿ∫Ÿà ÿ¥ÿØ!', 'warning');
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ÿ¥ÿ∫ŸÑ‚ÄåŸáÿß ====================
        function loadJobs() {
            const jobsContainer = document.getElementById('jobsContainer');
            jobsContainer.innerHTML = '';
            
            gameData.jobs.forEach(job => {
                const hasRequirements = job.requirement.every(req => 
                    gameData.currentUser.certificates.some(cert => cert.name === req)
                );
                
                const isWorking = gameData.currentUser.activeJobs.some(j => j.id === job.id);
                const cooldown = gameData.currentUser.jobCooldowns[job.id] || 0;
                const canWork = hasRequirements && !isWorking && cooldown <= 0 && gameData.currentUser.energy >= job.energyCost;
                
                const jobCard = document.createElement('div');
                jobCard.className = `job-card ${isWorking ? 'working' : ''} ${cooldown > 0 ? 'cooldown' : ''} ${!hasRequirements ? 'disabled' : ''}`;
                jobCard.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: start;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="font-size: 1.8em;">${job.icon}</div>
                            <div>
                                <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${job.name}</h3>
                                <div style="color: #ccc; font-size: 0.8em;">
                                    ÿØÿ≥ÿ™ŸÖÿ≤ÿØ: ${job.salary} ÿ≥⁄©Ÿá
                                </div>
                                <div style="color: #ccc; font-size: 0.75em;">
                                    ÿßŸÜÿ±⁄ò€å: ${job.energyCost}% ‚Ä¢ ÿ≤ŸÖÿßŸÜ: ${job.timeRequired} ÿØŸÇ€åŸÇŸá
                                </div>
                                <div style="color: #ccc; font-size: 0.7em;">
                                    ŸÜŸàÿπ: ${job.workType === 'part-time' ? 'Ÿæÿßÿ±Ÿá‚ÄåŸàŸÇÿ™' : job.workType === 'full-time' ? 'ÿ™ŸÖÿßŸÖ‚ÄåŸàŸÇÿ™' : 'ÿ≤ŸÜÿØÿßŸÜ'}
                                </div>
                                ${job.requirement.length > 0 ? 
                                    `<div style="color: var(--warning); font-size: 0.7em;">
                                        ŸÜ€åÿßÿ≤ŸÖŸÜÿØ: ${job.requirement.join(', ')}
                                    </div>` : ''
                                }
                                ${cooldown > 0 ? 
                                    `<div style="color: var(--danger); font-size: 0.7em;">
                                        ÿ≤ŸÖÿßŸÜ ÿ®ÿßŸÇ€å‚ÄåŸÖÿßŸÜÿØŸá: ${cooldown} ÿØŸÇ€åŸÇŸá
                                    </div>` : ''
                                }
                                ${isWorking ? 
                                    `<div style="color: var(--neon); font-size: 0.7em;">
                                        ÿØÿ± ÿ≠ÿßŸÑ ⁄©ÿßÿ±...
                                    </div>` : ''
                                }
                            </div>
                        </div>
                        <div>
                            ${canWork ? 
                                `<button class="btn" onclick="startJob(${job.id})" style="padding: 6px 12px; font-size: 0.8em;">
                                    ÿ¥ÿ±Ÿàÿπ ⁄©ÿßÿ±
                                </button>` :
                                `<button class="btn" disabled style="padding: 6px 12px; font-size: 0.8em; opacity: 0.5;">
                                    ${!hasRequirements ? 'ŸÜ€åÿßÿ≤ŸÖŸÜÿØ€å' : isWorking ? 'ÿØÿ± ÿ≠ÿßŸÑ ⁄©ÿßÿ±' : cooldown > 0 ? 'ÿßÿ≥ÿ™ÿ±ÿßÿ≠ÿ™' : 'ÿßŸÜÿ±⁄ò€å ⁄©ŸÖ'}
                                </button>`
                            }
                        </div>
                    </div>
                `;
                jobsContainer.appendChild(jobCard);
            });
        }

        function startJob(jobId) {
            const job = gameData.jobs.find(j => j.id === jobId);
            if (!job) return;

            if (gameData.currentUser.energy < job.energyCost) {
                showNotification('ÿßŸÜÿ±⁄ò€å ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ⁄©ÿßÿ± ⁄©ÿ±ÿØŸÜ ŸÜÿØÿßÿ±€åÿØ!', 'error');
                return;
            }

            gameData.currentUser.activeJobs.push({...job, startTime: Date.now()});
            gameData.currentUser.energy -= job.energyCost;

            showNotification(`üíº ⁄©ÿßÿ± ÿ®Ÿá ÿπŸÜŸàÿßŸÜ ${job.name} ÿ¥ÿ±Ÿàÿπ ÿ¥ÿØ`, 'success');

            setTimeout(() => {
                finishJob(jobId);
            }, job.timeRequired * 1000);

            saveGameData();
            updateUserInfo();
            updateStats();
            loadJobs();
        }

        function finishJob(jobId) {
            const jobIndex = gameData.currentUser.activeJobs.findIndex(j => j.id === jobId);
            if (jobIndex === -1) return;

            const job = gameData.currentUser.activeJobs[jobIndex];
            gameData.currentUser.activeJobs.splice(jobIndex, 1);
            
            // ÿØÿ±€åÿßŸÅÿ™ ÿ≠ŸÇŸàŸÇ
            gameData.currentUser.coins += job.salary;
            gameData.currentUser.bankBalance += job.salary;
            
            // ÿßŸÅÿ≤ÿß€åÿ¥ ŸÖŸáÿßÿ±ÿ™
            if (gameData.currentUser.skills[job.type]) {
                gameData.currentUser.skills[job.type] += 1;
            }
            
            // ⁄©ŸàŸÑÿØÿßŸàŸÜ
            gameData.currentUser.jobCooldowns[job.id] = job.cooldown;
            
            // ⁄©ÿßŸáÿ¥ ⁄©ŸàŸÑÿØÿßŸàŸÜ ÿ®Ÿá ŸÖÿ±Ÿàÿ± ÿ≤ŸÖÿßŸÜ
            const cooldownInterval = setInterval(() => {
                if (gameData.currentUser.jobCooldowns[job.id] > 0) {
                    gameData.currentUser.jobCooldowns[job.id]--;
                } else {
                    clearInterval(cooldownInterval);
                }
            }, 60000);

            gameData.currentUser.transactions.push({
                description: `ÿ≠ŸÇŸàŸÇ ${job.name}`,
                amount: job.salary,
                time: new Date().toLocaleTimeString('fa-IR')
            });

            showNotification(`üí∞ ŸÖÿ®ŸÑÿ∫ ${job.salary} ÿ≥⁄©Ÿá ÿ®ÿßÿ®ÿ™ ⁄©ÿßÿ± ÿ®Ÿá ÿπŸÜŸàÿßŸÜ ${job.name} ÿØÿ±€åÿßŸÅÿ™ ⁄©ÿ±ÿØ€åÿØ`, 'success');
            saveGameData();
            updateUserInfo();
            updateStats();
            loadJobs();
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ÿ®ÿßŸÜ⁄© Ÿà ŸàÿßŸÖ ====================
        function loadBank() {
            document.getElementById('bankBalance').textContent = 
                gameData.currentUser.bankBalance.toLocaleString();
            
            // ŸÜŸÖÿß€åÿ¥ ŸàÿßŸÖ‚ÄåŸáÿß€å ŸÅÿπÿßŸÑ
            const activeLoans = document.getElementById('activeLoans');
            if (gameData.currentUser.loans.length === 0) {
                activeLoans.innerHTML = '<div style="text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">ŸàÿßŸÖ ŸÅÿπÿßŸÑ€å ŸÜÿØÿßÿ±€åÿØ</div>';
            } else {
                activeLoans.innerHTML = gameData.currentUser.loans.map(loan => `
                    <div class="transaction-item">
                        <div>
                            <div style="font-size: 0.9em;">ŸàÿßŸÖ ${loan.amount.toLocaleString()} ÿ≥⁄©Ÿá</div>
                            <div style="font-size: 0.7em; color: #ccc;">
                                ÿ±Ÿàÿ≤Ÿáÿß€å ÿ®ÿßŸÇ€å‚ÄåŸÖÿßŸÜÿØŸá: ${loan.daysLeft}
                            </div>
                        </div>
                        <div style="color: var(--warning); font-size: 0.9em;">
                            ${loan.totalAmount.toLocaleString()} ü™ô
                        </div>
                    </div>
                `).join('');
            }
            
            // ŸÜŸÖÿß€åÿ¥ ÿ™ÿ±ÿß⁄©ŸÜÿ¥‚ÄåŸáÿß
            const transactionsList = document.getElementById('transactionsList');
            transactionsList.innerHTML = gameData.currentUser.transactions.length === 0 ?
                '<div style="text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">ÿ™ÿ±ÿß⁄©ŸÜÿ¥€å Ÿàÿ¨ŸàÿØ ŸÜÿØÿßÿ±ÿØ</div>' :
                gameData.currentUser.transactions.slice(-10).reverse().map(transaction => `
                    <div class="transaction-item">
                        <div style="font-size: 0.8em;">${transaction.description}</div>
                        <div style="color: ${transaction.amount >= 0 ? 'var(--neon)' : 'var(--danger)'}; font-size: 0.9em;">
                            ${transaction.amount >= 0 ? '+' : ''}${transaction.amount} ü™ô
                        </div>
                    </div>
                `).join('');
        }

        function showLoanModal() {
            let modalContent = `
                <h3 style="color: var(--neon); text-align: center; margin-bottom: 12px; font-size: 1.1em;">üí∞ ÿØÿ±€åÿßŸÅÿ™ ŸàÿßŸÖ</h3>
                <div style="color: #ccc; margin-bottom: 15px; font-size: 0.9em;">
                    ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ ⁄ÜŸá ŸÖŸÇÿØÿßÿ± ŸàÿßŸÖ ŸÖ€å‚ÄåÿÆŸàÿßŸá€åÿØ:
                </div>
            `;
            
            gameData.loanOptions.forEach(loan => {
                const totalAmount = loan.amount + (loan.amount * loan.interest / 100);
                modalContent += `
                    <div class="repair-option" onclick="takeLoan(${loan.amount}, ${loan.interest}, ${loan.duration})">
                        <div style="display: flex; justify-content: space-between;">
                            <div>
                                <strong style="color: white; font-size: 0.9em;">${loan.amount.toLocaleString()} ÿ≥⁄©Ÿá</strong>
                                <div style="font-size: 0.75em; color: #ccc;">
                                    ÿ≥ŸàÿØ: ${loan.interest}% ‚Ä¢ ŸÖÿØÿ™: ${loan.duration} ÿ±Ÿàÿ≤
                                </div>
                            </div>
                            <div style="color: var(--warning); font-weight: bold; font-size: 0.9em;">
                                ${totalAmount.toLocaleString()} ü™ô
                            </div>
                        </div>
                    </div>
                `;
            });
            
            modalContent += `
                <button class="btn btn-danger" onclick="closeModal()" style="margin-top: 12px; width: 100%; padding: 10px;">
                    ÿßŸÜÿµÿ±ÿßŸÅ
                </button>
            `;
            
            showModal(modalContent);
        }

        function takeLoan(amount, interest, duration) {
            const totalAmount = amount + (amount * interest / 100);
            
            const newLoan = {
                id: Date.now(),
                amount: amount,
                interest: interest,
                totalAmount: totalAmount,
                daysLeft: duration,
                takenAt: new Date().toLocaleDateString('fa-IR')
            };
            
            gameData.currentUser.loans.push(newLoan);
            gameData.currentUser.coins += amount;
            gameData.currentUser.bankBalance += amount;
            
            gameData.currentUser.transactions.push({
                description: `ÿØÿ±€åÿßŸÅÿ™ ŸàÿßŸÖ ${amount.toLocaleString()} ÿ≥⁄©Ÿá`,
                amount: amount,
                time: new Date().toLocaleTimeString('fa-IR')
            });
            
            showNotification(`üí∞ ŸàÿßŸÖ ${amount.toLocaleString()} ÿ≥⁄©Ÿá ÿØÿ±€åÿßŸÅÿ™ ÿ¥ÿØ`, 'success');
            closeModal();
            saveGameData();
            updateUserInfo();
            updateStats();
            loadBank();
        }

        function payLoan() {
            if (gameData.currentUser.loans.length === 0) {
                showNotification('ŸàÿßŸÖ ŸÅÿπÿßŸÑ€å ÿ®ÿ±ÿß€å Ÿæÿ±ÿØÿßÿÆÿ™ ŸÜÿØÿßÿ±€åÿØ', 'warning');
                return;
            }
            
            const loan = gameData.currentUser.loans[0];
            if (gameData.currentUser.coins >= loan.totalAmount) {
                gameData.currentUser.coins -= loan.totalAmount;
                gameData.currentUser.loans.shift();
                
                gameData.currentUser.transactions.push({
                    description: `Ÿæÿ±ÿØÿßÿÆÿ™ ŸàÿßŸÖ ${loan.amount.toLocaleString()} ÿ≥⁄©Ÿá`,
                    amount: -loan.totalAmount,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                showNotification(`‚úÖ ŸàÿßŸÖ ${loan.amount.toLocaleString()} ÿ≥⁄©Ÿá Ÿæÿ±ÿØÿßÿÆÿ™ ÿ¥ÿØ`, 'success');
            } else {
                showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å Ÿæÿ±ÿØÿßÿÆÿ™ ŸàÿßŸÖ ŸÜÿØÿßÿ±€åÿØ!', 'error');
            }
            
            saveGameData();
            updateUserInfo();
            updateStats();
            loadBank();
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ⁄Üÿ™ ====================
        function loadChat() {
            const className = gameData.currentUser.className;
            document.getElementById('chatClassName').textContent = className;
            
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML = '';
            
            if (!gameData.classChats[className]) {
                gameData.classChats[className] = [];
            }
            
            gameData.classChats[className].forEach(msg => {
                const messageElement = document.createElement('div');
                messageElement.className = msg.user === 'ÿ≥€åÿ≥ÿ™ŸÖ' ? 'message received' : 
                    msg.user.includes(gameData.currentUser.firstName) ? 'message sent' : 'message received';
                messageElement.innerHTML = `
                    <div style="font-weight: bold; margin-bottom: 4px; font-size: 0.75em;">${msg.user}</div>
                    <div style="font-size: 0.8em;">${msg.message}</div>
                    <div style="font-size: 0.65em; color: #ccc; margin-top: 4px;">${msg.time}</div>
                `;
                chatMessages.appendChild(messageElement);
            });
            
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function handleChatKeypress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const message = messageInput.value.trim();
            
            if (message) {
                const className = gameData.currentUser.className;
                const newMessage = {
                    user: `${gameData.currentUser.firstName} ${gameData.currentUser.lastName}`,
                    message: message,
                    time: new Date().toLocaleTimeString('fa-IR')
                };
                
                gameData.classChats[className].push(newMessage);
                saveGameData();
                loadChat();
                messageInput.value = '';
            }
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ⁄©ŸàŸÑŸá Ÿæÿ¥ÿ™€å ====================
        function loadBackpack() {
            // ÿ¥ÿ∫ŸÑ‚ÄåŸáÿß€å ŸÅÿπÿßŸÑ
            const activeJobs = document.getElementById('activeJobs');
            activeJobs.innerHTML = gameData.currentUser.activeJobs.length === 0 ? 
                '<div style="grid-column: 1/-1; text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">ÿ¥ÿ∫ŸÑ ŸÅÿπÿßŸÑ€å ŸÜÿØÿßÿ±€åÿØ</div>' :
                gameData.currentUser.activeJobs.map(job => `
                    <div class="item-card">
                        <div class="item-icon">${job.icon}</div>
                        <div style="color: white; font-size: 0.8em;">${job.name}</div>
                        <div class="item-details">${job.salary} ÿ≥⁄©Ÿá</div>
                    </div>
                `).join('');
            
            // ŸÖŸÑ⁄©‚ÄåŸáÿß
            const propertyDeeds = document.getElementById('propertyDeeds');
            propertyDeeds.innerHTML = gameData.currentUser.properties.length === 0 ? 
                '<div style="grid-column: 1/-1; text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">ŸÖŸÑ⁄©€å ŸÜÿØÿßÿ±€åÿØ</div>' :
                gameData.currentUser.properties.map(property => `
                    <div class="item-card">
                        <div class="item-icon">üè†</div>
                        <div style="color: white; font-size: 0.8em;">${property.name}</div>
                        <div class="item-details">${property.type}</div>
                    </div>
                `).join('');
            
            // Ÿàÿ≥ÿß€åŸÑ ŸÜŸÇŸÑ€åŸá
            const vehiclesList = document.getElementById('vehiclesList');
            vehiclesList.innerHTML = gameData.currentUser.vehicles.length === 0 ?
                '<div style="grid-column: 1/-1; text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">Ÿàÿ≥€åŸÑŸá ŸÜŸÇŸÑ€åŸá ŸÜÿØÿßÿ±€åÿØ</div>' :
                gameData.currentUser.vehicles.map(vehicle => `
                    <div class="item-card">
                        <div class="item-icon">${getVehicleIcon(vehicle.type)}</div>
                        <div style="color: white; font-size: 0.8em;">${vehicle.name}</div>
                        <div class="item-details">ÿ≥ŸàÿÆÿ™: ${vehicle.fuel}L</div>
                    </div>
                `).join('');
            
            // ŸÖÿØÿßÿ±⁄©
            const certificatesList = document.getElementById('certificatesList');
            certificatesList.innerHTML = gameData.currentUser.certificates.length === 0 ?
                '<div style="grid-column: 1/-1; text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">⁄ØŸàÿßŸá€åŸÜÿßŸÖŸá ŸÜÿØÿßÿ±€åÿØ</div>' :
                gameData.currentUser.certificates.map(cert => `
                    <div class="item-card">
                        <div class="item-icon">üìÑ</div>
                        <div style="color: white; font-size: 0.8em;">${cert.name}</div>
                        <div class="item-details">${cert.type}</div>
                    </div>
                `).join('');

            // ⁄©ÿ™ÿßÿ®‚ÄåŸáÿß
            const booksList = document.getElementById('booksList');
            booksList.innerHTML = gameData.currentUser.books.length === 0 ?
                '<div style="grid-column: 1/-1; text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">⁄©ÿ™ÿßÿ®€å ŸÜÿØÿßÿ±€åÿØ</div>' :
                gameData.currentUser.books.map(book => `
                    <div class="item-card">
                        <div class="item-icon">üìö</div>
                        <div style="color: white; font-size: 0.8em;">${book.name}</div>
                        <div class="item-details">ŸáŸàÿ¥ +${book.intelligenceBoost}</div>
                    </div>
                `).join('');

            // ÿØÿßÿ±ŸàŸáÿß
            const medicinesList = document.getElementById('medicinesList');
            medicinesList.innerHTML = gameData.currentUser.medicines.length === 0 ?
                '<div style="grid-column: 1/-1; text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">ÿØÿßÿ±Ÿà€å€å ŸÜÿØÿßÿ±€åÿØ</div>' :
                gameData.currentUser.medicines.map(medicine => `
                    <div class="item-card">
                        <div class="item-icon">üíä</div>
                        <div style="color: white; font-size: 0.8em;">${medicine.name}</div>
                        <div class="item-details">${medicine.type === 'intelligence' ? 'ŸáŸàÿ¥' : 'ÿßŸÜÿ±⁄ò€å'} +${medicine.intelligenceBoost || medicine.energyBoost}</div>
                    </div>
                `).join('');

            // ŸÖŸàÿßÿØ ÿ∫ÿ∞ÿß€å€å
            const foodItemsList = document.getElementById('foodItemsList');
            foodItemsList.innerHTML = gameData.currentUser.foodItems.length === 0 ?
                '<div style="grid-column: 1/-1; text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">ŸÖŸàÿßÿØ ÿ∫ÿ∞ÿß€å€å ŸÜÿØÿßÿ±€åÿØ</div>' :
                gameData.currentUser.foodItems.map(food => `
                    <div class="item-card">
                        <div class="item-icon">üçé</div>
                        <div style="color: white; font-size: 0.8em;">${food.name}</div>
                        <div class="item-details">⁄Øÿ±ÿ≥ŸÜ⁄Ø€å -${food.hungerReduction}</div>
                    </div>
                `).join('');

            // Ÿàÿ≥ÿß€åŸÑ ÿßŸÑ⁄©ÿ™ÿ±ŸàŸÜ€å⁄©€å
            const electronicsList = document.getElementById('electronicsList');
            electronicsList.innerHTML = gameData.currentUser.electronics.length === 0 ?
                '<div style="grid-column: 1/-1; text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">Ÿàÿ≥€åŸÑŸá ÿßŸÑ⁄©ÿ™ÿ±ŸàŸÜ€å⁄©€å ŸÜÿØÿßÿ±€åÿØ</div>' :
                gameData.currentUser.electronics.map(electronic => `
                    <div class="item-card">
                        <div class="item-icon">üíª</div>
                        <div style="color: white; font-size: 0.8em;">${electronic.name}</div>
                        <div class="item-details">${electronic.usage}</div>
                    </div>
                `).join('');
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ÿ≠ŸÖŸÑ ŸÜŸÇŸÑ ====================
        function loadTransport() {
            const vehiclesContainer = document.getElementById('vehiclesContainer');
            vehiclesContainer.innerHTML = '';
            
            gameData.vehicles.forEach(vehicle => {
                const isOwned = gameData.currentUser.vehicles.some(v => v.id === vehicle.id);
                const ownedCount = gameData.currentUser.vehicles.filter(v => v.id === vehicle.id).length;
                
                const vehicleCard = document.createElement('div');
                vehicleCard.className = `vehicle-card ${isOwned ? 'owned' : ''}`;
                vehicleCard.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="font-size: 1.8em;">${vehicle.icon}</div>
                            <div>
                                <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${vehicle.name}</h3>
                                <div style="color: #ccc; font-size: 0.8em;">
                                    ÿ≥ÿ±ÿπÿ™: ${vehicle.speed} ÿ´ÿßŸÜ€åŸá/Ÿàÿßÿ≠ÿØ
                                    ${vehicle.type !== 'bicycle' ? `‚Ä¢ ŸÖÿµÿ±ŸÅ ÿ≥ŸàÿÆÿ™: ${vehicle.fuelConsumption}L` : ''}
                                </div>
                                ${isOwned ? 
                                    `<div style="color: var(--neon); font-size: 0.7em; margin-top: 4px;">
                                        ‚úÖ ŸÖÿßŸÑ ÿ¥ŸÖÿß (${ownedCount} ÿπÿØÿØ)
                                    </div>` : ''
                                }
                            </div>
                        </div>
                        <div>
                            ${isOwned ? 
                                `<button class="btn" onclick="buyVehicle(${vehicle.id})" style="padding: 6px 12px; font-size: 0.8em;">
                                    ÿÆÿ±€åÿØ ŸÖÿ¨ÿØÿØ
                                 </button>` :
                                `<div style="color: var(--warning); font-weight: bold; margin-bottom: 8px; font-size: 0.9em;">
                                    ${vehicle.price.toLocaleString()} ü™ô
                                 </div>
                                 <button class="btn" onclick="buyVehicle(${vehicle.id})" style="padding: 6px 12px; font-size: 0.8em;">
                                    ÿÆÿ±€åÿØ
                                 </button>`
                            }
                        </div>
                    </div>
                `;
                vehiclesContainer.appendChild(vehicleCard);
            });
        }

        function buyVehicle(vehicleId) {
            const vehicle = gameData.vehicles.find(v => v.id === vehicleId);
            if (!vehicle) return;
            
            if (gameData.currentUser.coins >= vehicle.price) {
                gameData.currentUser.coins -= vehicle.price;
                gameData.currentUser.vehicles.push({...vehicle});
                
                gameData.currentUser.transactions.push({
                    description: `ÿÆÿ±€åÿØ ${vehicle.name}`,
                    amount: -vehicle.price,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                saveGameData();
                updateUserInfo();
                updateStats();
                loadTransport();
                showNotification(`‚úÖ ÿÆÿ±€åÿØ ${vehicle.name} ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿßŸÜÿ¨ÿßŸÖ ÿ¥ÿØ!`, 'success');
            } else {
                showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ÿÆÿ±€åÿØ ŸÜÿØÿßÿ±€åÿØ!', 'error');
            }
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ÿ¢ŸÖŸàÿ≤ÿ¥ ====================
        function loadEducation() {
            const educationCourses = document.getElementById('educationCourses');
            const licenseOptions = document.getElementById('licenseOptions');
            
            // ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ÿ™ÿ≠ÿµ€åŸÑ€å
            educationCourses.innerHTML = gameData.educationClasses.map(course => {
                const hasRequirements = course.requirement.every(req => 
                    gameData.currentUser.certificates.some(cert => cert.name === req)
                );
                const isActive = gameData.currentUser.activeCourses.some(c => c.id === course.id);
                const isCompleted = gameData.currentUser.certificates.some(cert => cert.name === course.name);
                const canEnroll = hasRequirements && !isActive && !isCompleted && 
                                 gameData.currentUser.intelligence >= course.intelligenceRequired;
                
                return `
                    <div class="course-card ${isActive ? 'active' : ''} ${isCompleted ? 'completed' : ''}">
                        <div style="display: flex; justify-content: space-between; align-items: start;">
                            <div>
                                <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${course.name}</h3>
                                <div style="color: #ccc; font-size: 0.8em;">
                                    ÿ≤ŸÖÿßŸÜ ŸÖŸàÿ±ÿØ ŸÜ€åÿßÿ≤: ${course.timeRequired} ÿØŸÇ€åŸÇŸá
                                </div>
                                <div style="color: #ccc; font-size: 0.75em;">
                                    ŸáŸàÿ¥ ŸÖŸàÿ±ÿØ ŸÜ€åÿßÿ≤: ${course.intelligenceRequired}%
                                    ${course.requirement.length > 0 ? `‚Ä¢ Ÿæ€åÿ¥ ŸÜ€åÿßÿ≤: ${course.requirement.join(', ')}` : ''}
                                </div>
                                ${isActive ? 
                                    `<div style="color: var(--neon); font-size: 0.7em; margin-top: 4px;">
                                        ÿØÿ± ÿ≠ÿßŸÑ ÿ™ÿ≠ÿµ€åŸÑ...
                                    </div>` : ''
                                }
                                ${isCompleted ? 
                                    `<div style="color: var(--secondary); font-size: 0.7em; margin-top: 4px;">
                                        ‚úÖ ÿ™⁄©ŸÖ€åŸÑ ÿ¥ÿØŸá
                                    </div>` : ''
                                }
                            </div>
                            <div>
                                ${!isCompleted ? 
                                    `<button class="btn" onclick="startCourse(${course.id})" 
                                             ${!canEnroll ? 'disabled style="opacity: 0.5;"' : ''}
                                             style="padding: 6px 12px; font-size: 0.8em;">
                                        ${course.price > 0 ? `${course.price} ü™ô` : 'ÿ±ÿß€å⁄ØÿßŸÜ'}
                                    </button>` :
                                    `<button class="btn" disabled style="padding: 6px 12px; font-size: 0.8em; opacity: 0.5;">
                                        ÿ™⁄©ŸÖ€åŸÑ ÿ¥ÿØŸá
                                    </button>`
                                }
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            // ⁄ØŸàÿßŸá€åŸÜÿßŸÖŸá‚ÄåŸáÿß
            licenseOptions.innerHTML = gameData.courses.filter(c => c.type === 'license').map(course => `
                <div class="repair-option" onclick="takeCourse(${course.id})">
                    <div style="display: flex; justify-content: space-between;">
                        <div>
                            <strong style="color: white; font-size: 0.9em;">${course.name}</strong>
                            <div style="font-size: 0.75em; color: #ccc;">
                                ${course.requirement.length > 0 ? 'Ÿæ€åÿ¥ ŸÜ€åÿßÿ≤: ' + course.requirement.join(', ') : 'ÿ®ÿØŸàŸÜ Ÿæ€åÿ¥ ŸÜ€åÿßÿ≤'}
                            </div>
                        </div>
                        <div style="color: var(--warning); font-weight: bold; font-size: 0.9em;">
                            ${course.price} ü™ô
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function startCourse(courseId) {
            const course = gameData.educationClasses.find(c => c.id === courseId);
            if (!course) return;

            // ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ÿ≤ŸÖÿßŸÜ ŸàÿßŸÇÿπ€å ÿ®ÿß ÿØÿ± ŸÜÿ∏ÿ± ⁄Øÿ±ŸÅÿ™ŸÜ ⁄©ÿ™ÿßÿ®‚ÄåŸáÿß Ÿà ŸÇÿ±ÿµ‚ÄåŸáÿß
            let actualTime = course.timeRequired;
            
            // ⁄©ÿßŸáÿ¥ ÿ≤ŸÖÿßŸÜ ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ⁄©ÿ™ÿßÿ®‚ÄåŸáÿß
            gameData.currentUser.books.forEach(book => {
                actualTime -= (actualTime * book.studyTimeReduction / 100);
            });
            
            // ⁄©ÿßŸáÿ¥ ÿ≤ŸÖÿßŸÜ ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ŸÇÿ±ÿµ ŸáŸàÿ¥
            const activeIntelligenceMedicine = gameData.currentUser.medicines.find(m => 
                m.type === 'intelligence' && m.active
            );
            if (activeIntelligenceMedicine) {
                actualTime -= (actualTime * 0.1); // 10% ⁄©ÿßŸáÿ¥ ÿ®ÿß ŸÇÿ±ÿµ ŸáŸàÿ¥
            }
            
            actualTime = Math.max(5, Math.floor(actualTime)); // ÿ≠ÿØÿßŸÇŸÑ 5 ÿØŸÇ€åŸÇŸá

            gameData.currentUser.activeCourses.push({
                ...course,
                startTime: Date.now(),
                actualTime: actualTime
            });

            showNotification(`üéì ${course.name} ÿ¥ÿ±Ÿàÿπ ÿ¥ÿØ (${actualTime} ÿØŸÇ€åŸÇŸá)`, 'success');

            setTimeout(() => {
                finishCourse(courseId);
            }, actualTime * 1000);

            saveGameData();
            loadEducation();
        }

        function finishCourse(courseId) {
            const courseIndex = gameData.currentUser.activeCourses.findIndex(c => c.id === courseId);
            if (courseIndex === -1) return;

            const course = gameData.currentUser.activeCourses[courseIndex];
            gameData.currentUser.activeCourses.splice(courseIndex, 1);
            
            // ÿØÿ±€åÿßŸÅÿ™ ŸÖÿØÿ±⁄©
            gameData.currentUser.certificates.push({
                id: Date.now(),
                name: course.name,
                type: 'education',
                issueDate: new Date().toLocaleDateString('fa-IR')
            });
            
            // ÿßŸÅÿ≤ÿß€åÿ¥ ŸáŸàÿ¥
            gameData.currentUser.intelligence = Math.min(100, gameData.currentUser.intelligence + 10);

            showNotification(`üéì ${course.name} ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ®Ÿá Ÿæÿß€åÿßŸÜ ÿ±ÿ≥€åÿØ! ŸáŸàÿ¥ ÿ¥ŸÖÿß ÿßŸÅÿ≤ÿß€åÿ¥ €åÿßŸÅÿ™`, 'success');
            saveGameData();
            updateUserInfo();
            updateStats();
            loadEducation();
        }

        function takeCourse(courseId) {
            const course = gameData.courses.find(c => c.id === courseId);
            if (!course) return;
            
            // ÿ®ÿ±ÿ±ÿ≥€å Ÿæ€åÿ¥ ŸÜ€åÿßÿ≤Ÿáÿß
            if (course.requirement.length > 0) {
                const hasRequirements = course.requirement.every(req => 
                    gameData.currentUser.certificates.some(cert => cert.name === req)
                );
                
                if (!hasRequirements) {
                    showNotification(`ÿ®ÿ±ÿß€å ⁄Øÿ∞ÿ±ÿßŸÜÿØŸÜ ÿß€åŸÜ ÿØŸàÿ±Ÿá ŸÜ€åÿßÿ≤ ÿ®Ÿá ${course.requirement.join(' Ÿà ')} ÿØÿßÿ±€åÿØ!`, 'error');
                    return;
                }
            }
            
            if (gameData.currentUser.coins >= course.price) {
                gameData.currentUser.coins -= course.price;
                gameData.currentUser.certificates.push({
                    id: Date.now(),
                    name: course.name,
                    type: course.type,
                    issueDate: new Date().toLocaleDateString('fa-IR')
                });
                
                gameData.currentUser.transactions.push({
                    description: `ÿ´ÿ®ÿ™ ŸÜÿßŸÖ ÿØÿ± ${course.name}`,
                    amount: -course.price,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                saveGameData();
                updateUserInfo();
                updateStats();
                loadEducation();
                showNotification(`üéì ÿ´ÿ®ÿ™ ŸÜÿßŸÖ ÿØÿ± ${course.name} ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿßŸÜÿ¨ÿßŸÖ ÿ¥ÿØ!`, 'success');
            } else {
                showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ÿ´ÿ®ÿ™ ŸÜÿßŸÖ ŸÜÿØÿßÿ±€åÿØ!', 'error');
            }
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ÿ™ÿπŸÖ€åÿ±⁄ØÿßŸá ====================
        function loadRepairShop() {
            const repairContainer = document.getElementById('repairContainer');
            repairContainer.innerHTML = '';
            
            if (gameData.currentUser.vehicles.length === 0) {
                repairContainer.innerHTML = `
                    <div style="text-align: center; padding: 30px; color: #ccc;">
                        <div style="font-size: 2.5em;">üîß</div>
                        <p style="font-size: 0.9em;">Ÿàÿ≥€åŸÑŸá ŸÜŸÇŸÑ€åŸá‚Äåÿß€å ÿ®ÿ±ÿß€å ÿ™ÿπŸÖ€åÿ± ŸÜÿØÿßÿ±€åÿØ!</p>
                    </div>
                `;
                return;
            }
            
            gameData.currentUser.vehicles.forEach(vehicle => {
                const healthPercent = (vehicle.health / vehicle.maxHealth) * 100;
                const healthColor = 
                    healthPercent >= 70 ? '#10b981' :
                    healthPercent >= 40 ? '#f59e0b' : '#ef4444';
                
                const vehicleStatus = document.createElement('div');
                vehicleStatus.className = 'vehicle-status';
                vehicleStatus.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <div>
                            <div style="font-size: 1.8em;">${vehicle.icon}</div>
                            <h3 style="color: white; font-size: 0.9em;">${vehicle.name}</h3>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.1em; color: ${healthColor};">
                                ${Math.round(healthPercent)}%
                            </div>
                            <div style="font-size: 0.7em; color: #ccc;">ÿ≥ŸÑÿßŸÖÿ™</div>
                        </div>
                    </div>
                    
                    <div class="health-bar">
                        <div class="health-fill" style="width: ${healthPercent}%"></div>
                    </div>
                    
                    <div style="margin-top: 12px;">
                        <h4 style="color: var(--neon); margin-bottom: 8px; font-size: 0.9em;">⁄Øÿ≤€åŸÜŸá‚ÄåŸáÿß€å ÿ™ÿπŸÖ€åÿ±:</h4>
                        ${gameData.repairOptions.map(option => `
                            <div class="repair-option" onclick="repairVehicle(${vehicle.id}, ${option.healthRestore}, ${option.cost})">
                                <div style="display: flex; justify-content: space-between;">
                                    <div>
                                        <strong style="color: white; font-size: 0.9em;">${option.name}</strong>
                                        <div style="font-size: 0.75em; color: #ccc;">
                                            ÿ®ÿßÿ≤€åÿßÿ®€å: ${option.healthRestore}% - ÿ≤ŸÖÿßŸÜ: ${option.time} ÿØŸÇ€åŸÇŸá
                                        </div>
                                    </div>
                                    <div style="color: var(--warning); font-weight: bold; font-size: 0.9em;">
                                        ${option.cost} ü™ô
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
                repairContainer.appendChild(vehicleStatus);
            });
        }

        function repairVehicle(vehicleId, healthRestore, cost) {
            const vehicle = gameData.currentUser.vehicles.find(v => v.id === vehicleId);
            if (!vehicle) return;
            
            if (gameData.currentUser.coins >= cost) {
                gameData.currentUser.coins -= cost;
                vehicle.health = Math.min(vehicle.maxHealth, vehicle.health + healthRestore);
                
                gameData.currentUser.transactions.push({
                    description: `ÿ™ÿπŸÖ€åÿ± ${vehicle.name}`,
                    amount: -cost,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                saveGameData();
                updateUserInfo();
                updateStats();
                loadRepairShop();
                showNotification(`üîß ÿ™ÿπŸÖ€åÿ± ${vehicle.name} ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿßŸÜÿ¨ÿßŸÖ ÿ¥ÿØ!`, 'success');
            } else {
                showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ÿ™ÿπŸÖ€åÿ± ŸÜÿØÿßÿ±€åÿØ!', 'error');
            }
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ÿ®ÿßÿ≤ÿßÿ± ====================
        function loadMarket() {
            const marketAds = document.getElementById('marketAds');
            marketAds.innerHTML = '';
            
            if (gameData.marketAds.length === 0) {
                marketAds.innerHTML = '<div style="text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">Ÿá€å⁄Ü ÿ¢⁄ØŸá€å ŸÅÿπÿßŸÑ€å Ÿàÿ¨ŸàÿØ ŸÜÿØÿßÿ±ÿØ</div>';
                return;
            }
            
            gameData.marketAds.forEach(ad => {
                const adElement = document.createElement('div');
                adElement.className = 'market-ad';
                adElement.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;">
                        <div>
                            <h4 style="color: white; margin-bottom: 4px; font-size: 0.9em;">${ad.item}</h4>
                            <div style="color: #ccc; font-size: 0.8em;">ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá: ${ad.user} (⁄©ŸÑÿßÿ≥ ${ad.userClass})</div>
                            <div style="color: #ccc; font-size: 0.8em; margin-top: 4px;">${ad.description}</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="color: var(--warning); font-weight: bold; font-size: 1.1em;">${ad.price.toLocaleString()} ü™ô</div>
                            <button class="btn" onclick="buyFromMarket(${ad.id})" style="padding: 6px 12px; margin-top: 8px; font-size: 0.8em;">
                                ÿÆÿ±€åÿØ
                            </button>
                        </div>
                    </div>
                `;
                marketAds.appendChild(adElement);
            });
        }

        function showNewAdModal() {
            const modalContent = `
                <h3 style="color: var(--neon); text-align: center; margin-bottom: 12px; font-size: 1.1em;">üì¢ ÿ´ÿ®ÿ™ ÿ¢⁄ØŸá€å ÿ¨ÿØ€åÿØ</h3>
                <div style="margin-bottom: 12px;">
                    <label style="color: white; display: block; margin-bottom: 4px; font-size: 0.9em;">ÿπŸÜŸàÿßŸÜ ÿ¢⁄ØŸá€å:</label>
                    <input type="text" id="adTitle" placeholder="ŸÖÿ´ÿßŸÑ: ŸÖŸàÿ™Ÿàÿ± ÿØÿ≥ÿ™ ÿØŸàŸÖ" style="width: 100%; padding: 8px; border-radius: 6px; border: 1px solid #333; background: rgba(255,255,255,0.1); color: white; font-size: 0.9em;">
                </div>
                <div style="margin-bottom: 12px;">
                    <label style="color: white; display: block; margin-bottom: 4px; font-size: 0.9em;">ŸÇ€åŸÖÿ™ (ÿ≥⁄©Ÿá):</label>
                    <input type="number" id="adPrice" placeholder="1000" style="width: 100%; padding: 8px; border-radius: 6px; border: 1px solid #333; background: rgba(255,255,255,0.1); color: white; font-size: 0.9em;">
                </div>
                <div style="margin-bottom: 12px;">
                    <label style="color: white; display: block; margin-bottom: 4px; font-size: 0.9em;">ÿ™Ÿàÿ∂€åÿ≠ÿßÿ™:</label>
                    <textarea id="adDescription" placeholder="ÿ™Ÿàÿ∂€åÿ≠ÿßÿ™ ÿØÿ±ÿ®ÿßÿ±Ÿá ⁄©ÿßŸÑÿß..." style="width: 100%; padding: 8px; border-radius: 6px; border: 1px solid #333; background: rgba(255,255,255,0.1); color: white; height: 70px; font-size: 0.9em;"></textarea>
                </div>
                <div style="margin-bottom: 12px;">
                    <label style="color: white; display: block; margin-bottom: 4px; font-size: 0.9em;">Ÿáÿ≤€åŸÜŸá ÿ¢⁄ØŸá€å (50 ÿ≥⁄©Ÿá):</label>
                    <div style="color: var(--warning); font-size: 0.9em;">50 ü™ô</div>
                </div>
                <button class="btn" onclick="postNewAd()" style="width: 100%; padding: 10px; font-size: 0.9em;">
                    Ÿæÿ±ÿØÿßÿÆÿ™ Ÿà ÿ´ÿ®ÿ™ ÿ¢⁄ØŸá€å
                </button>
            `;
            showModal(modalContent);
        }

        function postNewAd() {
            const title = document.getElementById('adTitle').value;
            const price = parseInt(document.getElementById('adPrice').value);
            const description = document.getElementById('adDescription').value;
            
            if (!title || !price || !description) {
                showNotification('ŸÑÿ∑ŸÅÿßŸã ÿ™ŸÖÿßŸÖ ŸÅ€åŸÑÿØŸáÿß ÿ±ÿß Ÿæÿ± ⁄©ŸÜ€åÿØ', 'error');
                return;
            }

            // Ÿáÿ≤€åŸÜŸá ÿ¢⁄ØŸá€å
            if (gameData.currentUser.coins < 50) {
                showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å Ÿæÿ±ÿØÿßÿÆÿ™ Ÿáÿ≤€åŸÜŸá ÿ¢⁄ØŸá€å ŸÜÿØÿßÿ±€åÿØ!', 'error');
                return;
            }
            
            const newAd = {
                id: Date.now(),
                user: `${gameData.currentUser.firstName} ${gameData.currentUser.lastName}`,
                userClass: gameData.currentUser.className,
                item: title,
                price: price,
                description: description,
                type: 'other'
            };
            
            gameData.currentUser.coins -= 50;
            gameData.marketAds.push(newAd);
            saveGameData();
            loadMarket();
            closeModal();
            showNotification('üì¢ ÿ¢⁄ØŸá€å ÿ¥ŸÖÿß ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ´ÿ®ÿ™ ÿ¥ÿØ! (50 ÿ≥⁄©Ÿá Ÿáÿ≤€åŸÜŸá ⁄©ÿ≥ÿ± ÿ¥ÿØ)', 'success');
        }

        function buyFromMarket(adId) {
            const ad = gameData.marketAds.find(a => a.id === adId);
            if (!ad) return;
            
            if (gameData.currentUser.coins >= ad.price) {
                gameData.currentUser.coins -= ad.price;
                gameData.marketAds = gameData.marketAds.filter(a => a.id !== adId);
                
                // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ ÿ®Ÿá ⁄©ŸàŸÑŸá Ÿæÿ¥ÿ™€å
                gameData.currentUser.backpack.push({
                    id: Date.now(),
                    name: ad.item,
                    type: 'purchased',
                    description: ad.description
                });
                
                gameData.currentUser.transactions.push({
                    description: `ÿÆÿ±€åÿØ ${ad.item} ÿßÿ≤ ÿ®ÿßÿ≤ÿßÿ±`,
                    amount: -ad.price,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                saveGameData();
                updateUserInfo();
                updateStats();
                loadMarket();
                showNotification(`üõí ÿÆÿ±€åÿØ ${ad.item} ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿßŸÜÿ¨ÿßŸÖ ÿ¥ÿØ!`, 'success');
            } else {
                showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ÿÆÿ±€åÿØ ŸÜÿØÿßÿ±€åÿØ!', 'error');
            }
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ⁄©ÿ™ÿßÿ®ÿÆÿßŸÜŸá ====================
        function loadLibrary() {
            const libraryBooks = document.getElementById('libraryBooks');
            libraryBooks.innerHTML = gameData.books.map(book => `
                <div class="product-card" onclick="buyBook(${book.id})">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="font-size: 1.8em;">üìö</div>
                            <div>
                                <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${book.name}</h3>
                                <div style="color: #ccc; font-size: 0.8em;">
                                    ÿßŸÅÿ≤ÿß€åÿ¥ ŸáŸàÿ¥: +${book.intelligenceBoost}%
                                </div>
                                <div style="color: #ccc; font-size: 0.75em;">
                                    ⁄©ÿßŸáÿ¥ ÿ≤ŸÖÿßŸÜ ÿ™ÿ≠ÿµ€åŸÑ: ${book.studyTimeReduction}%
                                </div>
                            </div>
                        </div>
                        <div style="color: var(--warning); font-weight: bold; font-size: 1.1em;">
                            ${book.price} ü™ô
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function buyBook(bookId) {
            const book = gameData.books.find(b => b.id === bookId);
            if (!book) return;
            
            if (gameData.currentUser.coins >= book.price) {
                gameData.currentUser.coins -= book.price;
                gameData.currentUser.books.push({...book});
                
                // ÿßŸÅÿ≤ÿß€åÿ¥ ŸáŸàÿ¥ ŸÅŸàÿ±€å
                gameData.currentUser.intelligence = Math.min(100, gameData.currentUser.intelligence + book.intelligenceBoost);
                
                gameData.currentUser.transactions.push({
                    description: `ÿÆÿ±€åÿØ ${book.name}`,
                    amount: -book.price,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                saveGameData();
                updateUserInfo();
                updateStats();
                showNotification(`üìö ÿÆÿ±€åÿØ ${book.name} ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿßŸÜÿ¨ÿßŸÖ ÿ¥ÿØ! ŸáŸàÿ¥ ÿ¥ŸÖÿß ÿßŸÅÿ≤ÿß€åÿ¥ €åÿßŸÅÿ™`, 'success');
            } else {
                showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ÿÆÿ±€åÿØ ⁄©ÿ™ÿßÿ® ŸÜÿØÿßÿ±€åÿØ!', 'error');
            }
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ÿØÿßÿ±ŸàÿÆÿßŸÜŸá ====================
        function loadPharmacy() {
            const pharmacyItems = document.getElementById('pharmacyItems');
            pharmacyItems.innerHTML = gameData.medicines.map(medicine => `
                <div class="product-card" onclick="buyMedicine(${medicine.id})">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="font-size: 1.8em;">üíä</div>
                            <div>
                                <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${medicine.name}</h3>
                                <div style="color: #ccc; font-size: 0.8em;">
                                    ${medicine.type === 'intelligence' ? 
                                        `ÿßŸÅÿ≤ÿß€åÿ¥ ŸáŸàÿ¥: +${medicine.intelligenceBoost}% (${medicine.duration} ÿØŸÇ€åŸÇŸá)` :
                                        medicine.type === 'energy' ?
                                        `ÿßŸÅÿ≤ÿß€åÿ¥ ÿßŸÜÿ±⁄ò€å: +${medicine.energyBoost}% (${medicine.duration} ÿØŸÇ€åŸÇŸá)` :
                                        `ÿßŸÅÿ≤ÿß€åÿ¥ ÿ≥ŸÑÿßŸÖÿ™: +${medicine.healthBoost}%`
                                    }
                                </div>
                            </div>
                        </div>
                        <div style="color: var(--warning); font-weight: bold; font-size: 1.1em;">
                            ${medicine.price} ü™ô
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function buyMedicine(medicineId) {
            const medicine = gameData.medicines.find(m => m.id === medicineId);
            if (!medicine) return;
            
            if (gameData.currentUser.coins >= medicine.price) {
                gameData.currentUser.coins -= medicine.price;
                gameData.currentUser.medicines.push({...medicine, active: true});
                
                // ÿßÿ´ÿ± ŸÅŸàÿ±€å
                if (medicine.type === 'health') {
                    gameData.currentUser.health = Math.min(100, gameData.currentUser.health + medicine.healthBoost);
                }
                
                gameData.currentUser.transactions.push({
                    description: `ÿÆÿ±€åÿØ ${medicine.name}`,
                    amount: -medicine.price,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                // ÿ∫€åÿ±ŸÅÿπÿßŸÑ ⁄©ÿ±ÿØŸÜ ÿßÿ´ÿ± ÿ®ÿπÿØ ÿßÿ≤ ŸÖÿØÿ™ ÿ≤ŸÖÿßŸÜ
                if (medicine.duration > 0) {
                    setTimeout(() => {
                        const medIndex = gameData.currentUser.medicines.findIndex(m => 
                            m.id === medicine.id && m.active
                        );
                        if (medIndex !== -1) {
                            gameData.currentUser.medicines[medIndex].active = false;
                            saveGameData();
                            showNotification(`üíä ÿßÿ´ÿ± ${medicine.name} ÿ®Ÿá Ÿæÿß€åÿßŸÜ ÿ±ÿ≥€åÿØ`, 'warning');
                        }
                    }, medicine.duration * 60000);
                }
                
                saveGameData();
                updateUserInfo();
                updateStats();
                showNotification(`üíä ÿÆÿ±€åÿØ ${medicine.name} ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿßŸÜÿ¨ÿßŸÖ ÿ¥ÿØ!`, 'success');
            } else {
                showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ÿÆÿ±€åÿØ ÿØÿßÿ±Ÿà ŸÜÿØÿßÿ±€åÿØ!', 'error');
            }
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ÿßŸÖŸÑÿß⁄© ====================
        function loadRealEstate() {
            const propertiesForSale = document.getElementById('propertiesForSale');
            const userProperties = document.getElementById('userProperties');
            
            // ŸÖŸÑ⁄©‚ÄåŸáÿß€å ÿ®ÿ±ÿß€å ŸÅÿ±Ÿàÿ¥
            propertiesForSale.innerHTML = gameData.properties.map(property => {
                const isOwned = gameData.currentUser.properties.some(p => p.id === property.id);
                
                return `
                    <div class="property-card ${isOwned ? 'owned' : ''}">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="font-size: 1.8em;">üè†</div>
                                <div>
                                    <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${property.name}</h3>
                                    <div style="color: #ccc; font-size: 0.8em;">
                                        ŸÜŸàÿπ: ${property.type} ‚Ä¢ ŸÅÿ∂ÿß€å: ${property.space}
                                    </div>
                                    <div style="color: #ccc; font-size: 0.75em;">
                                        ŸÇÿ®Ÿàÿ∂ ŸÖÿßŸá€åÿßŸÜŸá: ${property.bills} ÿ≥⁄©Ÿá
                                    </div>
                                    <div style="color: #ccc; font-size: 0.7em;">
                                        ÿßŸÖ⁄©ÿßŸÜÿßÿ™: ${property.features.join('ÿå ')}
                                    </div>
                                    ${isOwned ? 
                                        `<div style="color: var(--neon); font-size: 0.7em; margin-top: 4px;">
                                            ‚úÖ ŸÖÿßŸÑ ÿ¥ŸÖÿß
                                        </div>` : ''
                                    }
                                </div>
                            </div>
                            <div>
                                ${!isOwned ? 
                                    `<div style="color: var(--warning); font-weight: bold; margin-bottom: 8px; font-size: 0.9em;">
                                        ${property.price.toLocaleString()} ü™ô
                                     </div>
                                     <button class="btn" onclick="buyProperty(${property.id})" style="padding: 6px 12px; font-size: 0.8em;">
                                        ÿÆÿ±€åÿØ
                                     </button>` :
                                    `<button class="btn" onclick="goToHome()" style="padding: 6px 12px; font-size: 0.8em;">
                                        ÿ±ŸÅÿ™ŸÜ ÿ®Ÿá ÿÆÿßŸÜŸá
                                     </button>`
                                }
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            // ŸÖŸÑ⁄©‚ÄåŸáÿß€å ⁄©ÿßÿ±ÿ®ÿ±
            userProperties.innerHTML = gameData.currentUser.properties.length === 0 ?
                '<div style="text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">ŸÖŸÑ⁄©€å ŸÜÿØÿßÿ±€åÿØ</div>' :
                gameData.currentUser.properties.map(property => `
                    <div class="property-card owned">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="font-size: 1.8em;">üè†</div>
                                <div>
                                    <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${property.name}</h3>
                                    <div style="color: #ccc; font-size: 0.8em;">
                                        ŸÜŸàÿπ: ${property.type} ‚Ä¢ ŸÇÿ®Ÿàÿ∂: ${property.bills} ÿ≥⁄©Ÿá
                                    </div>
                                    <div style="color: #ccc; font-size: 0.7em;">
                                        ÿßŸÖ⁄©ÿßŸÜÿßÿ™: ${property.features.join('ÿå ')}
                                    </div>
                                </div>
                            </div>
                            <button class="btn" onclick="goToHome()" style="padding: 6px 12px; font-size: 0.8em;">
                                ÿ±ŸÅÿ™ŸÜ ÿ®Ÿá ÿÆÿßŸÜŸá
                            </button>
                        </div>
                    </div>
                `).join('');
        }

        function buyProperty(propertyId) {
            const property = gameData.properties.find(p => p.id === propertyId);
            if (!property) return;
            
            if (gameData.currentUser.coins >= property.price) {
                gameData.currentUser.coins -= property.price;
                gameData.currentUser.properties.push({...property});
                
                gameData.currentUser.transactions.push({
                    description: `ÿÆÿ±€åÿØ ${property.name}`,
                    amount: -property.price,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                // ÿ™ŸàŸÑ€åÿØ ŸÇÿ®ÿ∂ ÿ®ÿ±ÿß€å ŸÖŸÑ⁄© ÿ¨ÿØ€åÿØ
                generateBills();
                
                saveGameData();
                updateUserInfo();
                updateStats();
                loadRealEstate();
                showNotification(`üè† ÿÆÿ±€åÿØ ${property.name} ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿßŸÜÿ¨ÿßŸÖ ÿ¥ÿØ!`, 'success');
            } else {
                showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ÿÆÿ±€åÿØ ŸÖŸÑ⁄© ŸÜÿØÿßÿ±€åÿØ!', 'error');
            }
        }

        function goToHome() {
            if (gameData.currentUser.properties.length === 0) {
                showNotification('ÿ¥ŸÖÿß ŸÖŸÑ⁄©€å ŸÜÿØÿßÿ±€åÿØ!', 'error');
                return;
            }
            
            // ÿ±ŸÅÿ™ŸÜ ÿ®Ÿá ÿÆÿßŸÜŸá
            const userHome = gameData.currentUser.properties[0]; // ÿßŸàŸÑ€åŸÜ ŸÖŸÑ⁄© ⁄©ÿßÿ±ÿ®ÿ±
            const homeLocation = gameData.locations.find(l => l.id === 'apartments');
            
            if (homeLocation) {
                startTravel(homeLocation, 1, 'Ÿæ€åÿßÿØŸá', null); // ÿ≥ŸÅÿ± ÿ≥ÿ±€åÿπ ÿ®Ÿá ÿÆÿßŸÜŸá
            }
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ÿÆÿßŸÜŸá ====================
        function loadHome() {
            const homeFeatures = document.getElementById('homeFeatures');
            
            if (gameData.currentUser.properties.length === 0) {
                homeFeatures.innerHTML = `
                    <div style="text-align: center; padding: 30px; color: #ccc;">
                        <div style="font-size: 3em;">üè†</div>
                        <p style="font-size: 0.9em; margin-top: 10px;">ÿ¥ŸÖÿß ŸáŸÜŸàÿ≤ ÿÆÿßŸÜŸá ŸÜÿØÿßÿ±€åÿØ!</p>
                        <p style="font-size: 0.8em; margin-top: 5px;">ÿ®ÿ±ÿß€å ÿÆÿ±€åÿØ ÿÆÿßŸÜŸá ÿ®Ÿá ÿØŸÅÿ™ÿ± ÿßŸÖŸÑÿß⁄© ŸÖÿ±ÿßÿ¨ÿπŸá ⁄©ŸÜ€åÿØ</p>
                        <button class="btn" onclick="openApp('realestate')" style="margin-top: 15px;">
                            ÿ±ŸÅÿ™ŸÜ ÿ®Ÿá ÿØŸÅÿ™ÿ± ÿßŸÖŸÑÿß⁄©
                        </button>
                    </div>
                `;
                return;
            }
            
            const userHome = gameData.currentUser.properties[0];
            homeFeatures.innerHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 2.5em;">üè†</div>
                    <h3 style="color: var(--neon); margin: 10px 0;">${userHome.name}</h3>
                    <div style="color: #ccc; font-size: 0.8em;">ÿßŸÖ⁄©ÿßŸÜÿßÿ™: ${userHome.features.join('ÿå ')}</div>
                </div>
            `;
            
            // ŸÜŸÖÿß€åÿ¥ ÿßŸÖ⁄©ÿßŸÜÿßÿ™ ÿÆÿßŸÜŸá
            gameData.homeFeatures.forEach(feature => {
                if (userHome.features.includes(feature.name)) {
                    const featureElement = document.createElement('div');
                    featureElement.className = 'home-feature';
                    featureElement.innerHTML = `
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="font-size: 1.8em;">${feature.icon}</div>
                                <div>
                                    <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${feature.name}</h3>
                                    <div style="color: #ccc; font-size: 0.8em;">
                                        ${feature.description}
                                    </div>
                                    <div style="color: #ccc; font-size: 0.7em;">
                                        ÿßŸÜÿ±⁄ò€å: ${feature.energyRecovery >= 0 ? '+' : ''}${feature.energyRecovery}% 
                                        ‚Ä¢ ÿ≥ŸÑÿßŸÖÿ™: ${feature.healthRecovery >= 0 ? '+' : ''}${feature.healthRecovery}%
                                        ‚Ä¢ ÿ≤ŸÖÿßŸÜ: ${feature.timeRequired} ÿØŸÇ€åŸÇŸá
                                    </div>
                                </div>
                            </div>
                            <button class="btn" onclick="useHomeFeature('${feature.action}')" style="padding: 6px 12px; font-size: 0.8em;">
                                ÿßÿ≥ÿ™ŸÅÿßÿØŸá
                            </button>
                        </div>
                    `;
                    homeFeatures.appendChild(featureElement);
                }
            });
        }

        function useHomeFeature(action) {
            const feature = gameData.homeFeatures.find(f => f.action === action);
            if (!feature) return;
            
            switch(action) {
                case 'sleep':
                    startSleep();
                    break;
                case 'shower':
                    // ÿßÿ≥ÿ™ÿ≠ŸÖÿßŸÖ
                    gameData.currentUser.energy = Math.min(100, gameData.currentUser.energy + feature.energyRecovery);
                    gameData.currentUser.health = Math.min(100, gameData.currentUser.health + feature.healthRecovery);
                    showNotification('üöø ÿßÿ≥ÿ™ÿ≠ŸÖÿßŸÖ ⁄©ÿ±ÿØ€åÿØ Ÿà ÿßŸÜÿ±⁄ò€å Ÿà ÿ≥ŸÑÿßŸÖÿ™ ÿ®ÿßÿ≤€åÿßÿ®€å ÿ¥ÿØ', 'success');
                    break;
                case 'cook':
                    // ÿ¢ÿ¥Ÿæÿ≤€å
                    openApp('cooking');
                    break;
                case 'study':
                    // ŸÖÿ∑ÿßŸÑÿπŸá
                    gameData.currentUser.energy = Math.max(0, gameData.currentUser.energy + feature.energyRecovery);
                    gameData.currentUser.intelligence = Math.min(100, gameData.currentUser.intelligence + 5);
                    showNotification('üìö ŸÖÿ∑ÿßŸÑÿπŸá ⁄©ÿ±ÿØ€åÿØ Ÿà ŸáŸàÿ¥ ÿ¥ŸÖÿß ÿßŸÅÿ≤ÿß€åÿ¥ €åÿßŸÅÿ™', 'success');
                    break;
                case 'garden':
                    // ÿ®ÿßÿ∫ÿ®ÿßŸÜ€å
                    gameData.currentUser.energy = Math.min(100, gameData.currentUser.energy + feature.energyRecovery);
                    gameData.currentUser.health = Math.min(100, gameData.currentUser.health + feature.healthRecovery);
                    const gardenIncome = Math.floor(Math.random() * 200) + 100;
                    gameData.currentUser.coins += gardenIncome;
                    showNotification(`üå≥ ÿ®ÿßÿ∫ÿ®ÿßŸÜ€å ⁄©ÿ±ÿØ€åÿØ Ÿà ${gardenIncome} ÿ≥⁄©Ÿá ⁄©ÿ≥ÿ® ⁄©ÿ±ÿØ€åÿØ`, 'success');
                    break;
                case 'repair':
                    // ÿ™ÿπŸÖ€åÿ±⁄ØÿßŸá ÿÆÿßŸÜ⁄Ø€å
                    openApp('repair');
                    break;
            }
            
            saveGameData();
            updateUserInfo();
            updateStats();
        }

        function startSleep() {
            const currentHour = Math.floor(gameData.gameTime / 60);
            
            if (currentHour >= 6 && currentHour < 20) {
                showNotification('üí§ ŸÅŸÇÿ∑ ŸÖ€å‚Äåÿ™ŸàÿßŸÜ€åÿØ ÿØÿ± ÿ¥ÿ® ÿ®ÿÆŸàÿßÿ®€åÿØ (€∏ ÿ¥ÿ® ÿ™ÿß €∂ ÿµÿ®ÿ≠)', 'error');
                return;
            }
            
            gameData.isSleeping = true;
            document.getElementById('sleepScreen').style.display = 'flex';
            
            const sleepTime = 480; // 8 ÿ≥ÿßÿπÿ™ ÿÆŸàÿßÿ®
            let timeLeft = sleepTime;
            
            const sleepInterval = setInterval(() => {
                if (!gameData.isSleeping || gameData.gameOver) {
                    clearInterval(sleepInterval);
                    return;
                }
                
                timeLeft--;
                const progress = ((sleepTime - timeLeft) / sleepTime) * 100;
                
                const hours = Math.floor(timeLeft / 60);
                const minutes = timeLeft % 60;
                
                document.getElementById('sleepTimer').textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
                document.getElementById('sleepProgress').style.width = `${progress}%`;
                
                if (timeLeft <= 0) {
                    clearInterval(sleepInterval);
                    finishSleep();
                }
            }, 1000);
        }

        function finishSleep() {
            gameData.isSleeping = false;
            document.getElementById('sleepScreen').style.display = 'none';
            
            // ÿßÿ´ÿ±ÿßÿ™ ÿÆŸàÿßÿ®
            gameData.currentUser.energy = 100;
            gameData.currentUser.health = 100;
            gameData.currentUser.hunger = Math.max(0, gameData.currentUser.hunger - 20);
            gameData.currentUser.intelligence = Math.min(100, gameData.currentUser.intelligence + 5);
            
            // Ÿæ€åÿ¥ÿ±ŸÅÿ™ ÿ≤ŸÖÿßŸÜ ÿ®ÿßÿ≤€å
            gameData.gameTime = 7 * 60; // ÿ≥ÿßÿπÿ™ €∑ ÿµÿ®ÿ≠
            
            showNotification('üí§ ÿÆŸàÿßÿ® ⁄©ÿßŸÖŸÑ ÿØÿßÿ¥ÿ™€åÿØ! ÿßŸÜÿ±⁄ò€å Ÿà ÿ≥ŸÑÿßŸÖÿ™ ⁄©ÿßŸÖŸÑ ÿ¥ÿØŸÜÿØ', 'success');
            saveGameData();
            updateUserInfo();
            updateStats();
            updateGameTime();
        }

        function cancelSleep() {
            gameData.isSleeping = false;
            document.getElementById('sleepScreen').style.display = 'none';
            showNotification('ÿÆŸàÿßÿ® ÿ¥ŸÖÿß ŸÇÿ∑ÿπ ÿ¥ÿØ', 'warning');
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá ÿ¢ŸÜŸÑÿß€åŸÜ ====================
        function loadOnlineShop() {
            const onlineProducts = document.getElementById('onlineProducts');
            onlineProducts.innerHTML = gameData.onlineProducts.map(product => `
                <div class="product-card" onclick="buyOnlineProduct(${product.id})">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="font-size: 1.8em;">üì¶</div>
                            <div>
                                <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${product.name}</h3>
                                <div style="color: #ccc; font-size: 0.8em;">
                                    ÿØÿ≥ÿ™Ÿá: ${product.category}
                                </div>
                                <div style="color: #ccc; font-size: 0.75em;">
                                    ÿ≤ŸÖÿßŸÜ ÿ™ÿ≠Ÿà€åŸÑ: ${product.deliveryTime} ÿ≥ÿßÿπÿ™
                                </div>
                                <div style="color: #ccc; font-size: 0.7em;">
                                    ${product.features.join(' ‚Ä¢ ')}
                                </div>
                            </div>
                        </div>
                        <div style="color: var(--warning); font-weight: bold; font-size: 1.1em;">
                            ${product.price.toLocaleString()} ü™ô
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function buyOnlineProduct(productId) {
            const product = gameData.onlineProducts.find(p => p.id === productId);
            if (!product) return;
            
            if (gameData.currentUser.coins >= product.price) {
                gameData.currentUser.coins -= product.price;
                
                gameData.currentUser.transactions.push({
                    description: `ÿÆÿ±€åÿØ ${product.name} ÿßÿ≤ ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá ÿ¢ŸÜŸÑÿß€åŸÜ`,
                    amount: -product.price,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ ÿ®Ÿá Ÿàÿ≥ÿß€åŸÑ ÿßŸÑ⁄©ÿ™ÿ±ŸàŸÜ€å⁄©€å
                if (product.category === 'electronics') {
                    gameData.currentUser.electronics.push({...product});
                }
                
                // ÿ¥ÿ±Ÿàÿπ ŸÅÿ±ÿ¢€åŸÜÿØ ÿ™ÿ≠Ÿà€åŸÑ
                startDelivery(product);
                
                saveGameData();
                updateUserInfo();
                updateStats();
                showNotification(`üõí ÿÆÿ±€åÿØ ${product.name} ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿßŸÜÿ¨ÿßŸÖ ÿ¥ÿØ! ÿ™ÿ≠Ÿà€åŸÑ: ${product.deliveryTime} ÿ≥ÿßÿπÿ™`, 'success');
            } else {
                showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ÿÆÿ±€åÿØ ŸÜÿØÿßÿ±€åÿØ!', 'error');
            }
        }

        function startDelivery(product) {
            gameData.currentDelivery = {
                product: product,
                timeLeft: product.deliveryTime * 3600, // ÿ®Ÿá ÿ´ÿßŸÜ€åŸá
                totalTime: product.deliveryTime * 3600
            };

            document.getElementById('deliveryScreen').style.display = 'flex';
            document.getElementById('deliveryItem').textContent = `ÿØÿ± ÿ≠ÿßŸÑ ÿ™ÿ≠Ÿà€åŸÑ: ${product.name}`;

            const deliveryInterval = setInterval(() => {
                if (!gameData.currentDelivery || gameData.gameOver) {
                    clearInterval(deliveryInterval);
                    return;
                }

                gameData.currentDelivery.timeLeft--;
                const progress = ((gameData.currentDelivery.totalTime - gameData.currentDelivery.timeLeft) / gameData.currentDelivery.totalTime) * 100;
                
                const hours = Math.floor(gameData.currentDelivery.timeLeft / 3600);
                const minutes = Math.floor((gameData.currentDelivery.timeLeft % 3600) / 60);
                const seconds = gameData.currentDelivery.timeLeft % 60;
                
                document.getElementById('deliveryTimer').textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                document.getElementById('deliveryProgress').style.width = `${progress}%`;
                
                if (gameData.currentDelivery.timeLeft <= 0) {
                    clearInterval(deliveryInterval);
                    finishDelivery();
                }
            }, 1000);
        }

        function finishDelivery() {
            if (!gameData.currentDelivery) return;

            const product = gameData.currentDelivery.product;
            
            // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ ÿ®Ÿá ⁄©ŸàŸÑŸá Ÿæÿ¥ÿ™€å
            gameData.currentUser.backpack.push({
                id: Date.now(),
                name: product.name,
                type: 'online_purchase',
                category: product.category
            });

            document.getElementById('deliveryScreen').style.display = 'none';
            showNotification(`üì¶ ${product.name} ÿ™ÿ≠Ÿà€åŸÑ ÿØÿßÿØŸá ÿ¥ÿØ!`, 'success');
            
            gameData.currentDelivery = null;
            saveGameData();
        }

        function closeDeliveryScreen() {
            document.getElementById('deliveryScreen').style.display = 'none';
            showNotification('ÿ™ÿ≠Ÿà€åŸÑ ÿØÿ± Ÿæÿ≥‚Äåÿ≤ŸÖ€åŸÜŸá ÿßÿØÿßŸÖŸá ŸÖ€å‚Äå€åÿßÿ®ÿØ...', 'info');
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ÿß€åŸÜÿ™ÿ±ŸÜÿ™ ====================
        function loadInternet() {
            const internetPackages = document.getElementById('internetPackages');
            const internetStatusInfo = document.getElementById('internetStatusInfo');
            
            // ÿ®ÿ≥ÿ™Ÿá‚ÄåŸáÿß€å ÿß€åŸÜÿ™ÿ±ŸÜÿ™
            internetPackages.innerHTML = gameData.internetPackages.map(pkg => {
                const isActive = gameData.internetPackage && gameData.internetPackage.id === pkg.id;
                
                return `
                    <div class="internet-package ${isActive ? 'active' : ''}" onclick="buyInternetPackage(${pkg.id})">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="font-size: 1.8em;">üì°</div>
                                <div>
                                    <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${pkg.name}</h3>
                                    <div style="color: #ccc; font-size: 0.8em;">
                                        ÿ≠ÿ¨ŸÖ: ${pkg.data} ⁄Ø€å⁄Ø ‚Ä¢ ÿ≥ÿ±ÿπÿ™: ${pkg.speed} ŸÖ⁄Øÿßÿ®€åÿ™
                                    </div>
                                    <div style="color: #ccc; font-size: 0.75em;">
                                        ŸÖÿØÿ™: ${pkg.duration} ÿ±Ÿàÿ≤
                                    </div>
                                    ${isActive ? 
                                        `<div style="color: var(--neon); font-size: 0.7em; margin-top: 4px;">
                                            ‚úÖ ŸÅÿπÿßŸÑ
                                        </div>` : ''
                                    }
                                </div>
                            </div>
                            <div style="color: var(--warning); font-weight: bold; font-size: 1.1em;">
                                ${pkg.price} ü™ô
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            // Ÿàÿ∂ÿπ€åÿ™ ÿß€åŸÜÿ™ÿ±ŸÜÿ™
            if (!gameData.internetPackage || gameData.internetDataLeft <= 0) {
                internetStatusInfo.innerHTML = `
                    <div style="text-align: center; padding: 15px; color: #ccc;">
                        <div style="font-size: 2.5em;">üìµ</div>
                        <p style="font-size: 0.9em;">ÿß€åŸÜÿ™ÿ±ŸÜÿ™ ŸÅÿπÿßŸÑ ŸÜÿØÿßÿ±€åÿØ!</p>
                        <p style="font-size: 0.8em; margin-top: 8px;">ÿ®ÿ±ÿß€å ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿßÿ≤ ÿßŸæ‚ÄåŸáÿß ŸÜ€åÿßÿ≤ ÿ®Ÿá ÿÆÿ±€åÿØ ÿ®ÿ≥ÿ™Ÿá ÿß€åŸÜÿ™ÿ±ŸÜÿ™ ÿØÿßÿ±€åÿØ</p>
                    </div>
                `;
            } else {
                internetStatusInfo.innerHTML = `
                    <div style="text-align: center; padding: 15px; color: white;">
                        <div style="font-size: 2.5em;">üì∂</div>
                        <h3 style="color: var(--neon); margin-bottom: 8px;">${gameData.internetPackage.name}</h3>
                        <div style="font-size: 0.9em;">ÿ≠ÿ¨ŸÖ ÿ®ÿßŸÇ€å‚ÄåŸÖÿßŸÜÿØŸá: ${gameData.internetDataLeft.toFixed(1)} ⁄Ø€å⁄Ø</div>
                        <div style="font-size: 0.8em; color: #ccc; margin-top: 4px;">ÿ≥ÿ±ÿπÿ™: ${gameData.internetPackage.speed} ŸÖ⁄Øÿßÿ®€åÿ™</div>
                        <div style="font-size: 0.8em; color: #ccc;">ŸÖÿØÿ™: ${gameData.internetPackage.duration} ÿ±Ÿàÿ≤</div>
                    </div>
                `;
            }
        }

        function buyInternetPackage(packageId) {
            const pkg = gameData.internetPackages.find(p => p.id === packageId);
            if (!pkg) return;
            
            if (gameData.currentUser.coins >= pkg.price) {
                gameData.currentUser.coins -= pkg.price;
                gameData.internetPackage = {...pkg};
                gameData.internetDataLeft = pkg.data;
                gameData.internetExpiry = Date.now() + (pkg.duration * 24 * 60 * 60 * 1000);
                
                gameData.currentUser.transactions.push({
                    description: `ÿÆÿ±€åÿØ ÿ®ÿ≥ÿ™Ÿá ÿß€åŸÜÿ™ÿ±ŸÜÿ™ ${pkg.name}`,
                    amount: -pkg.price,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                saveGameData();
                updateUserInfo();
                updateStats();
                loadInternet();
                showNotification(`üì° ÿ®ÿ≥ÿ™Ÿá ÿß€åŸÜÿ™ÿ±ŸÜÿ™ ${pkg.name} ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ŸÅÿπÿßŸÑ ÿ¥ÿØ!`, 'success');
            } else {
                showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ÿÆÿ±€åÿØ ÿ®ÿ≥ÿ™Ÿá ÿß€åŸÜÿ™ÿ±ŸÜÿ™ ŸÜÿØÿßÿ±€åÿØ!', 'error');
            }
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ Ÿà⁄©€åŸÑ ====================
        function loadLawyer() {
            const lawyerServices = document.getElementById('lawyerServices');
            lawyerServices.innerHTML = gameData.lawyerServices.map(service => `
                <div class="product-card" onclick="useLawyerService(${service.id})">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="font-size: 1.8em;">‚öñÔ∏è</div>
                            <div>
                                <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${service.name}</h3>
                                <div style="color: #ccc; font-size: 0.8em;">
                                    ${service.type === 'jail_reduction' ? '⁄©ÿßŸáÿ¥ 50% ÿ≤ŸÖÿßŸÜ ÿ≤ŸÜÿØÿßŸÜ' : 'ŸÖÿ¥ÿßŸàÿ±Ÿá ÿ≠ŸÇŸàŸÇ€å'}
                                </div>
                            </div>
                        </div>
                        <div style="color: var(--warning); font-weight: bold; font-size: 1.1em;">
                            ${service.price} ü™ô
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function useLawyerService(serviceId) {
            const service = gameData.lawyerServices.find(s => s.id === serviceId);
            if (!service) return;
            
            if (gameData.currentUser.coins >= service.price) {
                gameData.currentUser.coins -= service.price;
                
                if (service.type === 'jail_reduction' && gameData.isInJail) {
                    gameData.jailTimeLeft = Math.floor(gameData.jailTimeLeft * service.reduction);
                    showNotification(`‚öñÔ∏è Ÿà⁄©€åŸÑ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿ¥ÿØ! ÿ≤ŸÖÿßŸÜ ÿ≤ŸÜÿØÿßŸÜ ÿ¥ŸÖÿß ${service.reduction * 100}% ⁄©ÿßŸáÿ¥ €åÿßŸÅÿ™`, 'success');
                } else if (service.type === 'consultation') {
                    showNotification('‚öñÔ∏è ŸÖÿ¥ÿßŸàÿ±Ÿá ÿ≠ŸÇŸàŸÇ€å ÿØÿ±€åÿßŸÅÿ™ ⁄©ÿ±ÿØ€åÿØ', 'success');
                }
                
                gameData.currentUser.transactions.push({
                    description: `Ÿáÿ≤€åŸÜŸá ${service.name}`,
                    amount: -service.price,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                saveGameData();
                updateUserInfo();
                updateStats();
            } else {
                showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿßÿ≤ ÿÆÿØŸÖÿßÿ™ Ÿà⁄©€åŸÑ ŸÜÿØÿßÿ±€åÿØ!', 'error');
            }
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ÿ¥Ÿáÿ±ÿØÿßÿ±€å ====================
        function loadMunicipality() {
            const userBills = document.getElementById('userBills');
            
            if (!gameData.currentUser.bills || gameData.currentUser.bills.length === 0) {
                userBills.innerHTML = '<div style="text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">ŸÇÿ®ÿ∂€å ÿ®ÿ±ÿß€å Ÿæÿ±ÿØÿßÿÆÿ™ ŸÜÿØÿßÿ±€åÿØ</div>';
                return;
            }
            
            userBills.innerHTML = gameData.currentUser.bills.map(bill => {
                const isOverdue = bill.dueDate <= 0;
                
                return `
                    <div class="bill-item ${isOverdue ? 'overdue' : ''}">
                        <div>
                            <div style="font-size: 0.9em;">${bill.type} - ${bill.property}</div>
                            <div style="font-size: 0.7em; color: #ccc;">
                                ${isOverdue ? '‚ö†Ô∏è ŸÖÿπŸàŸÇŸá' : `ŸÖŸàÿπÿØ: ${bill.dueDate} ÿ±Ÿàÿ≤`}
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="color: ${isOverdue ? 'var(--danger)' : 'var(--warning)'}; font-weight: bold; font-size: 0.9em;">
                                ${bill.amount} ü™ô
                            </div>
                            <button class="btn" onclick="payBill(${bill.id})" style="padding: 6px 12px; font-size: 0.8em;">
                                Ÿæÿ±ÿØÿßÿÆÿ™
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function payBill(billId) {
            const billIndex = gameData.currentUser.bills.findIndex(b => b.id === billId);
            if (billIndex === -1) return;
            
            const bill = gameData.currentUser.bills[billIndex];
            
            if (gameData.currentUser.coins >= bill.amount) {
                gameData.currentUser.coins -= bill.amount;
                gameData.currentUser.bills.splice(billIndex, 1);
                
                gameData.currentUser.transactions.push({
                    description: `Ÿæÿ±ÿØÿßÿÆÿ™ ŸÇÿ®ÿ∂ ${bill.type}`,
                    amount: -bill.amount,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                saveGameData();
                updateUserInfo();
                updateStats();
                loadMunicipality();
                showNotification(`‚úÖ ŸÇÿ®ÿ∂ ${bill.type} Ÿæÿ±ÿØÿßÿÆÿ™ ÿ¥ÿØ!`, 'success');
            } else {
                showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å Ÿæÿ±ÿØÿßÿÆÿ™ ŸÇÿ®ÿ∂ ŸÜÿØÿßÿ±€åÿØ!', 'error');
            }
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ÿ®Ÿàÿ±ÿ≥ ====================
        function loadStock() {
            const stocksList = document.getElementById('stocksList');
            
            stocksList.innerHTML = gameData.stocks.map(stock => {
                const userStock = gameData.currentUser.stocks.find(s => s.id === stock.id);
                const userShares = userStock ? userStock.shares : 0;
                
                return `
                    <div class="product-card">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="font-size: 1.8em;">üìà</div>
                                <div>
                                    <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${stock.name}</h3>
                                    <div style="color: #ccc; font-size: 0.8em;">
                                        ŸÇ€åŸÖÿ™: ${stock.price} ÿ≥⁄©Ÿá
                                    </div>
                                    <div style="color: #ccc; font-size: 0.75em;">
                                        ${userShares > 0 ? `ÿ≥ŸáÿßŸÖ ÿ¥ŸÖÿß: ${userShares} ÿ≥ŸáŸÖ` : 'ÿ≥ŸáÿßŸÖ€å ŸÜÿØÿßÿ±€åÿØ'}
                                    </div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 6px;">
                                <button class="btn" onclick="buyStock(${stock.id})" style="padding: 6px 10px; font-size: 0.7em;">
                                    ÿÆÿ±€åÿØ
                                </button>
                                ${userShares > 0 ? 
                                    `<button class="btn" onclick="sellStock(${stock.id})" style="padding: 6px 10px; font-size: 0.7em;">
                                        ŸÅÿ±Ÿàÿ¥
                                     </button>` : ''
                                }
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function buyStock(stockId) {
            const stock = gameData.stocks.find(s => s.id === stockId);
            if (!stock) return;
            
            const sharesToBuy = 1; // ÿÆÿ±€åÿØ 1 ÿ≥ŸáŸÖ
            const totalCost = stock.price * sharesToBuy;
            
            if (gameData.currentUser.coins >= totalCost) {
                gameData.currentUser.coins -= totalCost;
                
                // Ÿæ€åÿØÿß ⁄©ÿ±ÿØŸÜ €åÿß ÿß€åÿ¨ÿßÿØ ÿ≥ŸáÿßŸÖ ⁄©ÿßÿ±ÿ®ÿ±
                let userStock = gameData.currentUser.stocks.find(s => s.id === stockId);
                if (userStock) {
                    userStock.shares += sharesToBuy;
                } else {
                    gameData.currentUser.stocks.push({
                        id: stockId,
                        name: stock.name,
                        shares: sharesToBuy,
                        buyPrice: stock.price
                    });
                }
                
                gameData.currentUser.transactions.push({
                    description: `ÿÆÿ±€åÿØ ÿ≥ŸáÿßŸÖ ${stock.name}`,
                    amount: -totalCost,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                saveGameData();
                updateUserInfo();
                updateStats();
                loadStock();
                showNotification(`üìà ${sharesToBuy} ÿ≥ŸáŸÖ ÿßÿ≤ ${stock.name} ÿÆÿ±€åÿØÿßÿ±€å ÿ¥ÿØ!`, 'success');
            } else {
                showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ÿÆÿ±€åÿØ ÿ≥ŸáÿßŸÖ ŸÜÿØÿßÿ±€åÿØ!', 'error');
            }
        }

        function sellStock(stockId) {
            const stock = gameData.stocks.find(s => s.id === stockId);
            const userStockIndex = gameData.currentUser.stocks.findIndex(s => s.id === stockId);
            
            if (userStockIndex === -1) return;
            
            const userStock = gameData.currentUser.stocks[userStockIndex];
            const totalValue = stock.price * userStock.shares;
            
            gameData.currentUser.coins += totalValue;
            gameData.currentUser.stocks.splice(userStockIndex, 1);
            
            gameData.currentUser.transactions.push({
                description: `ŸÅÿ±Ÿàÿ¥ ÿ≥ŸáÿßŸÖ ${stock.name}`,
                amount: totalValue,
                time: new Date().toLocaleTimeString('fa-IR')
            });
            
            saveGameData();
            updateUserInfo();
            updateStats();
            loadStock();
            showNotification(`üìà ${userStock.shares} ÿ≥ŸáŸÖ ÿßÿ≤ ${stock.name} ŸÅÿ±ŸàÿÆÿ™Ÿá ÿ¥ÿØ!`, 'success');
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ÿ¢ÿ¥Ÿæÿ≤€å ====================
        function loadCooking() {
            const cookingRecipes = document.getElementById('cookingRecipes');
            
            cookingRecipes.innerHTML = gameData.cookingRecipes.map(recipe => {
                const hasIngredients = recipe.ingredients.every(ingredient =>
                    gameData.currentUser.foodItems.some(food => food.name === ingredient)
                );
                
                return `
                    <div class="product-card">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="font-size: 1.8em;">üç≥</div>
                                <div>
                                    <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${recipe.name}</h3>
                                    <div style="color: #ccc; font-size: 0.8em;">
                                        ŸÖŸàÿßÿØ: ${recipe.ingredients.join('ÿå ')}
                                    </div>
                                    <div style="color: #ccc; font-size: 0.75em;">
                                        ⁄©ÿßŸáÿ¥ ⁄Øÿ±ÿ≥ŸÜ⁄Ø€å: ${recipe.hungerReduction}% ‚Ä¢ ÿßŸÜÿ±⁄ò€å: +${recipe.energyBoost}%
                                    </div>
                                    <div style="color: #ccc; font-size: 0.7em;">
                                        ÿ≤ŸÖÿßŸÜ: ${recipe.timeRequired} ÿØŸÇ€åŸÇŸá
                                    </div>
                                </div>
                            </div>
                            <button class="btn" onclick="cookRecipe(${recipe.id})" 
                                    ${!hasIngredients ? 'disabled style="opacity: 0.5;"' : ''}
                                    style="padding: 6px 12px; font-size: 0.8em;">
                                ŸæÿÆÿ™
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function cookRecipe(recipeId) {
            const recipe = gameData.cookingRecipes.find(r => r.id === recipeId);
            if (!recipe) return;
            
            // ŸÖÿµÿ±ŸÅ ŸÖŸàÿßÿØ
            recipe.ingredients.forEach(ingredient => {
                const foodIndex = gameData.currentUser.foodItems.findIndex(f => f.name === ingredient);
                if (foodIndex !== -1) {
                    gameData.currentUser.foodItems.splice(foodIndex, 1);
                }
            });
            
            showNotification(`üç≥ ÿØÿ± ÿ≠ÿßŸÑ ŸæÿÆÿ™ ${recipe.name}...`, 'success');
            
            setTimeout(() => {
                // ÿßÿ´ÿ±ÿßÿ™ ÿ∫ÿ∞ÿß
                gameData.currentUser.hunger = Math.max(0, gameData.currentUser.hunger - recipe.hungerReduction);
                gameData.currentUser.energy = Math.min(100, gameData.currentUser.energy + recipe.energyBoost);
                
                saveGameData();
                updateUserInfo();
                updateStats();
                showNotification(`üç≥ ${recipe.name} ÿ¢ŸÖÿßÿØŸá ÿ¥ÿØ! ⁄Øÿ±ÿ≥ŸÜ⁄Ø€å ⁄©ÿßŸáÿ¥ Ÿà ÿßŸÜÿ±⁄ò€å ÿßŸÅÿ≤ÿß€åÿ¥ €åÿßŸÅÿ™`, 'success');
            }, recipe.timeRequired * 1000);
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ÿ≥ŸàŸæÿ±ŸÖÿßÿ±⁄©ÿ™ ====================
        function loadSupermarket() {
            const supermarketItems = document.getElementById('supermarketItems');
            supermarketItems.innerHTML = gameData.supermarketItems.map(item => `
                <div class="product-card" onclick="buyFoodItem(${item.id})">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="font-size: 1.8em;">üçé</div>
                            <div>
                                <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${item.name}</h3>
                                <div style="color: #ccc; font-size: 0.8em;">
                                    ⁄©ÿßŸáÿ¥ ⁄Øÿ±ÿ≥ŸÜ⁄Ø€å: ${item.hungerReduction}%
                                </div>
                                <div style="color: #ccc; font-size: 0.75em;">
                                    ŸÜŸàÿπ: ${item.type}
                                </div>
                            </div>
                        </div>
                        <div style="color: var(--warning); font-weight: bold; font-size: 1.1em;">
                            ${item.price} ü™ô
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function buyFoodItem(itemId) {
            const item = gameData.supermarketItems.find(i => i.id === itemId);
            if (!item) return;
            
            if (gameData.currentUser.coins >= item.price) {
                gameData.currentUser.coins -= item.price;
                gameData.currentUser.foodItems.push({...item});
                
                gameData.currentUser.transactions.push({
                    description: `ÿÆÿ±€åÿØ ${item.name}`,
                    amount: -item.price,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                saveGameData();
                updateUserInfo();
                updateStats();
                showNotification(`üçé ÿÆÿ±€åÿØ ${item.name} ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿßŸÜÿ¨ÿßŸÖ ÿ¥ÿØ!`, 'success');
            } else {
                showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ÿÆÿ±€åÿØ ŸÖŸàÿßÿØ ÿ∫ÿ∞ÿß€å€å ŸÜÿØÿßÿ±€åÿØ!', 'error');
            }
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ÿØŸàÿ≥ÿ™ÿßŸÜ ====================
        function loadFriends() {
            const friendsList = document.getElementById('friendsList');
            
            if (gameData.currentUser.friends.length === 0) {
                friendsList.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: #ccc;">
                        <div style="font-size: 3em;">üë•</div>
                        <p style="font-size: 0.9em; margin-top: 10px;">ŸáŸÜŸàÿ≤ ÿØŸàÿ≥ÿ™€å ŸÜÿØÿßÿ±€åÿØ!</p>
                        <p style="font-size: 0.8em; margin-top: 5px;">ÿ®ÿ±ÿß€å Ÿæ€åÿØÿß ⁄©ÿ±ÿØŸÜ ÿØŸàÿ≥ÿ™ÿßŸÜ ÿ¨ÿØ€åÿØ ÿØ⁄©ŸÖŸá ÿ≤€åÿ± ÿ±ÿß ÿ®ÿ≤ŸÜ€åÿØ</p>
                    </div>
                `;
                return;
            }
            
            friendsList.innerHTML = gameData.currentUser.friends.map(friend => `
                <div class="friend-card">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="font-size: 1.8em;">üë§</div>
                            <div>
                                <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${friend.name}</h3>
                                <div style="color: #ccc; font-size: 0.8em;">
                                    ÿ≥ÿ∑ÿ≠: ${friend.level} ‚Ä¢ ÿßÿπÿ™ŸÖÿßÿØ: ${friend.trustLevel}%
                                </div>
                                <div style="color: ${friend.online ? 'var(--neon)' : '#ccc'}; font-size: 0.7em;">
                                    ${friend.online ? 'üü¢ ÿ¢ŸÜŸÑÿß€åŸÜ' : 'üî¥ ÿ¢ŸÅŸÑÿß€åŸÜ'}
                                </div>
                            </div>
                        </div>
                        <button class="btn" onclick="showFriendOptions(${friend.id})" style="padding: 6px 12px; font-size: 0.8em;">
                            ⁄ÜŸá ⁄©ÿßÿ±€å ÿßÿ≤ŸÖ ÿ®ÿ± ŸÖ€åÿßÿØÿü
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function findNewFriends() {
            const newFriends = gameData.friends.filter(friend => 
                !gameData.currentUser.friends.some(f => f.id === friend.id)
            );
            
            if (newFriends.length === 0) {
                showNotification('ŸáŸÖŸá ÿØŸàÿ≥ÿ™ÿßŸÜ ÿ±ÿß Ÿæ€åÿØÿß ⁄©ÿ±ÿØŸá‚Äåÿß€åÿØ!', 'info');
                return;
            }
            
            const randomFriend = newFriends[Math.floor(Math.random() * newFriends.length)];
            gameData.currentUser.friends.push({...randomFriend});
            
            saveGameData();
            loadFriends();
            showNotification(`üë• ${randomFriend.name} ÿ®Ÿá ŸÑ€åÿ≥ÿ™ ÿØŸàÿ≥ÿ™ÿßŸÜ ÿ¥ŸÖÿß ÿßÿ∂ÿßŸÅŸá ÿ¥ÿØ!`, 'success');
        }

        function showFriendOptions(friendId) {
            const friend = gameData.currentUser.friends.find(f => f.id === friendId);
            if (!friend) return;
            
            const modalContent = `
                <h3 style="color: var(--neon); text-align: center; margin-bottom: 12px; font-size: 1.1em;">üë• ⁄ÜŸá ⁄©ÿßÿ±€å ÿßÿ≤ŸÖ ÿ®ÿ±ÿß€å ${friend.name} ÿ®ÿ± ŸÖ€åÿßÿØÿü</h3>
                
                <div class="repair-option" onclick="lendMoneyToFriend(${friendId})">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong style="color: white; font-size: 0.9em;">ŸÇÿ±ÿ∂ ÿØÿßÿØŸÜ ŸæŸàŸÑ</strong>
                            <div style="font-size: 0.75em; color: #ccc;">ŸÇÿ±ÿ∂ ÿØÿßÿØŸÜ ÿ≥⁄©Ÿá ÿ®Ÿá ÿØŸàÿ≥ÿ™</div>
                        </div>
                        <div style="color: var(--warning); font-size: 1.1em;">üí∞</div>
                    </div>
                </div>
                
                <div class="repair-option" onclick="collectDebtFromFriend(${friendId})">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong style="color: white; font-size: 0.9em;">Ÿæÿ≥ ⁄Øÿ±ŸÅÿ™ŸÜ ŸæŸàŸÑ</strong>
                            <div style="font-size: 0.75em; color: #ccc;">ÿØÿ±€åÿßŸÅÿ™ ŸæŸàŸÑ ŸÇÿ±ÿ∂ ÿØÿßÿØŸá ÿ¥ÿØŸá</div>
                        </div>
                        <div style="color: var(--warning); font-size: 1.1em;">üíµ</div>
                    </div>
                </div>
                
                <div class="repair-option" onclick="workWithFriend(${friendId})">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong style="color: white; font-size: 0.9em;">ŸáŸÖ⁄©ÿßÿ±€å ÿØÿ± ⁄©ÿßÿ±</strong>
                            <div style="font-size: 0.75em; color: #ccc;">⁄©ÿßÿ± ⁄Øÿ±ŸàŸá€å ÿ®ÿ±ÿß€å ÿØÿ±ÿ¢ŸÖÿØ ÿ®€åÿ¥ÿ™ÿ±</div>
                        </div>
                        <div style="color: var(--warning); font-size: 1.1em;">ü§ù</div>
                    </div>
                </div>
                
                <div class="repair-option" onclick="giftToFriend(${friendId})">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong style="color: white; font-size: 0.9em;">ŸáÿØ€åŸá ÿØÿßÿØŸÜ</strong>
                            <div style="font-size: 0.75em; color: #ccc;">ŸáÿØ€åŸá ÿØÿßÿØŸÜ ÿ≥⁄©Ÿá €åÿß ⁄©ÿßŸÑÿß</div>
                        </div>
                        <div style="color: var(--warning); font-size: 1.1em;">üéÅ</div>
                    </div>
                </div>
                
                <div class="repair-option" onclick="tradeWithFriend(${friendId})">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong style="color: white; font-size: 0.9em;">ŸÖÿπÿßŸÖŸÑŸá</strong>
                            <div style="font-size: 0.75em; color: #ccc;">ÿ™ÿ®ÿßÿØŸÑ ⁄©ÿßŸÑÿß ÿ®ÿß ÿØŸàÿ≥ÿ™</div>
                        </div>
                        <div style="color: var(--warning); font-size: 1.1em;">ü§ù</div>
                    </div>
                </div>
                
                <div class="repair-option" onclick="competeWithFriend(${friendId})">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong style="color: white; font-size: 0.9em;">ŸÖÿ≥ÿßÿ®ŸÇŸá</strong>
                            <div style="font-size: 0.75em; color: #ccc;">ŸÖÿ≥ÿßÿ®ŸÇŸá ÿØÿ± ⁄©ÿßÿ± €åÿß ÿ™ÿ≠ÿµ€åŸÑ</div>
                        </div>
                        <div style="color: var(--warning); font-size: 1.1em;">üèÜ</div>
                    </div>
                </div>
                
                <div class="repair-option" onclick="studyWithFriend(${friendId})">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong style="color: white; font-size: 0.9em;">⁄©ŸÖ⁄© ÿØÿ±ÿ≥€å</strong>
                            <div style="font-size: 0.75em; color: #ccc;">⁄©ŸÖ⁄© ÿ®Ÿá ÿØŸàÿ≥ÿ™ ÿØÿ± ÿØÿ±ÿ≥</div>
                        </div>
                        <div style="color: var(--warning); font-size: 1.1em;">üìö</div>
                    </div>
                </div>
                
                <button class="btn btn-danger" onclick="closeModal()" style="margin-top: 12px; width: 100%; padding: 10px;">
                    ÿ®ÿ≥ÿ™ŸÜ
                </button>
            `;
            
            showModal(modalContent);
        }

        function lendMoneyToFriend(friendId) {
            const friend = gameData.currentUser.friends.find(f => f.id === friendId);
            if (!friend) return;
            
            const amount = 1000; // ŸÖŸÇÿØÿßÿ± ÿ´ÿßÿ®ÿ™ ÿ®ÿ±ÿß€å ÿ≥ÿßÿØ⁄Ø€å
            
            if (gameData.currentUser.coins >= amount) {
                gameData.currentUser.coins -= amount;
                friend.trustLevel = Math.min(100, friend.trustLevel + 10);
                
                // ÿ∞ÿÆ€åÿ±Ÿá ÿßÿ∑ŸÑÿßÿπÿßÿ™ ŸÇÿ±ÿ∂
                if (!friend.debts) friend.debts = [];
                friend.debts.push({
                    amount: amount,
                    date: new Date().toLocaleDateString('fa-IR')
                });
                
                gameData.currentUser.transactions.push({
                    description: `ŸÇÿ±ÿ∂ ÿ®Ÿá ${friend.name}`,
                    amount: -amount,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                closeModal();
                saveGameData();
                updateUserInfo();
                updateStats();
                showNotification(`üí∞ ŸÖÿ®ŸÑÿ∫ ${amount} ÿ≥⁄©Ÿá ÿ®Ÿá ${friend.name} ŸÇÿ±ÿ∂ ÿØÿßÿØŸá ÿ¥ÿØ`, 'success');
            } else {
                showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ŸÇÿ±ÿ∂ ÿØÿßÿØŸÜ ŸÜÿØÿßÿ±€åÿØ!', 'error');
            }
        }

        function collectDebtFromFriend(friendId) {
            const friend = gameData.currentUser.friends.find(f => f.id === friendId);
            if (!friend || !friend.debts || friend.debts.length === 0) {
                showNotification('ÿß€åŸÜ ÿØŸàÿ≥ÿ™ ÿ®Ÿá ÿ¥ŸÖÿß ÿ®ÿØŸá€å ŸÜÿØÿßÿ±ÿØ!', 'warning');
                return;
            }
            
            const totalDebt = friend.debts.reduce((sum, debt) => sum + debt.amount, 0);
            gameData.currentUser.coins += totalDebt;
            friend.debts = [];
            friend.trustLevel = Math.min(100, friend.trustLevel + 5);
            
            gameData.currentUser.transactions.push({
                description: `ÿØÿ±€åÿßŸÅÿ™ ŸÇÿ±ÿ∂ ÿßÿ≤ ${friend.name}`,
                amount: totalDebt,
                time: new Date().toLocaleTimeString('fa-IR')
            });
            
            closeModal();
            saveGameData();
            updateUserInfo();
            updateStats();
            showNotification(`üí∞ ŸÖÿ®ŸÑÿ∫ ${totalDebt} ÿ≥⁄©Ÿá ÿßÿ≤ ${friend.name} ÿØÿ±€åÿßŸÅÿ™ ÿ¥ÿØ`, 'success');
        }

        function workWithFriend(friendId) {
            const friend = gameData.currentUser.friends.find(f => f.id === friendId);
            if (!friend) return;
            
            const bonus = 500; // ÿØÿ±ÿ¢ŸÖÿØ ÿßÿ∂ÿßŸÅ€å ÿßÿ≤ ⁄©ÿßÿ± ⁄Øÿ±ŸàŸá€å
            gameData.currentUser.coins += bonus;
            friend.trustLevel = Math.min(100, friend.trustLevel + 8);
            
            gameData.currentUser.transactions.push({
                description: `ŸáŸÖ⁄©ÿßÿ±€å ÿ®ÿß ${friend.name}`,
                amount: bonus,
                time: new Date().toLocaleTimeString('fa-IR')
            });
            
            closeModal();
            saveGameData();
            updateUserInfo();
            updateStats();
            showNotification(`ü§ù ÿ®ÿß ${friend.name} ŸáŸÖ⁄©ÿßÿ±€å ⁄©ÿ±ÿØ€åÿØ Ÿà ${bonus} ÿ≥⁄©Ÿá ÿØÿ±€åÿßŸÅÿ™ ⁄©ÿ±ÿØ€åÿØ`, 'success');
        }

        function giftToFriend(friendId) {
            const friend = gameData.currentUser.friends.find(f => f.id === friendId);
            if (!friend) return;
            
            const giftAmount = 500;
            
            if (gameData.currentUser.coins >= giftAmount) {
                gameData.currentUser.coins -= giftAmount;
                friend.trustLevel = Math.min(100, friend.trustLevel + 15);
                
                gameData.currentUser.transactions.push({
                    description: `ŸáÿØ€åŸá ÿ®Ÿá ${friend.name}`,
                    amount: -giftAmount,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                closeModal();
                saveGameData();
                updateUserInfo();
                updateStats();
                showNotification(`üéÅ ÿ®Ÿá ${friend.name} ŸáÿØ€åŸá ÿØÿßÿØ€åÿØ Ÿà ÿßÿπÿ™ŸÖÿßÿØ ÿßŸÅÿ≤ÿß€åÿ¥ €åÿßŸÅÿ™`, 'success');
            } else {
                showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ŸáÿØ€åŸá ÿØÿßÿØŸÜ ŸÜÿØÿßÿ±€åÿØ!', 'error');
            }
        }

        function tradeWithFriend(friendId) {
            const friend = gameData.currentUser.friends.find(f => f.id === friendId);
            if (!friend) return;
            
            // ŸÖÿπÿßŸÖŸÑŸá ÿ≥ÿßÿØŸá - ÿ™ÿ®ÿßÿØŸÑ ÿ™ÿµÿßÿØŸÅ€å
            const tradeBonus = Math.floor(Math.random() * 300) + 100;
            gameData.currentUser.coins += tradeBonus;
            friend.trustLevel = Math.min(100, friend.trustLevel + 5);
            
            gameData.currentUser.transactions.push({
                description: `ŸÖÿπÿßŸÖŸÑŸá ÿ®ÿß ${friend.name}`,
                amount: tradeBonus,
                time: new Date().toLocaleTimeString('fa-IR')
            });
            
            closeModal();
            saveGameData();
            updateUserInfo();
            updateStats();
            showNotification(`ü§ù ÿ®ÿß ${friend.name} ŸÖÿπÿßŸÖŸÑŸá ⁄©ÿ±ÿØ€åÿØ Ÿà ${tradeBonus} ÿ≥⁄©Ÿá ÿ≥ŸàÿØ ⁄©ÿ±ÿØ€åÿØ`, 'success');
        }

        function competeWithFriend(friendId) {
            const friend = gameData.currentUser.friends.find(f => f.id === friendId);
            if (!friend) return;
            
            // ŸÖÿ≥ÿßÿ®ŸÇŸá - ÿ¥ÿßŸÜÿ≥ 50-50 ÿ®ÿ±ÿß€å ÿ®ÿ±ŸÜÿØŸá ÿ¥ÿØŸÜ
            const isWinner = Math.random() > 0.5;
            const prize = 800;
            
            if (isWinner) {
                gameData.currentUser.coins += prize;
                friend.trustLevel = Math.max(0, friend.trustLevel - 5);
                showNotification(`üèÜ ÿØÿ± ŸÖÿ≥ÿßÿ®ŸÇŸá ÿ®ÿß ${friend.name} ÿ®ÿ±ŸÜÿØŸá ÿ¥ÿØ€åÿØ Ÿà ${prize} ÿ≥⁄©Ÿá ÿØÿ±€åÿßŸÅÿ™ ⁄©ÿ±ÿØ€åÿØ`, 'success');
            } else {
                gameData.currentUser.coins = Math.max(0, gameData.currentUser.coins - prize);
                friend.trustLevel = Math.min(100, friend.trustLevel + 5);
                showNotification(`üèÜ ÿØÿ± ŸÖÿ≥ÿßÿ®ŸÇŸá ÿ®ÿß ${friend.name} ÿ®ÿßÿÆÿ™€åÿØ`, 'warning');
            }
            
            gameData.currentUser.transactions.push({
                description: `ŸÖÿ≥ÿßÿ®ŸÇŸá ÿ®ÿß ${friend.name}`,
                amount: isWinner ? prize : -prize,
                time: new Date().toLocaleTimeString('fa-IR')
            });
            
            closeModal();
            saveGameData();
            updateUserInfo();
            updateStats();
        }

        function studyWithFriend(friendId) {
            const friend = gameData.currentUser.friends.find(f => f.id === friendId);
            if (!friend) return;
            
            // ⁄©ŸÖ⁄© ÿØÿ±ÿ≥€å - ÿßŸÅÿ≤ÿß€åÿ¥ ŸáŸàÿ¥
            gameData.currentUser.intelligence = Math.min(100, gameData.currentUser.intelligence + 8);
            friend.trustLevel = Math.min(100, friend.trustLevel + 12);
            
            closeModal();
            saveGameData();
            updateUserInfo();
            updateStats();
            showNotification(`üìö ÿ®Ÿá ${friend.name} ⁄©ŸÖ⁄© ÿØÿ±ÿ≥€å ⁄©ÿ±ÿØ€åÿØ Ÿà ŸáŸàÿ¥ ÿ¥ŸÖÿß ÿßŸÅÿ≤ÿß€åÿ¥ €åÿßŸÅÿ™`, 'success');
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ÿ¢ŸÖŸàÿ≤ÿ¥⁄ØÿßŸá ÿ™ÿÆÿµÿµ€å ====================
        function loadTraining() {
            const trainingCourses = document.getElementById('trainingCourses');
            trainingCourses.innerHTML = gameData.trainingCourses.map(course => {
                const hasRequirements = course.requirement.every(req => 
                    gameData.currentUser.certificates.some(cert => cert.name === req)
                );
                const isCompleted = gameData.currentUser.certificates.some(cert => cert.name === course.certificate);
                
                return `
                    <div class="training-course">
                        <div style="display: flex; justify-content: space-between; align-items: start;">
                            <div>
                                <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${course.name}</h3>
                                <div style="color: #ccc; font-size: 0.8em;">
                                    ÿ≤ŸÖÿßŸÜ ŸÖŸàÿ±ÿØ ŸÜ€åÿßÿ≤: ${course.timeRequired} ÿØŸÇ€åŸÇŸá
                                </div>
                                <div style="color: #ccc; font-size: 0.75em;">
                                    ŸÖÿØÿ±⁄©: ${course.certificate}
                                    ${course.requirement.length > 0 ? `‚Ä¢ Ÿæ€åÿ¥ ŸÜ€åÿßÿ≤: ${course.requirement.join(', ')}` : ''}
                                </div>
                                ${isCompleted ? 
                                    `<div style="color: var(--secondary); font-size: 0.7em; margin-top: 4px;">
                                        ‚úÖ ÿ™⁄©ŸÖ€åŸÑ ÿ¥ÿØŸá
                                    </div>` : ''
                                }
                            </div>
                            <div>
                                ${!isCompleted ? 
                                    `<button class="btn" onclick="startTraining(${course.id})" 
                                             ${!hasRequirements ? 'disabled style="opacity: 0.5;"' : ''}
                                             style="padding: 6px 12px; font-size: 0.8em;">
                                        ${course.price} ü™ô
                                    </button>` :
                                    `<button class="btn" disabled style="padding: 6px 12px; font-size: 0.8em; opacity: 0.5;">
                                        ÿ™⁄©ŸÖ€åŸÑ ÿ¥ÿØŸá
                                    </button>`
                                }
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function startTraining(courseId) {
            const course = gameData.trainingCourses.find(c => c.id === courseId);
            if (!course) return;
            
            if (gameData.currentUser.coins >= course.price) {
                gameData.currentUser.coins -= course.price;
                
                showNotification(`üéì ${course.name} ÿ¥ÿ±Ÿàÿπ ÿ¥ÿØ!`, 'success');
                
                setTimeout(() => {
                    // ÿØÿ±€åÿßŸÅÿ™ ŸÖÿØÿ±⁄©
                    gameData.currentUser.certificates.push({
                        id: Date.now(),
                        name: course.certificate,
                        type: 'professional',
                        issueDate: new Date().toLocaleDateString('fa-IR')
                    });
                    
                    saveGameData();
                    loadTraining();
                    showNotification(`üéì ${course.name} ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ®Ÿá Ÿæÿß€åÿßŸÜ ÿ±ÿ≥€åÿØ! ŸÖÿØÿ±⁄© ${course.certificate} ÿØÿ±€åÿßŸÅÿ™ ⁄©ÿ±ÿØ€åÿØ`, 'success');
                }, course.timeRequired * 1000);
            } else {
                showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ÿ´ÿ®ÿ™ ŸÜÿßŸÖ ÿØÿ± ÿØŸàÿ±Ÿá ŸÜÿØÿßÿ±€åÿØ!', 'error');
            }
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ÿ™ÿ±€åÿØ ====================
        function loadTrade() {
            const tradeMarket = document.getElementById('tradeMarket');
            const userAssets = document.getElementById('userAssets');
            const profitLossReport = document.getElementById('profitLossReport');
            
            // ÿ®ÿßÿ≤ÿßÿ± ÿ™ÿ±€åÿØ
            tradeMarket.innerHTML = gameData.tradeItems.map(item => {
                const userAsset = gameData.currentUser.tradeAssets.find(a => a.id === item.id);
                const profitLoss = userAsset ? ((item.price - userAsset.buyPrice) / userAsset.buyPrice * 100) : 0;
                
                return `
                    <div class="trade-item">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="font-size: 1.8em;">üíé</div>
                                <div>
                                    <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${item.name}</h3>
                                    <div style="color: #ccc; font-size: 0.8em;">
                                        ŸÇ€åŸÖÿ™: ${item.price.toLocaleString()} ÿ≥⁄©Ÿá
                                    </div>
                                    <div style="color: #ccc; font-size: 0.75em;">
                                        ŸÜŸàÿ≥ÿßŸÜ: ${(item.volatility * 100).toFixed(1)}%
                                    </div>
                                    ${userAsset ? 
                                        `<div style="color: ${profitLoss >= 0 ? 'var(--neon)' : 'var(--danger)'}; font-size: 0.7em;">
                                            ${profitLoss >= 0 ? '‚ñ≤' : '‚ñº'} ${Math.abs(profitLoss).toFixed(1)}%
                                        </div>` : ''
                                    }
                                </div>
                            </div>
                            <button class="btn" onclick="buyTradeItem(${item.id})" style="padding: 6px 12px; font-size: 0.8em;">
                                ÿÆÿ±€åÿØ
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
            
            // ÿØÿßÿ±ÿß€å€å‚ÄåŸáÿß€å ⁄©ÿßÿ±ÿ®ÿ±
            if (gameData.currentUser.tradeAssets.length === 0) {
                userAssets.innerHTML = '<div style="text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">ÿØÿßÿ±ÿß€å€å ÿ™ÿ±€åÿØ€å ŸÜÿØÿßÿ±€åÿØ</div>';
            } else {
                userAssets.innerHTML = gameData.currentUser.tradeAssets.map(asset => {
                    const currentItem = gameData.tradeItems.find(i => i.id === asset.id);
                    const profitLoss = ((currentItem.price - asset.buyPrice) / asset.buyPrice * 100);
                    const totalValue = currentItem.price * asset.amount;
                    const totalCost = asset.buyPrice * asset.amount;
                    const netProfit = totalValue - totalCost;
                    
                    return `
                        <div class="trade-item">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <div style="font-size: 1.8em;">üíé</div>
                                    <div>
                                        <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${asset.name}</h3>
                                        <div style="color: #ccc; font-size: 0.8em;">
                                            ŸÖŸÇÿØÿßÿ±: ${asset.amount}
                                        </div>
                                        <div style="color: #ccc; font-size: 0.75em;">
                                            ŸÇ€åŸÖÿ™ ÿÆÿ±€åÿØ: ${asset.buyPrice.toLocaleString()} ÿ≥⁄©Ÿá
                                        </div>
                                        <div style="color: ${netProfit >= 0 ? 'var(--neon)' : 'var(--danger)'}; font-size: 0.7em;">
                                            ${netProfit >= 0 ? 'ÿ≥ŸàÿØ' : 'ÿ∂ÿ±ÿ±'}: ${Math.abs(netProfit).toLocaleString()} ÿ≥⁄©Ÿá (${profitLoss >= 0 ? '+' : ''}${profitLoss.toFixed(1)}%)
                                        </div>
                                    </div>
                                </div>
                                <button class="btn" onclick="sellTradeItem(${asset.id})" style="padding: 6px 12px; font-size: 0.8em;">
                                    ŸÅÿ±Ÿàÿ¥
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
            }
            
            // ⁄Øÿ≤ÿßÿ±ÿ¥ ÿ≥ŸàÿØ Ÿà ÿ∂ÿ±ÿ±
            let totalInvestment = 0;
            let totalCurrentValue = 0;
            
            gameData.currentUser.tradeAssets.forEach(asset => {
                const currentItem = gameData.tradeItems.find(i => i.id === asset.id);
                totalInvestment += asset.buyPrice * asset.amount;
                totalCurrentValue += currentItem.price * asset.amount;
            });
            
            const totalProfitLoss = totalCurrentValue - totalInvestment;
            const totalProfitLossPercent = totalInvestment > 0 ? (totalProfitLoss / totalInvestment * 100) : 0;
            
            profitLossReport.innerHTML = `
                <div style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 12px; text-align: center;">
                    <div style="color: #ccc; font-size: 0.8em;">ÿ≥ÿ±ŸÖÿß€åŸá‚Äå⁄Øÿ∞ÿßÿ±€å ⁄©ŸÑ</div>
                    <div style="color: white; font-size: 1.1em; margin: 5px 0;">${totalInvestment.toLocaleString()} ÿ≥⁄©Ÿá</div>
                    
                    <div style="color: #ccc; font-size: 0.8em; margin-top: 8px;">ÿßÿ±ÿ≤ÿ¥ ŸÅÿπŸÑ€å</div>
                    <div style="color: white; font-size: 1.1em; margin: 5px 0;">${totalCurrentValue.toLocaleString()} ÿ≥⁄©Ÿá</div>
                    
                    <div style="color: #ccc; font-size: 0.8em; margin-top: 8px;">ÿ≥ŸàÿØ/ÿ∂ÿ±ÿ± ⁄©ŸÑ</div>
                    <div style="color: ${totalProfitLoss >= 0 ? 'var(--neon)' : 'var(--danger)'}; font-size: 1.2em; margin: 5px 0;">
                        ${totalProfitLoss >= 0 ? '+' : ''}${totalProfitLoss.toLocaleString()} ÿ≥⁄©Ÿá
                        (${totalProfitLoss >= 0 ? '+' : ''}${totalProfitLossPercent.toFixed(1)}%)
                    </div>
                </div>
            `;
        }

        function buyTradeItem(itemId) {
            const item = gameData.tradeItems.find(i => i.id === itemId);
            if (!item) return;
            
            const amount = 1;
            const totalCost = item.price * amount;
            
            if (gameData.currentUser.coins >= totalCost) {
                gameData.currentUser.coins -= totalCost;
                
                // Ÿæ€åÿØÿß ⁄©ÿ±ÿØŸÜ €åÿß ÿß€åÿ¨ÿßÿØ ÿØÿßÿ±ÿß€å€å
                let userAsset = gameData.currentUser.tradeAssets.find(a => a.id === itemId);
                if (userAsset) {
                    userAsset.amount += amount;
                    // ŸÖ€åÿßŸÜ⁄Ø€åŸÜ‚Äå⁄Ø€åÿ±€å ŸÇ€åŸÖÿ™ ÿÆÿ±€åÿØ
                    userAsset.buyPrice = (userAsset.buyPrice * (userAsset.amount - amount) + item.price * amount) / userAsset.amount;
                } else {
                    gameData.currentUser.tradeAssets.push({
                        id: itemId,
                        name: item.name,
                        amount: amount,
                        buyPrice: item.price
                    });
                }
                
                gameData.currentUser.transactions.push({
                    description: `ÿÆÿ±€åÿØ ${item.name}`,
                    amount: -totalCost,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                saveGameData();
                updateUserInfo();
                updateStats();
                loadTrade();
                showNotification(`üíé ${amount} Ÿàÿßÿ≠ÿØ ÿßÿ≤ ${item.name} ÿÆÿ±€åÿØÿßÿ±€å ÿ¥ÿØ!`, 'success');
            } else {
                showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ÿÆÿ±€åÿØ ŸÜÿØÿßÿ±€åÿØ!', 'error');
            }
        }

        function sellTradeItem(itemId) {
            const item = gameData.tradeItems.find(i => i.id === itemId);
            const userAssetIndex = gameData.currentUser.tradeAssets.findIndex(a => a.id === itemId);
            
            if (userAssetIndex === -1) return;
            
            const userAsset = gameData.currentUser.tradeAssets[userAssetIndex];
            const totalValue = item.price * userAsset.amount;
            const totalCost = userAsset.buyPrice * userAsset.amount;
            const profit = totalValue - totalCost;
            
            gameData.currentUser.coins += totalValue;
            gameData.currentUser.tradeAssets.splice(userAssetIndex, 1);
            
            gameData.currentUser.transactions.push({
                description: `ŸÅÿ±Ÿàÿ¥ ${userAsset.name}`,
                amount: totalValue,
                time: new Date().toLocaleTimeString('fa-IR')
            });
            
            saveGameData();
            updateUserInfo();
            updateStats();
            loadTrade();
            
            if (profit >= 0) {
                showNotification(`üíé ${userAsset.amount} Ÿàÿßÿ≠ÿØ ÿßÿ≤ ${userAsset.name} ŸÅÿ±ŸàÿÆÿ™Ÿá ÿ¥ÿØ! ÿ≥ŸàÿØ: ${profit.toLocaleString()} ÿ≥⁄©Ÿá`, 'success');
            } else {
                showNotification(`üíé ${userAsset.amount} Ÿàÿßÿ≠ÿØ ÿßÿ≤ ${userAsset.name} ŸÅÿ±ŸàÿÆÿ™Ÿá ÿ¥ÿØ! ÿ∂ÿ±ÿ±: ${Math.abs(profit).toLocaleString()} ÿ≥⁄©Ÿá`, 'warning');
            }
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ÿ®€åŸÖŸá ====================
        function loadInsurance() {
            const activeInsurances = document.getElementById('activeInsurances');
            const insurancePolicies = document.getElementById('insurancePolicies');
            
            // ÿ®€åŸÖŸá‚ÄåŸáÿß€å ŸÅÿπÿßŸÑ
            if (gameData.activeInsurances.length === 0) {
                activeInsurances.innerHTML = '<div style="text-align: center; padding: 15px; color: #ccc; font-size: 0.8em;">ÿ®€åŸÖŸá ŸÅÿπÿßŸÑ€å ŸÜÿØÿßÿ±€åÿØ</div>';
            } else {
                activeInsurances.innerHTML = gameData.activeInsurances.map(insurance => `
                    <div class="insurance-policy">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="font-size: 1.8em;">üõ°Ô∏è</div>
                                <div>
                                    <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${insurance.name}</h3>
                                    <div style="color: #ccc; font-size: 0.8em;">
                                        ŸæŸàÿ¥ÿ¥: ${insurance.coverage.toLocaleString()} ÿ≥⁄©Ÿá
                                    </div>
                                    <div style="color: #ccc; font-size: 0.75em;">
                                        ÿ±Ÿàÿ≤Ÿáÿß€å ÿ®ÿßŸÇ€å‚ÄåŸÖÿßŸÜÿØŸá: ${insurance.daysLeft} ÿ±Ÿàÿ≤
                                    </div>
                                </div>
                            </div>
                            <div style="color: var(--neon); font-weight: bold; font-size: 0.9em;">
                                ŸÅÿπÿßŸÑ
                            </div>
                        </div>
                    </div>
                `).join('');
            }
            
            // ÿ®€åŸÖŸá‚ÄåŸáÿß€å ŸÇÿßÿ®ŸÑ ÿÆÿ±€åÿØ
            insurancePolicies.innerHTML = gameData.insurancePolicies.map(policy => {
                const isActive = gameData.activeInsurances.some(ins => ins.type === policy.type);
                
                return `
                    <div class="insurance-policy ${isActive ? 'active' : ''}" onclick="buyInsurance(${policy.id})">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="font-size: 1.8em;">üõ°Ô∏è</div>
                                <div>
                                    <h3 style="color: white; margin: 0 0 4px 0; font-size: 0.9em;">${policy.name}</h3>
                                    <div style="color: #ccc; font-size: 0.8em;">
                                        ŸæŸàÿ¥ÿ¥: ${policy.coverage.toLocaleString()} ÿ≥⁄©Ÿá
                                    </div>
                                    <div style="color: #ccc; font-size: 0.75em;">
                                        ŸÖÿØÿ™: ${policy.duration} ÿ±Ÿàÿ≤ ‚Ä¢ ŸÜŸàÿπ: ${getInsuranceTypeName(policy.type)}
                                    </div>
                                    ${isActive ? 
                                        `<div style="color: var(--neon); font-size: 0.7em; margin-top: 4px;">
                                            ‚úÖ ŸÅÿπÿßŸÑ
                                        </div>` : ''
                                    }
                                </div>
                            </div>
                            <div style="color: var(--warning); font-weight: bold; font-size: 1.1em;">
                                ${policy.price} ü™ô
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function buyInsurance(policyId) {
            const policy = gameData.insurancePolicies.find(p => p.id === policyId);
            if (!policy) return;
            
            // ÿ®ÿ±ÿ±ÿ≥€å ÿß€åŸÜ⁄©Ÿá ÿ¢€åÿß ŸáŸÖ€åŸÜ ŸÜŸàÿπ ÿ®€åŸÖŸá ŸÅÿπÿßŸÑ ÿßÿ≥ÿ™
            const existingInsurance = gameData.activeInsurances.find(ins => ins.type === policy.type);
            if (existingInsurance) {
                showNotification(`ÿ¥ŸÖÿß ÿßÿ≤ ŸÇÿ®ŸÑ ÿ®€åŸÖŸá ${getInsuranceTypeName(policy.type)} ÿØÿßÿ±€åÿØ!`, 'warning');
                return;
            }
            
            if (gameData.currentUser.coins >= policy.price) {
                gameData.currentUser.coins -= policy.price;
                
                const newInsurance = {
                    id: policy.id,
                    name: policy.name,
                    type: policy.type,
                    coverage: policy.coverage,
                    daysLeft: policy.duration,
                    purchaseDate: new Date().toLocaleDateString('fa-IR')
                };
                
                gameData.activeInsurances.push(newInsurance);
                
                gameData.currentUser.transactions.push({
                    description: `ÿÆÿ±€åÿØ ÿ®€åŸÖŸá ${policy.name}`,
                    amount: -policy.price,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                saveGameData();
                updateUserInfo();
                updateStats();
                loadInsurance();
                showNotification(`üõ°Ô∏è ÿ®€åŸÖŸá ${policy.name} ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿÆÿ±€åÿØÿßÿ±€å ÿ¥ÿØ!`, 'success');
            } else {
                showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ÿÆÿ±€åÿØ ÿ®€åŸÖŸá ŸÜÿØÿßÿ±€åÿØ!', 'error');
            }
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ŸÇŸàÿßŸÜ€åŸÜ ====================
        function loadLaws() {
            // ŸÖÿ≠ÿ™Ÿàÿß€å ŸÇŸàÿßŸÜ€åŸÜ ŸÇÿ®ŸÑÿßŸã ÿØÿ± HTML ŸÖŸàÿ¨ŸàÿØ ÿßÿ≥ÿ™
        }

        function buyGameGuide() {
            if (gameData.hasGameGuide) {
                showNotification('ÿ¥ŸÖÿß ÿßÿ≤ ŸÇÿ®ŸÑ ⁄©ÿ™ÿßÿ® ÿ±ÿßŸáŸÜŸÖÿß ÿ±ÿß ÿØÿßÿ±€åÿØ!', 'warning');
                return;
            }
            
            if (gameData.currentUser.coins >= 500) {
                gameData.currentUser.coins -= 500;
                gameData.hasGameGuide = true;
                
                gameData.currentUser.transactions.push({
                    description: 'ÿÆÿ±€åÿØ ⁄©ÿ™ÿßÿ® ÿ±ÿßŸáŸÜŸÖÿß€å ÿ®ÿßÿ≤€å',
                    amount: -500,
                    time: new Date().toLocaleTimeString('fa-IR')
                });
                
                // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ ⁄©ÿ™ÿßÿ® ÿ®Ÿá ⁄©ŸàŸÑŸá Ÿæÿ¥ÿ™€å
                gameData.currentUser.books.push({
                    id: 999,
                    name: '⁄©ÿ™ÿßÿ® ÿ±ÿßŸáŸÜŸÖÿß€å ⁄©ÿßŸÖŸÑ ÿ®ÿßÿ≤€å',
                    intelligenceBoost: 15,
                    studyTimeReduction: 20,
                    type: 'guide'
                });
                
                saveGameData();
                updateUserInfo();
                updateStats();
                showNotification('üìñ ⁄©ÿ™ÿßÿ® ÿ±ÿßŸáŸÜŸÖÿß€å ÿ®ÿßÿ≤€å ÿÆÿ±€åÿØÿßÿ±€å ÿ¥ÿØ! ŸáŸàÿ¥ ÿ¥ŸÖÿß ÿßŸÅÿ≤ÿß€åÿ¥ €åÿßŸÅÿ™', 'success');
            } else {
                showNotification('ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ÿ®ÿ±ÿß€å ÿÆÿ±€åÿØ ⁄©ÿ™ÿßÿ® ÿ±ÿßŸáŸÜŸÖÿß ŸÜÿØÿßÿ±€åÿØ!', 'error');
            }
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ ŸÜŸÖŸàÿØÿßÿ± Ÿàÿ∂ÿπ€åÿ™ ====================
        function updateStats() {
            if (!gameData.currentUser) return;
            
            // ÿ¢ŸæÿØ€åÿ™ ŸÜŸÖŸàÿØÿßÿ±Ÿáÿß
            document.getElementById('healthChart').style.width = `${gameData.currentUser.health}%`;
            document.getElementById('energyChart').style.width = `${gameData.currentUser.energy}%`;
            document.getElementById('hungerChart').style.width = `${gameData.currentUser.hunger}%`;
            document.getElementById('intelligenceChart').style.width = `${gameData.currentUser.intelligence}%`;
            
            // ÿ¢ŸæÿØ€åÿ™ ŸÖŸÇÿßÿØ€åÿ±
            document.getElementById('healthValue').textContent = `${gameData.currentUser.health}%`;
            document.getElementById('energyValue').textContent = `${gameData.currentUser.energy}%`;
            document.getElementById('hungerValue').textContent = `${gameData.currentUser.hunger}%`;
            document.getElementById('intelligenceValue').textContent = `${gameData.currentUser.intelligence}%`;
            
            // ÿ¢ŸæÿØ€åÿ™ ÿ¢ŸÖÿßÿ±
            document.getElementById('statsCoins').textContent = `${gameData.currentUser.coins.toLocaleString()} ü™ô`;
            document.getElementById('statsProperties').textContent = gameData.currentUser.properties.length;
            document.getElementById('statsVehicles').textContent = gameData.currentUser.vehicles.length;
            document.getElementById('statsCertificates').textContent = gameData.currentUser.certificates.length;
        }

        // ==================== ÿ≥€åÿ≥ÿ™ŸÖ Ÿæÿß€åÿßŸÜ ÿ®ÿßÿ≤€å ====================
        function checkGameOver() {
            if (gameData.gameOver) return;
            
            // Ÿæÿß€åÿßŸÜ ÿßÿπÿØÿßŸÖ
            if (gameData.crimes >= 5) {
                gameOver('ÿßÿπÿØÿßŸÖ', 'ÿ®Ÿá ÿØŸÑ€åŸÑ ÿßÿ±ÿ™⁄©ÿßÿ® ÿ¨ÿ±ÿß€åŸÖ ŸÖÿ™ÿπÿØÿØÿå ÿ¥ŸÖÿß ÿ®Ÿá ÿßÿπÿØÿßŸÖ ŸÖÿ≠⁄©ŸàŸÖ ÿ¥ÿØ€åÿØ!');
                return;
            }
            
            // Ÿæÿß€åÿßŸÜ Ÿàÿ±ÿ¥⁄©ÿ≥ÿ™⁄Ø€å
            if (gameData.currentUser.coins <= 0 && 
                gameData.currentUser.properties.length === 0 && 
                gameData.currentUser.vehicles.length === 0 &&
                gameData.currentUser.electronics.length === 0 &&
                !gameData.internetPackage) {
                gameOver('Ÿàÿ±ÿ¥⁄©ÿ≥ÿ™⁄Ø€å', 'ÿ™ŸÖÿßŸÖ ÿØÿßÿ±ÿß€å€å‚ÄåŸáÿß€å ÿÆŸàÿØ ÿ±ÿß ÿßÿ≤ ÿØÿ≥ÿ™ ÿØÿßÿØŸá‚Äåÿß€åÿØ Ÿà Ÿá€å⁄Ü ÿ±ÿßŸá€å ÿ®ÿ±ÿß€å ⁄©ÿ≥ÿ® ÿØÿ±ÿ¢ŸÖÿØ ŸÜÿØÿßÿ±€åÿØ!');
                return;
            }
            
            // Ÿæÿß€åÿßŸÜ ÿ™ÿ≠ÿµ€åŸÑ€å
            if (gameData.currentUser.certificates.some(c => c.name === '⁄©ŸÑÿßÿ≥ ⁄ÜŸáÿßÿ±ŸÖ') &&
                gameData.currentUser.certificates.some(c => c.name === 'ŸÖÿØÿ±⁄© Ÿæÿ≤ÿ¥⁄©€å')) {
                gameOver('Ÿæÿß€åÿßŸÜ ÿ™ÿ≠ÿµ€åŸÑ€å', 'ÿ™ÿ®ÿ±€å⁄©! ÿ¥ŸÖÿß ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ™ŸÖÿßŸÖ ŸÖÿ±ÿßÿ≠ŸÑ ÿ™ÿ≠ÿµ€åŸÑ€å ÿ±ÿß ÿ®Ÿá Ÿæÿß€åÿßŸÜ ÿ±ÿ≥ÿßŸÜÿØ€åÿØ Ÿà ÿ®Ÿá €å⁄© Ÿæÿ≤ÿ¥⁄© ŸÖÿ™ÿÆÿµÿµ ÿ™ÿ®ÿØ€åŸÑ ÿ¥ÿØ€åÿØ!');
                return;
            }
        }

        function gameOver(title, reason) {
            gameData.gameOver = true;
            
            document.getElementById('gameOverScreen').style.display = 'flex';
            document.getElementById('gameOverTitle').textContent = title;
            document.getElementById('gameOverReason').textContent = reason;
            
            // ŸÜŸÖÿß€åÿ¥ ÿ¢ŸÖÿßÿ± ŸÜŸáÿß€å€å
            const stats = document.getElementById('gameOverStats');
            stats.innerHTML = `
                <div class="game-over-stat">
                    <span>ÿ≥⁄©Ÿá‚ÄåŸáÿß€å ŸÜŸáÿß€å€å:</span>
                    <span>${gameData.currentUser.coins.toLocaleString()} ü™ô</span>
                </div>
                <div class="game-over-stat">
                    <span>ŸÖŸÑ⁄©‚ÄåŸáÿß:</span>
                    <span>${gameData.currentUser.properties.length}</span>
                </div>
                <div class="game-over-stat">
                    <span>Ÿàÿ≥ÿß€åŸÑ ŸÜŸÇŸÑ€åŸá:</span>
                    <span>${gameData.currentUser.vehicles.length}</span>
                </div>
                <div class="game-over-stat">
                    <span>⁄ØŸàÿßŸá€åŸÜÿßŸÖŸá‚ÄåŸáÿß:</span>
                    <span>${gameData.currentUser.certificates.length}</span>
                </div>
                <div class="game-over-stat">
                    <span>ÿ¨ÿ±ÿß€åŸÖ:</span>
                    <span>${gameData.crimes}</span>
                </div>
            `;
        }

        function restartGame() {
            // Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ÿØÿßÿØŸá‚ÄåŸáÿß€å ÿ®ÿßÿ≤€å
            localStorage.removeItem('drHoseyniGame');
            
            // ÿ±€åÿ≥ÿ™ÿßÿ±ÿ™ ÿ®ÿßÿ≤€å
            location.reload();
        }

        // ==================== ÿßÿ®ÿ≤ÿßÿ±Ÿáÿß€å ⁄©ŸÖ⁄©€å ====================
        function getVehicleIcon(type) {
            switch(type) {
                case 'bicycle': return 'üö≤';
                case 'motorcycle': return 'üèçÔ∏è';
                case 'car': return 'üöó';
                case 'supercar': return 'üöÄ';
                default: return 'üöó';
            }
        }

        function showModal(content) {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'block';
            modal.innerHTML = `
                <div class="modal-content">
                    <button class="close-modal" onclick="closeModal()">√ó</button>
                    ${content}
                </div>
            `;
            document.body.appendChild(modal);
        }

        function closeModal() {
            const modal = document.querySelector('.modal');
            if (modal) modal.remove();
        }

        function saveGameData() {
            try {
                localStorage.setItem('drHoseyniGame', JSON.stringify(gameData));
            } catch (e) {
                console.error('ÿÆÿ∑ÿß ÿØÿ± ÿ∞ÿÆ€åÿ±Ÿá ÿ®ÿßÿ≤€å:', e);
            }
        }

        function loadGameData() {
            try {
                const saved = localStorage.getItem('drHoseyniGame');
                if (saved) {
                    const parsedData = JSON.parse(saved);
                    // ÿ≠ŸÅÿ∏ ÿ™Ÿàÿßÿ®ÿπ Ÿà ŸÖÿ™ÿØŸáÿß€å ŸÖŸàÿ¨ŸàÿØ
                    Object.assign(gameData, parsedData);
                }
            } catch (e) {
                console.error('ÿÆÿ∑ÿß ÿØÿ± ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿ®ÿßÿ≤€å:', e);
            }
        }

        // ==================== ÿ≠ŸÑŸÇŸá‚ÄåŸáÿß€å ÿ®ÿßÿ≤€å ====================
        function startTimeLoop() {
            setInterval(updateGameTime, 60000 / gameData.gameSpeed); // 1 ÿØŸÇ€åŸÇŸá ŸàÿßŸÇÿπ€å = 1 ÿ≥ÿßÿπÿ™ ÿ®ÿßÿ≤€å
        }

        function startGameLoop() {
            setInterval(() => {
                if (!gameData.currentUser || gameData.isInJail || gameData.isSleeping || gameData.gameOver) return;
                
                // ÿ≥€åÿ≥ÿ™ŸÖ ⁄Øÿ±ÿ≥ŸÜ⁄Ø€å
                gameData.currentUser.hunger += 1;
                if (gameData.currentUser.hunger > 100) {
                    gameData.currentUser.hunger = 100;
                    gameData.currentUser.health -= 2;
                    if (gameData.currentUser.health < 0) gameData.currentUser.health = 0;
                    
                    if (gameData.currentUser.health <= 0) {
                        showNotification('üíÄ ÿßÿ≤ ⁄Øÿ±ÿ≥ŸÜ⁄Ø€å ŸÖÿ±ÿØ€åÿØ! ÿ®Ÿá ÿ®€åŸÖÿßÿ±ÿ≥ÿ™ÿßŸÜ ŸÖŸÜÿ™ŸÇŸÑ ÿ¥ÿØ€åÿØ.', 'error');
                        gameData.currentUser.health = 50;
                        gameData.currentUser.hunger = 50;
                        gameData.currentUser.coins -= 2000;
                    }
                }
                
                // ÿ®ÿßÿ≤€åÿßÿ®€å ÿßŸÜÿ±⁄ò€å
                if (gameData.currentUser.hunger < 50) {
                    gameData.currentUser.energy = Math.min(100, gameData.currentUser.energy + 0.5);
                }
                
                // ÿ®ÿßÿ≤€åÿßÿ®€å ÿ≥ŸÑÿßŸÖÿ™
                if (gameData.currentUser.hunger < 30 && gameData.currentUser.energy > 50) {
                    gameData.currentUser.health = Math.min(100, gameData.currentUser.health + 0.2);
                }
                
                // ⁄©ÿßŸáÿ¥ ÿ≤ŸÖÿßŸÜ ŸÇÿ®ÿ∂‚ÄåŸáÿß
                if (gameData.currentUser.bills) {
                    gameData.currentUser.bills.forEach(bill => {
                        if (Math.random() < 0.01) { // 1% chance per minute
                            bill.dueDate--;
                            if (bill.dueDate <= -7) { // 7 ÿ±Ÿàÿ≤ ŸÖÿπŸàŸÇŸá
                                gameData.crimes++;
                                sendToJail('ÿπÿØŸÖ Ÿæÿ±ÿØÿßÿÆÿ™ ŸÇÿ®ÿ∂');
                            }
                        }
                    });
                }
                
                // ŸÜŸàÿ≥ÿßŸÜ ŸÇ€åŸÖÿ™ ÿ≥ŸáÿßŸÖ Ÿà ÿ™ÿ±€åÿØ
                if (Math.random() < 0.05) { // 5% chance per minute
                    gameData.stocks.forEach(stock => {
                        const change = (Math.random() - 0.5) * 2 * stock.volatility;
                        stock.price = Math.max(10, Math.floor(stock.price * (1 + change)));
                    });
                    
                    gameData.tradeItems.forEach(item => {
                        const change = (Math.random() - 0.5) * 2 * item.volatility;
                        item.price = Math.max(10, Math.floor(item.price * (1 + change)));
                    });
                }
                
                saveGameData();
                updateUserInfo();
                updateStats();
            }, 30000);
        }

        // ==================== ÿ±ÿßŸá‚ÄåÿßŸÜÿØÿßÿ≤€å ÿßŸàŸÑ€åŸá ====================
        document.addEventListener('DOMContentLoaded', function() {
            loadGameData();
            
            if (gameData.currentUser) {
                showGamePage();
                startTimeLoop();
                startGameLoop();
                
                if (gameData.isInJail) {
                    document.getElementById('jailScreen').style.display = 'flex';
                }
                
                if (gameData.isSleeping) {
                    document.getElementById('sleepScreen').style.display = 'flex';
                }
                
                if (gameData.gameOver) {
                    document.getElementById('gameOverScreen').style.display = 'flex';
                }
            }
        });

        // ÿ¨ŸÑŸà⁄Ø€åÿ±€å ÿßÿ≤ ÿßÿ≥⁄©ÿ±ŸàŸÑ Ÿà ÿ≤ŸàŸÖ
        document.addEventListener('touchmove', function(e) {
            if (e.touches.length > 1) {
                e.preventDefault();
            }
        }, { passive: false });

        document.addEventListener('gesturestart', function(e) {
            e.preventDefault();
        });
    </script>
</body>
    </html>
